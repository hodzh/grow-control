(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},crnd:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},zUnb:function(e,t,n){"use strict";n.r(t);var i=n("fXoL"),o=(n("yLV6"),n("75ce"),n("AH3D"),n("Ynxi"),n("sRwP"),n("Cm0C"),!1),c=n("jhN1"),r=n("tyNb"),a=[{path:"",redirectTo:"dashboard",pathMatch:"full"}],s=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forRoot(a)],r.e]}),e}(),u=n("mrSG"),p=n("l7P3"),l=14,b=24,d=function(e){return e[e.in=0]="in",e[e.out=1]="out",e}({});function f(e){return{wday:e.getDay(),day:e.getDate(),month:e.getMonth(),year:e.getFullYear()-1970}}function m(e){return new Date(e.year+1970,e.month,e.day)}function h(){return{valves:new Array(Math.ceil(3)).fill(0),compote:0,start:f(new Date)}}function g(){return{days:0,schedule:0,volume:0,washVolume:0,dose:new Array(4).fill(0)}}function y(){return{daily:new Array(l).fill(0).map(function(){return g()})}}function O(){return{enable:0,deviceId:0,startTime:{hour:0,minute:0,second:0},endTime:{hour:0,minute:0,second:0}}}function S(){return{enable:0,program:0,weekDays:0,time:{hour:0,minute:0,second:0}}}function v(){return{minFlow:100,startingTime:3e3,pwmFlow:0,pwm:0,rate:5880}}function T(){return{rate:0,seconds:0,pwmSensor:0,pwm:0}}function C(){return{beepSeconds:1}}function E(){return{seconds:180,washSeconds:180,pwmSensor:0,pwm:0}}var j=function(e){return e.INIT="[Settings] Init",e.UPDATE="[Settings] Update",e.CHANGE_NAME="[Settings] Change name",e.ADD_COMPOTE="[Settings] Add compote",e.CHANGE_COMPOTE="[Settings] Change compote",e.REMOVE_COMPOTE="[Settings] Remove compote",e.LOAD_COMPOTE="[Settings] Load compote",e.UPDATE_COMPOTE="[Settings] Update compote",e.ADD_COMPOTE_DAILY="[Settings] Add compote daily",e.CHANGE_COMPOTE_DAILY="[Settings] Change compote daily",e.REMOVE_COMPOTE_DAILY="[Settings] Remove compote daily",e.LOAD_COMPOTE_DAILY="[Settings] Load compote daily",e.UPDATE_COMPOTE_DAILY="[Settings] Update compote daily",e.ADD_PROGRAM="[Settings] Add program",e.CHANGE_PROGRAM="[Settings] Change program",e.REMOVE_PROGRAM="[Settings] Remove program",e.LOAD_PROGRAM="[Settings] Load program",e.UPDATE_PROGRAM="[Settings] Update program",e.ADD_PUMP="[Settings] Add pump",e.CHANGE_PUMP="[Settings] Change pump",e.REMOVE_PUMP="[Settings] Remove pump",e.LOAD_PUMP="[Settings] Load pump",e.UPDATE_PUMP="[Settings] Update pump",e.ADD_DOSE="[Settings] Add dose",e.CHANGE_DOSE="[Settings] Change dose",e.REMOVE_DOSE="[Settings] Remove dose",e.LOAD_DOSE="[Settings] Load dose",e.UPDATE_DOSE="[Settings] Update dose",e.ADD_TIMER="[Settings] Add timer",e.CHANGE_TIMER="[Settings] Change timer",e.REMOVE_TIMER="[Settings] Remove timer",e.LOAD_TIMER="[Settings] Load timer",e.UPDATE_TIMER="[Settings] Update timer",e.ADD_SCHEDULE="[Settings] Add schedule",e.CHANGE_SCHEDULE="[Settings] Change schedule",e.REMOVE_SCHEDULE="[Settings] Remove schedule",e.LOAD_SCHEDULE="[Settings] Load schedule",e.UPDATE_SCHEDULE="[Settings] Update schedule",e.ADD_MIXER="[Settings] Add mixer",e.CHANGE_MIXER="[Settings] Change mixer",e.REMOVE_MIXER="[Settings] Remove mixer",e.LOAD_MIXER="[Settings] Load mixer",e.UPDATE_MIXER="[Settings] Update mixer",e.CHANGE_PIN_ASSIGNMENT="[Settings] Change pin assignment",e.LOAD_PIN_ASSIGNMENT="[Settings] Load pin assignment",e.UPDATE_PIN_ASSIGNMENT="[Settings] Update pin assignment",e.SYNC="[Settings] Sync",e.SYNC_END="[Settings] Sync end",e}({}),A=function(){return function(){this.type=j.INIT}}(),w=function(){return function(e){this.payload=e,this.type=j.UPDATE}}(),I=function(){return function(){this.type=j.ADD_COMPOTE}}(),D=function(){return function(e){this.payload=e,this.type=j.CHANGE_COMPOTE}}(),_=function(){return function(e){this.payload=e,this.type=j.REMOVE_COMPOTE}}(),x=function(){return function(){this.type=j.LOAD_COMPOTE}}(),k=function(){return function(e){this.payload=e,this.type=j.ADD_COMPOTE_DAILY}}(),P=function(){return function(e){this.payload=e,this.type=j.CHANGE_COMPOTE_DAILY}}(),N=function(){return function(e){this.payload=e,this.type=j.UPDATE_COMPOTE_DAILY}}(),R=function(){return function(){this.type=j.ADD_PROGRAM}}(),M=function(){return function(e){this.payload=e,this.type=j.CHANGE_PROGRAM}}(),L=function(){return function(e){this.payload=e,this.type=j.REMOVE_PROGRAM}}(),B=function(){return function(e){this.payload=e,this.type=j.UPDATE_PROGRAM}}(),F=function(){return function(){this.type=j.LOAD_PROGRAM}}(),U=function(){return function(e){this.payload=e,this.type=j.CHANGE_PUMP}}(),G=function(){return function(e){this.payload=e,this.type=j.REMOVE_PUMP}}(),$=function(){return function(e){this.payload=e,this.type=j.UPDATE_PUMP}}(),V=function(){return function(){this.type=j.LOAD_PUMP}}(),H=function(){return function(e){this.payload=e,this.type=j.CHANGE_DOSE}}(),K=function(){return function(e){this.payload=e,this.type=j.REMOVE_DOSE}}(),W=function(){return function(e){this.payload=e,this.type=j.UPDATE_DOSE}}(),Y=function(){return function(){this.type=j.LOAD_DOSE}}(),X=function(){return function(e){this.payload=e,this.type=j.CHANGE_TIMER}}(),z=function(){return function(e){this.payload=e,this.type=j.REMOVE_TIMER}}(),q=function(){return function(e){this.payload=e,this.type=j.UPDATE_TIMER}}(),J=function(){return function(){this.type=j.LOAD_TIMER}}(),Q=function(){return function(e){this.payload=e,this.type=j.CHANGE_SCHEDULE}}(),Z=function(){return function(e){this.payload=e,this.type=j.REMOVE_SCHEDULE}}(),ee=function(){return function(e){this.payload=e,this.type=j.UPDATE_SCHEDULE}}(),te=function(){return function(){this.type=j.LOAD_SCHEDULE}}(),ne=function(){return function(e){this.payload=e,this.type=j.CHANGE_MIXER}}(),ie=function(){return function(e){this.payload=e,this.type=j.REMOVE_MIXER}}(),oe=function(){return function(e){this.payload=e,this.type=j.UPDATE_MIXER}}(),ce=function(){return function(){this.type=j.LOAD_MIXER}}(),re=function(){return function(){this.type=j.LOAD_PIN_ASSIGNMENT}}(),ae=function(){return function(e){this.payload=e,this.type=j.CHANGE_PIN_ASSIGNMENT}}(),se=function(){return function(e){this.payload=e,this.type=j.UPDATE_PIN_ASSIGNMENT}}(),ue=function(){return function(e){this.payload=e,this.type=j.CHANGE_NAME}}(),pe=function(){return function(){this.type=j.SYNC}}(),le=function(){return function(){this.type=j.SYNC_END}}(),be={settings:{program:new Array(4).fill(0).map(function(){return h()}),compote:new Array(2).fill(0).map(function(){return y()}),schedule:new Array(4).fill(0).map(function(){return{enable:0,deviceId:0,startTime:{hour:0,minute:0,second:0},endTime:{hour:0,minute:0,second:0}}}),timer:new Array(8).fill(0).map(function(){return{enable:0,program:0,weekDays:0,time:{hour:0,minute:0,second:0}}}),pump:new Array(2).fill(0).map(function(){return{minFlow:100,startingTime:3e3,pwmFlow:0,pwm:0,rate:5880}}),mixer:new Array(1).fill(0).map(function(){return{seconds:180,washSeconds:180,pwmSensor:0,pwm:0}}),dose:new Array(4).fill(0).map(function(){return{rate:0,seconds:0,pwmSensor:0,pwm:0}}),levelSensor:new Array(4).fill(0).map(function(){return{beepSeconds:1}})},pinAssignment:{pump:[],flowSensor:[],levelSensor:[],mixer:[],dose:[],doseMixer:[],valve:[],rtc:[],display:[],button:[]},names:{program:new Array(4).fill(""),compote:new Array(2).fill(""),schedule:new Array(4).fill(""),timer:new Array(8).fill(""),pump:["In","Out"],mixer:["Compote","Wash"],dose:["Grow","Bloom","",""],levelSensor:["Min","Max"]},sync:!1},de=function(e){return e.settings},fe=function(e){return e.settings.settings.program},me=function(e){return function(t){return t.settings.settings.program[e]}},he=function(e){return e.settings.settings.compote},ge=function(e){return e.settings.settings.timer},ye=function(e){return function(t){return t.settings.settings.timer[e]}},Oe=function(e){return e.settings.settings.schedule},Se=function(e){return function(t){return t.settings.settings.schedule[e]}},ve=function(e){return e.settings.settings.pump},Te=function(e){return function(t){return t.settings.settings.pump[e]}},Ce=function(e){return e.settings.settings.mixer},Ee=function(e){return function(t){return t.settings.settings.mixer[e]}},je=function(e){return e.settings.settings.dose},Ae=function(e){return function(t){return t.settings.settings.dose[e]}},we=function(e){return function(t){return t.settings.pinAssignment.pump[e]}},Ie=function(e){return e.settings.pinAssignment.pump},De=function(e){return function(t){return t.settings.pinAssignment.flowSensor[e]}},_e=function(e){return e.settings.pinAssignment.flowSensor},xe=function(e){return function(t){return t.settings.pinAssignment.mixer[e]}},ke=function(e){return e.settings.pinAssignment.mixer},Pe=function(e){return function(t){return t.settings.pinAssignment.dose[e]}},Ne=function(e){return e.settings.pinAssignment.dose},Re=function(e){return function(t){return t.settings.pinAssignment.doseMixer[e]}},Me=function(e){return e.settings.pinAssignment.doseMixer},Le=function(e){return e.settings.pinAssignment.valve},Be=function(e){return e.settings.pinAssignment.levelSensor},Fe=function(e){return function(t){return t.settings.names[e]}},Ue=function(e){return e.settings.sync};function Ge(e,t){switch(void 0===e&&(e=be),t.type){case j.UPDATE:return function(e,t){return t?Object(u.a)(Object(u.a)({},t),{settings:{program:Ve(t.settings.program,4,h),compote:Ve(t.settings.compote,2,y),schedule:Ve(t.settings.schedule,4,O),timer:Ve(t.settings.timer,8,S),pump:Ve(t.settings.pump,2,v),levelSensor:Ve(t.settings.levelSensor,2,C),mixer:Ve(t.settings.mixer,1,E),dose:Ve(t.settings.dose,4,T)},pinAssignment:{pump:Ve(t.pinAssignment.pump,2,$e),levelSensor:Ve(t.pinAssignment.levelSensor,2,$e),mixer:Ve(t.pinAssignment.mixer,1,$e),dose:Ve(t.pinAssignment.dose,4,$e),valve:Ve(t.pinAssignment.valve,b,$e),doseMixer:t.pinAssignment.doseMixer,flowSensor:t.pinAssignment.flowSensor,rtc:t.pinAssignment.rtc,display:t.pinAssignment.display,button:t.pinAssignment.button}}):e}(e,t.payload);case j.CHANGE_NAME:return function(e,t){var n,i=t.key,o=t.index,c=t.value,r=e.names[i].slice(0);return r[o]=c,Object(u.a)(Object(u.a)({},e),{names:Object(u.a)(Object(u.a)({},e.names),(n={},n[i]=r,n))})}(e,t.payload);case j.ADD_COMPOTE:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{compote:Object(u.f)(e.settings.compote,[{daily:[]}])})})}(e);case j.CHANGE_COMPOTE:return function(e,t){var n=t.index,i=t.value,o=e.settings.compote.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{compote:o})})}(e,t.payload);case j.REMOVE_COMPOTE:return function(e,t){var n=e.settings.compote.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{compote:n})})}(e,t.payload);case j.ADD_COMPOTE_DAILY:return function(e,t){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{compote:e.settings.compote.map(function(e,n){return n===t?Object(u.a)(Object(u.a)({},e),{daily:Object(u.f)(e.daily,[g()])}):e})})})}(e,t.payload);case j.CHANGE_COMPOTE_DAILY:case j.UPDATE_COMPOTE_DAILY:return function(e,t){var n=t.index,i=t.dailyIndex,o=t.value,c=e.settings.compote.slice(0),r=c[n].daily.slice(0);return r[i]=o,c[n]=Object(u.a)(Object(u.a)({},c[n]),{daily:r}),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{compote:c})})}(e,t.payload);case j.LOAD_COMPOTE_DAILY:return e;case j.REMOVE_COMPOTE_DAILY:return function(e,t){var n=t.index,i=e.settings.compote.slice(0);return i.splice(n,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{compote:i})})}(e,t.payload);case j.ADD_PROGRAM:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{program:Object(u.f)(e.settings.program,[h()])})})}(e);case j.CHANGE_PROGRAM:case j.UPDATE_PROGRAM:return function(e,t){var n=t.index,i=t.value,o=e.settings.program.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{program:o})})}(e,t.payload);case j.LOAD_PROGRAM:return e;case j.REMOVE_PROGRAM:return function(e,t){var n=e.settings.program.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{program:n})})}(e,t.payload);case j.ADD_DOSE:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{dose:Object(u.f)(e.settings.dose,[{rate:0,seconds:0,pwmSensor:0,pwm:0}])})})}(e);case j.CHANGE_DOSE:case j.UPDATE_DOSE:return function(e,t){var n=t.index,i=t.value,o=e.settings.dose.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{dose:o})})}(e,t.payload);case j.LOAD_DOSE:return e;case j.REMOVE_DOSE:return function(e,t){var n=e.settings.dose.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{dose:n})})}(e,t.payload);case j.ADD_PUMP:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{pump:Object(u.f)(e.settings.pump,[{minFlow:100,startingTime:3e3,pwmFlow:0,pwm:0,rate:5880}])})})}(e);case j.CHANGE_PUMP:case j.UPDATE_PUMP:return function(e,t){var n=t.index,i=t.value,o=e.settings.pump.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{pump:o})})}(e,t.payload);case j.LOAD_PUMP:return e;case j.REMOVE_PUMP:return function(e,t){var n=e.settings.pump.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{pump:n})})}(e,t.payload);case j.ADD_TIMER:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{timer:Object(u.f)(e.settings.timer,[{enable:0,program:0,weekDays:0,time:{hour:0,minute:0,second:0}}])})})}(e);case j.CHANGE_TIMER:case j.UPDATE_TIMER:return function(e,t){var n=t.index,i=t.value,o=e.settings.timer.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{timer:o})})}(e,t.payload);case j.LOAD_TIMER:return e;case j.REMOVE_TIMER:return function(e,t){var n=e.settings.timer.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{timer:n})})}(e,t.payload);case j.ADD_SCHEDULE:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{schedule:Object(u.f)(e.settings.schedule,[{enable:0,deviceId:0,startTime:{hour:0,minute:0,second:0},endTime:{hour:0,minute:0,second:0}}])})})}(e);case j.CHANGE_SCHEDULE:case j.UPDATE_SCHEDULE:return function(e,t){var n=t.index,i=t.value,o=e.settings.schedule.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{schedule:o})})}(e,t.payload);case j.LOAD_SCHEDULE:return e;case j.REMOVE_SCHEDULE:return function(e,t){var n=e.settings.schedule.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{schedule:n})})}(e,t.payload);case j.ADD_MIXER:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{mixer:Object(u.f)(e.settings.mixer,[{seconds:180,washSeconds:180,pwmSensor:0,pwm:0}])})})}(e);case j.CHANGE_MIXER:case j.UPDATE_MIXER:return function(e,t){var n=t.index,i=t.value,o=e.settings.mixer.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{mixer:o})})}(e,t.payload);case j.LOAD_MIXER:return e;case j.REMOVE_MIXER:return function(e,t){var n=e.settings.mixer.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{mixer:n})})}(e,t.payload);case j.LOAD_PIN_ASSIGNMENT:return e;case j.CHANGE_PIN_ASSIGNMENT:case j.UPDATE_PIN_ASSIGNMENT:return function(e,t){var n,i=t.key,o=t.index,c=t.value,r=e.pinAssignment[i].slice(0);r[o]=c;var a=Object(u.a)(Object(u.a)({},e.pinAssignment),((n={})[i]=r,n));return Object(u.a)(Object(u.a)({},e),{pinAssignment:a})}(e,t.payload);case j.SYNC:return Object(u.a)(Object(u.a)({},e),{sync:!0});case j.SYNC_END:return Object(u.a)(Object(u.a)({},e),{sync:!1});default:return e}}function $e(){return 0}function Ve(e,t,n){if(e.length===t)return e;if(e.length>t)return e.slice(0,t);for(var i=e.slice(),o=e.length;o<t;o++)i.push(n());return i}var He=function(e){return e.INIT="[Config] Init",e.UPDATE="[Config] Update",e.UPDATE_DATABASE_SIZES="[Config] Update size",e.SET_DEVICE="[Config] Set device",e.SET_DATABASE_SIZES="[Config] Set database sizes",e.CHANGE="[Config] Change",e.CLEAR_DATABASE="[Config] Clear database",e}({}),Ke=function(){return function(){this.type=He.INIT}}(),We=function(){return function(e){this.payload=e,this.type=He.UPDATE}}(),Ye=function(){return function(){this.type=He.UPDATE_DATABASE_SIZES}}(),Xe=function(){return function(e){this.payload=e,this.type=He.SET_DEVICE}}(),ze=function(){return function(e){this.payload=e,this.type=He.SET_DATABASE_SIZES}}(),qe=function(){return function(e){this.payload=e,this.type=He.CHANGE}}(),Je=function(){return function(e){this.payload=e,this.type=He.CLEAR_DATABASE}}(),Qe={device:null,databaseSizes:[],updateDatabaseSizes:!1,monitor:{time:{enable:!0,interval:5e3},temp:{enable:!0,interval:5e3},status:{enable:!0,interval:5e3}},accessControl:{enable:!1,fps:3}},Ze=function(e){return e.config},et=function(e){return e.config.device},tt=function(e){return e.config.databaseSizes},nt=function(e){return e.config.updateDatabaseSizes},it=function(e){return e.config.monitor},ot=function(e){return e.config.accessControl};function ct(e,t){switch(void 0===e&&(e=Qe),t.type){case He.UPDATE:return function(e,t){return t||e}(e,t.payload);case He.UPDATE_DATABASE_SIZES:return Object(u.a)(Object(u.a)({},e),{updateDatabaseSizes:!0});case He.SET_DEVICE:return function(e,t){return Object(u.a)(Object(u.a)({},e),{device:t})}(e,t.payload);case He.SET_DATABASE_SIZES:return function(e,t){return Object(u.a)(Object(u.a)({},e),{databaseSizes:t,updateDatabaseSizes:!1})}(e,t.payload);case He.CHANGE:return Object(u.a)(Object(u.a)({},e),t.payload);default:return e}}var rt=n("pLZG"),at=n("lJxs"),st=n("IzEk"),ut=function(e){return e.CONNECTING="connecting",e.CONNECTED="connected",e.DISCONNECTING="disconnecting",e.DISCONNECTED="disconnected",e.TRANSFER="transfer",e}({}),pt=function(e){return e.CONNECT="[Connect] Connect",e.DISCONNECT="[Connect] Disconnect",e.SET_STATUS="[Connect] Set status",e.REQUEST="[Connect] Request",e.RESPONSE="[Connect] Response",e.ERROR="[Connect] Error",e}({}),lt=function(){return function(){this.type=pt.CONNECT}}(),bt=function(){return function(){this.type=pt.DISCONNECT}}(),dt=function(){return function(e){this.payload=e,this.type=pt.SET_STATUS}}(),ft=function(){return function(e){this.payload=e,this.type=pt.REQUEST}}(),mt=function(){return function(e){this.payload=e,this.type=pt.RESPONSE}}(),ht=function(){return function(e){this.payload=e,this.type=pt.ERROR}}(),gt={status:ut.DISCONNECTED},yt=function(e){return e.connect.status};function Ot(e,t){switch(void 0===e&&(e=gt),t.type){case pt.CONNECT:return Object(u.a)(Object(u.a)({},e),{status:ut.CONNECTING});case pt.DISCONNECT:return Object(u.a)(Object(u.a)({},e),{status:ut.DISCONNECTING});case pt.SET_STATUS:return Object(u.a)(Object(u.a)({},e),{status:t.payload});case pt.REQUEST:return Object(u.a)({},e);case pt.ERROR:return Object(u.a)(Object(u.a)({},e),{status:ut.DISCONNECTED});default:return e}}var St=function(e){return e.INIT="[Dashboard] Init",e.UPDATE_TIME="[Dashboard] Update time",e.UPDATE_TEMP="[Dashboard] Update temp",e.UPDATE_STATUS="[Dashboard] Update status",e.SYNC_TIME="[Dashboard] Sync time",e}({}),vt=function(){return function(){this.type=St.INIT}}(),Tt=function(){return function(e){this.payload=e,this.type=St.UPDATE_TIME}}(),Ct=function(){return function(e){this.payload=e,this.type=St.UPDATE_TEMP}}(),Et=function(){return function(e){this.payload=e,this.type=St.UPDATE_STATUS}}(),jt=function(){return function(){this.type=St.SYNC_TIME}}(),At={time:{minute:0,second:0,hour:0,wday:0,day:0,month:0,year:0},temp:0,minTemp:-99,maxTemp:99,status:{state:0,cmdState:0,valve:0,flow:0,volume:0,totalVolume:0,mix:0,doseId:0,valveId:0}},wt=function(e){return e.dashboard.time},It=function(e){return e.dashboard.temp},Dt=function(e){return e.dashboard.minTemp},_t=function(e){return e.dashboard.maxTemp},xt=function(e){return e.dashboard.status};function kt(e,t){switch(void 0===e&&(e=At),t.type){case St.UPDATE_TIME:return function(e,t){return Object(u.a)(Object(u.a)({},e),{time:t})}(e,t.payload);case St.UPDATE_TEMP:return function(e,t){return Object(u.a)(Object(u.a)({},e),{temp:t,minTemp:Math.min(t,e.minTemp),maxTemp:Math.max(t,e.maxTemp)})}(e,t.payload);case St.UPDATE_STATUS:return function(e,t){return Object(u.a)(Object(u.a)({},e),{status:t})}(e,t.payload);default:return e}}var Pt=function(e){return e[e.fertigate=0]="fertigate",e[e.irrigate=1]="irrigate",e[e.wash=2]="wash",e[e.pumpIn=3]="pumpIn",e[e.compote=4]="compote",e[e.washCompote=5]="washCompote",e[e.mix=6]="mix",e[e.mixDose=7]="mixDose",e[e.dose=8]="dose",e[e.getProgram=9]="getProgram",e[e.setProgram=10]="setProgram",e[e.getCompoteDaily=11]="getCompoteDaily",e[e.setCompoteDaily=12]="setCompoteDaily",e[e.getSchedule=13]="getSchedule",e[e.setSchedule=14]="setSchedule",e[e.getTimer=15]="getTimer",e[e.setTimer=16]="setTimer",e[e.getPump=17]="getPump",e[e.setPump=18]="setPump",e[e.getMixer=19]="getMixer",e[e.setMixer=20]="setMixer",e[e.getDose=21]="getDose",e[e.setDose=22]="setDose",e[e.getPinPump=23]="getPinPump",e[e.setPinPump=24]="setPinPump",e[e.getPinValve=25]="getPinValve",e[e.setPinValve=26]="setPinValve",e[e.getPinFlowSensor=27]="getPinFlowSensor",e[e.setPinFlowSensor=28]="setPinFlowSensor",e[e.getPinLevelSensor=29]="getPinLevelSensor",e[e.setPinLevelSensor=30]="setPinLevelSensor",e[e.getPinMixer=31]="getPinMixer",e[e.setPinMixer=32]="setPinMixer",e[e.getPinDose=33]="getPinDose",e[e.setPinDose=34]="setPinDose",e[e.getPinDoseMixer=35]="getPinDoseMixer",e[e.setPinDoseMixer=36]="setPinDoseMixer",e[e.getTime=37]="getTime",e[e.setTime=38]="setTime",e[e.getTemp=39]="getTemp",e[e.getStatus=40]="getStatus",e[e.getStatePump=41]="getStatePump",e[e.setStatePump=42]="setStatePump",e[e.getStateValve=43]="getStateValve",e[e.setStateValve=44]="setStateValve",e[e.getStateMixer=45]="getStateMixer",e[e.setStateMixer=46]="setStateMixer",e[e.getStateDose=47]="getStateDose",e[e.setStateDose=48]="setStateDose",e[e.getStateDoseMixer=49]="getStateDoseMixer",e[e.setStateDoseMixer=50]="setStateDoseMixer",e[e.resetError=51]="resetError",e}({}),Nt=function(e){return e[e.commandSuccess=0]="commandSuccess",e[e.log=1]="log",e[e.error=2]="error",e[e.status=3]="status",e[e.program=4]="program",e[e.compoteDaily=5]="compoteDaily",e[e.schedule=6]="schedule",e[e.timer=7]="timer",e[e.pump=8]="pump",e[e.mixer=9]="mixer",e[e.dose=10]="dose",e[e.pinPump=11]="pinPump",e[e.pinFlowSensor=12]="pinFlowSensor",e[e.pinLevelSensor=13]="pinLevelSensor",e[e.pinMixer=14]="pinMixer",e[e.pinDose=15]="pinDose",e[e.pinDoseMixer=16]="pinDoseMixer",e[e.pinValve=17]="pinValve",e[e.time=18]="time",e[e.temp=19]="temp",e[e.statePump=20]="statePump",e[e.stateValve=21]="stateValve",e[e.stateMixer=22]="stateMixer",e[e.stateDose=23]="stateDose",e[e.stateDoseMixer=24]="stateDoseMixer",e}({}),Rt=function(e){return e[e.idle=0]="idle",e[e.fertigate=1]="fertigate",e[e.pumpIn=2]="pumpIn",e[e.irrigate=3]="irrigate",e[e.wash=4]="wash",e[e.compote=5]="compote",e[e.washCompote=6]="washCompote",e[e.mixer=7]="mixer",e[e.dose=8]="dose",e[e.doseMixer=9]="doseMixer",e[e.error=255]="error",e}({}),Mt=function(e){return e[e.pumpIn=0]="pumpIn",e[e.mixDose=1]="mixDose",e[e.dose=2]="dose",e[e.mix=3]="mix",e[e.irrigate=4]="irrigate",e[e.irrigateFinish=5]="irrigateFinish",e[e.washPumpIn=6]="washPumpIn",e[e.washMix=7]="washMix",e[e.wash=8]="wash",e[e.done=9]="done",e}({}),Lt=function(e){return e[e.pumpIn=1]="pumpIn",e[e.dose=2]="dose",e[e.pumpOut=3]="pumpOut",e[e.pumpOutLast=4]="pumpOutLast",e[e.sensorOut=5]="sensorOut",e[e.io=6]="io",e[e.badCmdState=7]="badCmdState",e[e.lowWaterLevel=8]="lowWaterLevel",e[e.highWaterLevel=9]="highWaterLevel",e}({}),Bt=function(e){return e.INIT="[Log] Init",e.ADD="[Log] Add",e.RESET_FILTER="[Log] Reset filter",e.SET_FILTER="[Log] Set filter",e.TOGGLE_FILTER="[Log] Toggle filter",e.TOGGLE_EXPAND_FILTER="[Log] Toggle expand filter",e}({}),Ft=function(){return function(){this.type=Bt.INIT}}(),Ut=function(){return function(e){this.payload=e,this.type=Bt.ADD}}(),Gt=function(){return function(){this.type=Bt.RESET_FILTER}}(),$t=function(){return function(e){this.payload=e,this.type=Bt.SET_FILTER}}(),Vt=function(){return function(e){this.payload=e,this.type=Bt.TOGGLE_FILTER}}(),Ht=function(){return function(e){this.payload=e,this.type=Bt.TOGGLE_EXPAND_FILTER}}(),Kt=function(e){return e[e.connect=0]="connect",e[e.disconnect=1]="disconnect",e[e.response=2]="response",e[e.request=3]="request",e[e.error=4]="error",e}({}),Wt={items:[],filteredItems:[],filter:en(),hasFilter:!1},Yt=function(e){return e.log.filter},Xt=function(e){return e.log.hasFilter},zt=function(e){return e.log.filteredItems};function qt(e,t){switch(void 0===e&&(e=Wt),t.type){case Bt.ADD:return function(e,t){var n=Object(u.f)([t],e.items),i=Qt(t,e.filter)?Object(u.f)([t],e.filteredItems):e.filteredItems;return n.length>1e4&&n.pop()===i[i.length-1]&&i.pop(),Object(u.a)(Object(u.a)({},e),{items:n,filteredItems:i})}(e,t.payload);case Bt.RESET_FILTER:return function(e){var t=en();return Object(u.a)(Object(u.a)({},e),{filter:t,hasFilter:!1,filteredItems:Jt(e.items,t)})}(e);case Bt.SET_FILTER:return function(e,t){return Object(u.a)(Object(u.a)({},e),{filter:t,hasFilter:tn(t),filteredItems:Jt(e.items,t)})}(e,t.payload);case Bt.TOGGLE_FILTER:return function(e,t){var n=e.filter.slice(0),i=n.findIndex(function(e){return e===t}),o=!t.selected,c=t.level;n[i]=Object(u.a)(Object(u.a)({},t),{selected:o});for(var r=i+1;r<n.length&&!((a=n[r]).level<=c);r++)n[r]=Object(u.a)(Object(u.a)({},a),{selected:o});if(c)for(r=i-1;r>=0&&c;r--){var a;if(!((a=n[r]).level>=c)){var s=n[r+1].selected;if(null!==s)for(var p=r+2;p<n.length&&!(n[p].level<c);p++)if(s!==n[p].selected){s=null;break}a.selected!==s&&(n[r]=Object(u.a)(Object(u.a)({},a),{selected:s})),c--}}return Object(u.a)(Object(u.a)({},e),{filter:n,hasFilter:tn(n),filteredItems:Jt(e.items,n)})}(e,t.payload);case Bt.TOGGLE_EXPAND_FILTER:return function(e,t){var n=e.filter.slice(0),i=n.findIndex(function(e){return e===t}),o=!t.expanded,c=t.level+1;n[i]=Object(u.a)(Object(u.a)({},t),{expanded:o});for(var r=i+1;r<n.length;r++){var a=n[r];if(a.level<c)break;n[r]=Object(u.a)(Object(u.a)({},a),{visible:o,expanded:o})}return Object(u.a)(Object(u.a)({},e),{filter:n,hasFilter:tn(n),filteredItems:Jt(e.items,n)})}(e,t.payload);default:return e}}function Jt(e,t){return e.filter(function(e){return Qt(e,t)})}function Qt(e,t){var n=t.find(function(t){return t.type===e.type&&t.subType===e.subType});return!n||n.selected}function Zt(e,t,n,i){return Object(u.f)([{level:e,title:t,selected:!0,expandable:!0,expanded:!0,visible:!0,type:i}],Object.keys(n).filter(function(e){return isNaN(+e)}).map(function(t){return{level:e+1,title:(o=t,(o.slice(0,1).toUpperCase()+o.slice(1)).split(/(?=[A-Z])/).join(" ")),selected:!0,expandable:!1,expanded:!0,visible:!0,type:i,subType:n[t]};var o}))}function en(){return Object(u.f)([{level:0,title:"Bluetooth",selected:!0,expandable:!0,expanded:!0,visible:!0,type:Kt.connect},{level:1,title:"Connect",selected:!0,expandable:!1,expanded:!0,visible:!0,type:Kt.connect},{level:1,title:"Disconnect",selected:!0,expandable:!1,expanded:!0,visible:!0,type:Kt.disconnect}],Zt(1,"Device Request",Pt,Kt.request),Zt(1,"Device Response",Nt,Kt.response),Zt(0,"Errors",Lt,Kt.error))}function tn(e){return!e.every(function(e){return e.selected})}var nn=function(e){return e.INIT="[AccessControl] Init",e.ADD="[AccessControl] Add",e.UPDATE="[AccessControl] Update",e}({}),on=function(){return function(){this.type=nn.INIT}}(),cn=function(){return function(e){this.payload=e,this.type=nn.ADD}}(),rn=function(){return function(e){this.payload=e,this.type=nn.UPDATE}}(),an={items:[]},sn=function(e){return e.accessControl.items},un=function(e){return e.accessControl.items[0]};function pn(e,t){switch(void 0===e&&(e=an),t.type){case nn.ADD:return function(e,t){var n,i;return!e.items.length||t.key-e.items[0].value.lastKey>6e4?(n={key:t.key,value:{lastKey:t.key}},i=Object(u.f)([n],e.items),Object(u.a)(Object(u.a)({},e),{items:i})):(n=Object(u.a)(Object(u.a)({},e.items[0]),{value:{lastKey:t.key}}),(i=e.items.slice(0))[0]=n,Object(u.a)(Object(u.a)({},e),{items:i}))}(e,t.payload);case nn.UPDATE:return Object(u.a)(Object(u.a)({},e),{items:t.payload});default:return e}}var ln=n("/t3+"),bn=n("ofXK"),dn=n("XhcP"),fn=n("MutI"),mn=n("bTqV"),hn=n("NFeN"),gn=function(){function e(){this.btStatusConnect=new Map([[ut.CONNECTED,"bluetooth-connect"],[ut.CONNECTING,"bluetooth-transfer"],[ut.DISCONNECTED,"bluetooth-off"],[ut.DISCONNECTING,"bluetooth-transfer"],[ut.TRANSFER,"bluetooth-transfer"]])}return e.prototype.transform=function(e,t){return this.btStatusConnect.get(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"btStatusIcon",type:e,pure:!0}),e}();function yn(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",8),i.ac("click",function(){return i.sc(n),i.ec(),i.qc(11).toggle()}),i.Ob(1,"mat-icon",9),i.Sb()}}function On(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",8),i.ac("click",function(){return i.sc(n),i.ec().onBack()}),i.Ob(1,"mat-icon",10),i.Sb()}}function Sn(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",8),i.ac("click",function(){return i.sc(n),i.ec().onAdd()}),i.Ob(1,"mat-icon",11),i.Sb()}}function vn(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",8),i.ac("click",function(){return i.sc(n),i.ec().onSync()}),i.Ob(1,"mat-icon",12),i.Sb()}}function Tn(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",13),i.Tb(1,"mat-icon",14),i.ac("click",function(){return i.sc(n),i.ec().onBt()}),i.fc(2,"btStatusIcon"),i.Sb(),i.Sb()}if(2&e){var o=i.ec();i.Bb(1),i.kc("svgIcon",i.gc(2,1,o.btStatus))}}function Cn(e,t){if(1&e&&i.Ob(0,"mat-icon",17),2&e){var n=i.ec().$implicit;i.kc("svgIcon",n.icon)}}function En(e,t){if(1&e){var n=i.Ub();i.Tb(0,"a",15),i.ac("click",function(){return i.sc(n),i.ec(),i.qc(11).toggle()}),i.Ac(1,Cn,1,1,"mat-icon",16),i.Cc(2),i.Sb()}if(2&e){var o=t.$implicit;i.kc("routerLink",o.route),i.Bb(1),i.kc("ngIf",o.icon),i.Bb(1),i.Ec(" \xa0 ",o.title," ")}}var jn=["*"],An=function(){function e(){this.back=new i.n,this.add=new i.n,this.sync=new i.n,this.bt=new i.n,this.links=[{route:["/"],title:"Dashboard",icon:"view-dashboard"},{route:["/","settings"],title:"Settings",icon:"cog-outline"},{route:["/","monitor"],title:"Monitor",icon:"chart-bar"},{route:["/","calibrate"],title:"Calibrate",icon:"gauge"},{route:["/","manual-control"],title:"Manual control",icon:"cursor-pointer"},{route:["/","access-control"],title:"Access control",icon:"webcam"},{route:["/","log"],title:"Log",icon:"format-list-bulleted"},{route:["/","config"],title:"Config",icon:"cellphone-settings"},{route:["/","test"],title:"Test",icon:"cursor-pointer"},{route:["/","dev"],title:"Development",icon:"dev-to"}]}return Object.defineProperty(e.prototype,"showMenu",{get:function(){return this.options&&this.options.actions&&this.options.actions.includes("menu")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showAdd",{get:function(){return this.options&&this.options.actions&&this.options.actions.includes("add")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showBack",{get:function(){return this.options&&this.options.actions&&this.options.actions.includes("back")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showSync",{get:function(){return this.options&&this.options.actions&&this.options.actions.includes("sync")&&this.syncStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showBt",{get:function(){return this.options&&this.options.actions&&this.options.actions.includes("bt")},enumerable:!1,configurable:!0}),e.prototype.onBack=function(){this.back.next()},e.prototype.onAdd=function(){this.add.next()},e.prototype.onSync=function(){this.sync.next()},e.prototype.onBt=function(){this.bt.next()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-page"]],inputs:{options:"options",title:"title",btStatus:"btStatus",syncStatus:"syncStatus"},outputs:{back:"back",add:"add",sync:"sync",bt:"bt"},ngContentSelectors:jn,decls:16,vars:7,consts:[[1,"d-flex","flex-column","app-content"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"flex-fill","text-center"],["mat-icon-button","",4,"ngIf"],[1,"flex-fill",3,"backdropClick"],["mode","over"],["sidenav",""],["mat-list-item","",3,"routerLink","click",4,"ngFor","ngForOf"],["mat-icon-button","",3,"click"],["svgIcon","menu"],["svgIcon","arrow-left"],["svgIcon","plus-circle-outline"],["svgIcon","sync"],["mat-icon-button",""],[3,"svgIcon","click"],["mat-list-item","",3,"routerLink","click"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(e,t){if(1&e){var n=i.Ub();i.jc(),i.Tb(0,"div",0),i.Tb(1,"mat-toolbar"),i.Ac(2,yn,2,0,"button",1),i.Ac(3,On,2,0,"button",1),i.Tb(4,"span",2),i.Cc(5),i.Sb(),i.Ac(6,Sn,2,0,"button",1),i.Ac(7,vn,2,0,"button",1),i.Ac(8,Tn,3,3,"button",3),i.Sb(),i.Tb(9,"mat-sidenav-container",4),i.ac("backdropClick",function(){return i.sc(n),i.qc(11).close()}),i.Tb(10,"mat-sidenav",5,6),i.Tb(12,"mat-nav-list"),i.Ac(13,En,3,3,"a",7),i.Sb(),i.Sb(),i.Tb(14,"mat-sidenav-content"),i.ic(15),i.Sb(),i.Sb(),i.Sb()}2&e&&(i.Bb(2),i.kc("ngIf",t.showMenu),i.Bb(1),i.kc("ngIf",t.showBack),i.Bb(2),i.Dc(null==t.options?null:t.options.title),i.Bb(1),i.kc("ngIf",t.showAdd),i.Bb(1),i.kc("ngIf",t.showSync),i.Bb(1),i.kc("ngIf",t.showBt),i.Bb(5),i.kc("ngForOf",t.links))},directives:[ln.a,bn.m,dn.b,dn.a,fn.d,bn.l,dn.c,mn.a,hn.a,fn.b,r.d],pipes:[gn],styles:[".app-content[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}"],changeDetection:0}),e}(),wn=function(){function e(e,t,n){this.store=e,this.router=t,this.activatedRoute=n,this.pageOptions$=this.router.events.pipe(Object(rt.a)(function(e){return e instanceof r.b})).pipe(Object(at.a)(function(e){return e.snapshot.data})),this.btStatus$=this.store.pipe(Object(p.h)(yt)),this.sync$=this.store.pipe(Object(p.h)(Ue)),this.store.dispatch(new A),this.store.dispatch(new Ke),this.store.dispatch(new vt),this.store.dispatch(new Ft),this.store.dispatch(new on)}return e.prototype.onBack=function(){var e=this.getRoute().snapshot.pathFromRoot;e.pop();var t=e.map(function(e){return e.url}).reduce(function(e,t){return Object(u.f)(e,t)},[]),n=Object(u.f)(["/"],t.map(function(e){return e.path}));this.router.navigate(n)},e.prototype.onAdd=function(){switch(this.getRoute().routeConfig.path){case"compote":this.store.dispatch(new I);break;case"program":this.store.dispatch(new R)}},e.prototype.onBt=function(){var e=this;this.store.pipe(Object(p.h)(yt)).pipe(Object(st.a)(1)).subscribe(function(t){t===ut.DISCONNECTED?e.store.dispatch(new lt):t===ut.CONNECTED&&e.store.dispatch(new bt)})},e.prototype.onSync=function(){this.store.dispatch(new pe)},e.prototype.getRoute=function(){for(var e=this.activatedRoute.firstChild,t=e;t;)t.firstChild?e=t=t.firstChild:t=null;return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(r.c),i.Nb(r.a))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-root"]],decls:5,vars:9,consts:[[3,"options","btStatus","syncStatus","back","add","bt","sync"]],template:function(e,t){1&e&&(i.Tb(0,"app-page",0),i.ac("back",function(){return t.onBack()})("add",function(){return t.onAdd()})("bt",function(){return t.onBt()})("sync",function(){return t.onSync()}),i.fc(1,"async"),i.fc(2,"async"),i.fc(3,"async"),i.Ob(4,"router-outlet"),i.Sb()),2&e&&i.kc("options",i.gc(1,3,t.pageOptions$))("btStatus",i.gc(2,5,t.btStatus$))("syncStatus",i.gc(3,7,t.sync$))},directives:[An,r.f],pipes:[bn.b],styles:[""]}),e}(),In=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,r.e,mn.b,hn.b,ln.b,dn.d,fn.c]]}),e}(),Dn=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c]]}),e}(),_n=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,hn.b,mn.b]]}),e}(),xn=n("XNiG"),kn=n("JYkB"),Pn=["chart"],Nn=function(){function e(){}return e.prototype.ngAfterViewInit=function(){this.chart=new kn.SmoothieChart({millisPerPixel:5e3,responsive:!0,grid:{verticalSections:3,millisPerLine:6e4,sharpLines:!0}}),this.series=new kn.TimeSeries,this.chart.addTimeSeries(this.series,{strokeStyle:"rgba(0, 255, 0, 1)",fillStyle:"rgba(0, 255, 0, 0.2)",lineWidth:1}),this.chart.streamTo(this.chartCanvas.nativeElement,5e3)},e.prototype.add=function(e){this.series.append((new Date).getTime(),e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-time-chart"]],viewQuery:function(e,t){var n;1&e&&i.wc(Pn,!0),2&e&&i.pc(n=i.bc())&&(t.chartCanvas=n.first)},decls:2,vars:0,consts:[["chart",""]],template:function(e,t){1&e&&i.Ob(0,"canvas",null,0)},styles:["canvas[_ngcontent-%COMP%]{width:100%;height:70px}"]}),e}(),Rn=n("9jGm"),Mn=n("1G5W"),Ln=n("Wp6s");function Bn(e,t){1&e&&i.Pb(0)}function Fn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Bn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(12);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function Un(e,t){1&e&&i.Pb(0)}function Gn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Un,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(18);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function $n(e,t){1&e&&i.Pb(0)}function Vn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,$n,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(20);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function Hn(e,t){1&e&&i.Pb(0)}function Kn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Hn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(16);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function Wn(e,t){1&e&&i.Pb(0)}function Yn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Wn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(14);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function Xn(e,t){1&e&&i.Pb(0)}function zn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Xn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(14);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function qn(e,t){1&e&&i.Pb(0)}function Jn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,qn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(12);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function Qn(e,t){1&e&&i.Pb(0)}function Zn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Qn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(16);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function ei(e,t){1&e&&i.Pb(0)}function ti(e,t){if(1&e&&(i.Rb(0),i.Ac(1,ei,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(14);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function ni(e,t){1&e&&(i.Rb(0),i.Cc(1," Unknown state "),i.Qb())}function ii(e,t){if(1&e&&(i.Rb(0),i.Rb(1,0),i.Ac(2,Fn,2,1,"ng-container",1),i.Ac(3,Gn,2,1,"ng-container",1),i.Ac(4,Vn,2,1,"ng-container",1),i.Ac(5,Kn,2,1,"ng-container",1),i.Ac(6,Yn,2,1,"ng-container",1),i.Ac(7,zn,2,1,"ng-container",1),i.Ac(8,Jn,2,1,"ng-container",1),i.Ac(9,Zn,2,1,"ng-container",1),i.Ac(10,ti,2,1,"ng-container",1),i.Ac(11,ni,2,0,"ng-container",2),i.Qb(),i.Qb()),2&e){var n=i.ec();i.Bb(1),i.kc("ngSwitch",n.status.cmdState),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.pumpIn),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.mixDose),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.dose),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.mix),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.irrigate),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.irrigateFinish),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.washPumpIn),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.washMix),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.wash)}}function oi(e,t){1&e&&i.Pb(0)}function ci(e,t){if(1&e&&(i.Rb(0),i.Ac(1,oi,1,0,"ng-container",8),i.Qb()),2&e){i.ec();var n=i.qc(14);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function ri(e,t){1&e&&i.Pb(0)}function ai(e,t){if(1&e&&(i.Rb(0),i.Ac(1,ri,1,0,"ng-container",8),i.Qb()),2&e){i.ec();var n=i.qc(14);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function si(e,t){1&e&&i.Pb(0)}function ui(e,t){if(1&e&&(i.Rb(0),i.Ac(1,si,1,0,"ng-container",8),i.Qb()),2&e){i.ec();var n=i.qc(12);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function pi(e,t){1&e&&i.Pb(0)}function li(e,t){if(1&e&&(i.Rb(0),i.Ac(1,pi,1,0,"ng-container",8),i.Qb()),2&e){i.ec();var n=i.qc(16);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function bi(e,t){1&e&&i.Pb(0)}function di(e,t){if(1&e&&(i.Rb(0),i.Ac(1,bi,1,0,"ng-container",8),i.Qb()),2&e){i.ec();var n=i.qc(20);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function fi(e,t){1&e&&i.Pb(0)}function mi(e,t){if(1&e&&(i.Rb(0),i.Ac(1,fi,1,0,"ng-container",8),i.Qb()),2&e){i.ec();var n=i.qc(16);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function hi(e,t){1&e&&(i.Rb(0),i.Cc(1," Idle "),i.Qb())}function gi(e,t){if(1&e){var n=i.Ub();i.Rb(0),i.Cc(1," Error state "),i.Tb(2,"button",9),i.ac("click",function(){return i.sc(n),i.ec().onReset()}),i.Cc(3,"Reset error"),i.Sb(),i.Qb()}}function yi(e,t){1&e&&(i.Rb(0),i.Cc(1," Unknown state "),i.Qb())}function Oi(e,t){if(1&e&&(i.Tb(0,"div",10),i.Tb(1,"div",11),i.Ob(2,"mat-icon",12),i.Cc(3," Pump in "),i.Sb(),i.Sb(),i.Tb(4,"div",10),i.Tb(5,"div",13),i.Cc(6," Flow "),i.Sb(),i.Tb(7,"div",14),i.Cc(8),i.fc(9,"number"),i.Sb(),i.Sb(),i.Tb(10,"div",10),i.Tb(11,"div",13),i.Cc(12," Total volume "),i.Sb(),i.Tb(13,"div",14),i.Cc(14),i.fc(15,"number"),i.Sb(),i.Sb()),2&e){var n=i.ec();i.Bb(8),i.Ec(" ",i.hc(9,2,n.status.flow,"1.0-0")," mL/minute "),i.Bb(6),i.Ec(" ",i.hc(15,5,n.status.totalVolume,"1.0-0")," mL ")}}function Si(e,t){if(1&e&&(i.Tb(0,"div",10),i.Tb(1,"div",11),i.Ob(2,"mat-icon",15),i.Cc(3," Pump out "),i.Sb(),i.Sb(),i.Tb(4,"div",10),i.Tb(5,"div",13),i.Cc(6," Flow "),i.Sb(),i.Tb(7,"div",14),i.Cc(8),i.Sb(),i.Sb(),i.Tb(9,"div",10),i.Tb(10,"div",13),i.Cc(11," Flow "),i.Sb(),i.Tb(12,"div",14),i.Cc(13),i.fc(14,"number"),i.Sb(),i.Sb(),i.Tb(15,"div",10),i.Tb(16,"div",13),i.Cc(17," Total volume "),i.Sb(),i.Tb(18,"div",14),i.Cc(19),i.fc(20,"number"),i.Sb(),i.Sb()),2&e){var n=i.ec();i.Bb(8),i.Ec(" ",n.status.valveId+1," "),i.Bb(5),i.Ec(" ",i.hc(14,3,n.status.flow,"1.0-0")," mL/minute "),i.Bb(6),i.Ec(" ",i.hc(20,6,n.status.totalVolume,"1.0-0")," mL ")}}function vi(e,t){if(1&e&&(i.Tb(0,"div",10),i.Tb(1,"div",11),i.Ob(2,"mat-icon",12),i.Cc(3," Mix "),i.Sb(),i.Sb(),i.Tb(4,"div",10),i.Tb(5,"div",13),i.Cc(6," ETA "),i.Sb(),i.Tb(7,"div",14),i.Cc(8),i.Sb(),i.Sb()),2&e){var n=i.ec();i.Bb(8),i.Ec(" ",n.status.mix," seconds ")}}function Ti(e,t){if(1&e&&(i.Tb(0,"div",10),i.Tb(1,"div",11),i.Ob(2,"mat-icon",12),i.Cc(3," Mix dose "),i.Sb(),i.Sb(),i.Tb(4,"div",10),i.Tb(5,"div",13),i.Cc(6," ETA "),i.Sb(),i.Tb(7,"div",14),i.Cc(8),i.Sb(),i.Sb()),2&e){var n=i.ec();i.Bb(8),i.Ec(" ",n.status.mix," seconds ")}}function Ci(e,t){if(1&e&&(i.Tb(0,"div",10),i.Tb(1,"div",11),i.Ob(2,"mat-icon",12),i.Cc(3," Dose "),i.Sb(),i.Sb(),i.Tb(4,"div",10),i.Tb(5,"div",13),i.Cc(6," Doze # "),i.Sb(),i.Tb(7,"div",14),i.Cc(8),i.Sb(),i.Sb()),2&e){var n=i.ec();i.Bb(8),i.Ec(" ",n.status.doseId," ")}}var Ei=function(){function e(e){this.store=e,this.DeviceState=Rt,this.FertigateState=Mt}return e.prototype.onReset=function(){this.store.dispatch(new ft({type:Pt.resetError,payload:{fake:0}}))},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-status"]],inputs:{status:"status"},decls:21,vars:10,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["pumpInTemplate",""],["pumpOutTemplate",""],["mixTemplate",""],["mixDoseTemplate",""],["doseTemplate",""],[4,"ngTemplateOutlet"],["type","button","mat-button","",3,"click"],[1,"row"],[1,"col-12"],["svgIcon","water-pump"],[1,"col-6","text-right"],[1,"col-6","text-left"],["svgIcon","fountain"]],template:function(e,t){1&e&&(i.Rb(0,0),i.Ac(1,ii,12,10,"ng-container",1),i.Ac(2,ci,2,1,"ng-container",1),i.Ac(3,ai,2,1,"ng-container",1),i.Ac(4,ui,2,1,"ng-container",1),i.Ac(5,li,2,1,"ng-container",1),i.Ac(6,di,2,1,"ng-container",1),i.Ac(7,mi,2,1,"ng-container",1),i.Ac(8,hi,2,0,"ng-container",1),i.Ac(9,gi,4,0,"ng-container",1),i.Ac(10,yi,2,0,"ng-container",2),i.Qb(),i.Ac(11,Oi,16,8,"ng-template",null,3,i.Bc),i.Ac(13,Si,21,9,"ng-template",null,4,i.Bc),i.Ac(15,vi,9,1,"ng-template",null,5,i.Bc),i.Ac(17,Ti,9,1,"ng-template",null,6,i.Bc),i.Ac(19,Ci,9,1,"ng-template",null,7,i.Bc)),2&e&&(i.kc("ngSwitch",t.status.state),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.fertigate),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.irrigate),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.wash),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.pumpIn),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.mixer),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.dose),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.doseMixer),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.idle),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.error))},directives:[bn.n,bn.o,bn.p,bn.q,mn.a,hn.a],pipes:[bn.f],styles:[""],changeDetection:0}),e}(),ji=function(){function e(){}return e.prototype.transform=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return 1970+e.year+"-"+("0"+e.month).slice(-2)+"-"+("0"+e.day).slice(-2)+" "+("0"+e.hour).slice(-2)+":"+("0"+e.minute).slice(-2)+":"+("0"+e.second).slice(-2)},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"dateTime",type:e,pure:!0}),e}(),Ai=["chart"],wi=[{path:"dashboard",component:function(){function e(e,t){var n=this;this.store=e,this.actions=t,this.destroy$=new xn.a,this.time$=this.store.pipe(Object(p.h)(wt)),this.temp$=this.store.pipe(Object(p.h)(It)),this.minTemp$=this.store.pipe(Object(p.h)(Dt)),this.maxTemp$=this.store.pipe(Object(p.h)(_t)),this.status$=this.store.pipe(Object(p.h)(xt)),this.actions.pipe(Object(Rn.d)(St.UPDATE_TEMP)).pipe(Object(Mn.a)(this.destroy$)).subscribe(function(e){n.chart&&n.chart.add(e.payload)})}return e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.onSyncTime=function(){this.store.dispatch(new jt)},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(Rn.a))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-dashboard"]],viewQuery:function(e,t){var n;1&e&&i.wc(Ai,!0),2&e&&i.pc(n=i.bc())&&(t.chart=n.first)},decls:26,vars:26,consts:[[1,"d-flex","flex-wrap"],[1,"w-100","m-1"],[1,"w-100","h-100","d-flex","align-items-center"],["svgIcon","clock-outline"],["mat-icon-button","",3,"click"],["svgIcon","sync"],[1,"w-100"],["svgIcon","thermometer"],["chart",""],[1,"w-100",3,"status"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"mat-card",1),i.Tb(2,"mat-card-content",2),i.Ob(3,"mat-icon",3),i.Cc(4),i.fc(5,"dateTime"),i.fc(6,"async"),i.Tb(7,"button",4),i.ac("click",function(){return t.onSyncTime()}),i.Ob(8,"mat-icon",5),i.Sb(),i.Sb(),i.Sb(),i.Tb(9,"mat-card",1),i.Tb(10,"mat-card-content",6),i.Tb(11,"div"),i.Ob(12,"mat-icon",7),i.Cc(13),i.fc(14,"number"),i.fc(15,"async"),i.fc(16,"number"),i.fc(17,"async"),i.fc(18,"number"),i.fc(19,"async"),i.Sb(),i.Ob(20,"app-time-chart",null,8),i.Sb(),i.Sb(),i.Tb(22,"mat-card",1),i.Tb(23,"mat-card-content",2),i.Ob(24,"app-status",9),i.fc(25,"async"),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(4),i.Ec(" \xa0 Time ",i.gc(5,5,i.gc(6,7,t.time$))," \xa0 "),i.Bb(9),i.Gc(" Temperature\xa0",i.hc(14,9,i.gc(15,12,t.temp$),"1.2-2"),"\u2103 Min\xa0",i.hc(16,14,i.gc(17,17,t.minTemp$),"1.2-2"),"\u2103 Max\xa0",i.hc(18,19,i.gc(19,22,t.maxTemp$),"1.2-2"),"\u2103 "),i.Bb(11),i.kc("status",i.gc(25,24,t.status$)))},directives:[Ln.a,Ln.b,hn.a,mn.a,Nn,Ei],pipes:[ji,bn.b,bn.f],styles:["app-time-chart[_ngcontent-%COMP%]{max-width:330px;display:block}"],changeDetection:0}),e}(),data:{title:"Dashboard",actions:["menu","bt","sync"]}}],Ii=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(wi)],r.e]}),e}(),Di=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c]]}),e}(),_i=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Ii,hn.b,mn.b,Ln.c,In,Dn,_n,Di]]}),e}(),xi=n("kmnG"),ki=n("qFsG"),Pi=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,xi.d,ki.c]]}),e}(),Ni=n("7EHt"),Ri=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,xi.d,ki.c,mn.b,Ni.b,Pi]]}),e}(),Mi=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Ni.b,mn.b,hn.b,Ri]]}),e}(),Li=n("d3UM"),Bi=n("FKr1"),Fi=n("iadO"),Ui=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,xi.d,Li.b,Bi.l,ki.c,Fi.c,Bi.j]]}),e}(),Gi=n("GyhO"),$i=n("LRne"),Vi=n("EY2u"),Hi=n("Cfvw"),Ki=n("NNCq"),Wi=n("HDdC"),Yi=n("eIep"),Xi=n("Kj3r"),zi=n("vkgz"),qi=n("5+tZ"),Ji=n("zp1y"),Qi=n("0EUg"),Zi="settings",eo="config",to="version",no=function(){function e(){localStorage.getItem(to)!==e.version&&(localStorage.clear(),localStorage.setItem(to,e.version))}return e.prototype.loadSettings=function(){console.log("load settings");var e=localStorage.getItem(Zi);if(e)return JSON.parse(e)},e.prototype.saveSettings=function(e){console.log("save settings"),localStorage.setItem(Zi,JSON.stringify(e))},e.prototype.loadConfig=function(){console.log("load config");var e=localStorage.getItem(eo);if(e)return JSON.parse(e)},e.prototype.saveConfig=function(e){console.log("save config"),localStorage.setItem(eo,JSON.stringify(e))},e.version="12",e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}(),io=new i.r("DEVICE_CONNECT"),oo=function(e){return e[e.beginMessage=128]="beginMessage",e[e.endMessage=192]="endMessage",e[e.payloadMask=127]="payloadMask",e[e.cmdMask=64]="cmdMask",e[e.cmdPayloadMask=63]="cmdPayloadMask",e[e.mask=128]="mask",e}({});function co(e){for(var t=Math.floor(7*e.byteLength/8),n=new Uint8Array(t),i=0,o=0,c=0,r=0;r<e.byteLength;r++)i+=e[r]<<o,(o+=7)<8||(n[c]=255&i,c+=1,o-=8,i>>=8);return n}function ro(e){for(var t=8*e.length,n=0,i=252,o=0;t--;)n--||(n=7,i^=e[o++]),i=255&(i<<1^(128&i?156:0));return i>>2&63}function ao(e,t){if(!e)return 0;var n="string"==typeof e?t[e]:e;return Object.keys(n).reduce(function(e,i){var o=n[i],c="string"==typeof o?{type:"object",itemMeta:t[o]}:o;switch(c.type){case"list":return e+c.length*ao(c.itemMeta,t);case"object":return e+ao(c.itemMeta,t);case"uint8":return e+1;case"uint16":return e+2;case"uint32":return e+4;case"uint8[]":return e+1*c.length;case"uint16[]":return e+2*c.length;case"uint32[]":return e+4*c.length;case"string":return e+1*c.length}},0)}var so=function(){function e(e,t,n){this.meta=e,this.struct=t,this.mapper=n}return e.prototype.serialize=function(e){var t=this,n=e.type,i=e.payload,o=this.meta[this.mapper[n]],c=ao(o,this.struct),r=new ArrayBuffer(c),a=new DataView(r),s=0,u=function(e,n){"string"==typeof n&&(n=t.struct[n]),Object.keys(n).forEach(function(i){var o=n[i],c=e[i];switch("string"==typeof o&&(o={type:"object",itemMeta:t.struct[o]}),o.type){case"list":return void c.forEach(function(e){return u(e,o.itemMeta)});case"object":return void u(c,o.itemMeta);case"uint8":return a.setUint8(s,c),void(s+=1);case"uint16":return a.setUint16(s,c,!0),void(s+=2);case"uint32":return a.setUint32(s,c,!0),void(s+=4);case"uint8[]":return void c.forEach(function(e){a.setUint8(s,e),s+=1});case"uint16[]":return void c.forEach(function(e){a.setUint16(s,e,!0),s+=2});case"uint32[]":return void c.forEach(function(e){a.setUint32(s,e,!0),s+=4});case"string":return}})};u(i,o);var p=function(e){for(var t=Math.ceil(8*e.byteLength/7),n=new Uint8Array(t),i=0;i<t;i++){var o=Math.floor(7*i/8),c=e[o]+((e[o+1]||0)<<8);n[i]=c=c>>(8-i%8)%8&oo.payloadMask}return n}(new Uint8Array(r)),l=new ArrayBuffer(p.byteLength+2),b=new DataView(l);b.setUint8(0,n|oo.beginMessage),new Uint8Array(l).set(p,1);var d=ro(new Uint8Array(r));return b.setUint8(l.byteLength-1,d|oo.endMessage),l},e}(),uo=function(){function e(e,t,n,i){this.meta=e,this.struct=t,this.mapper=n,this.store=i,this.mapRaw=this.mapRaw.bind(this)}return e.prototype.deserialize=function(e,t){var n=this,i=0,o=new DataView(t),c=function(e){var t="string"==typeof e?n.struct[e]:e,r={};return Object.keys(t).forEach(function(e){var a,s=t[e],u="string"==typeof s?{type:"object",itemMeta:n.struct[s]}:s;switch(u.type){case"list":a=new Array(u.length);for(var p=0;p<u.length;p++)a[p]=c(u.itemMeta);break;case"object":a=c(u.itemMeta);break;case"uint8":a=o.getUint8(i),i+=1;break;case"uint16":a=o.getUint16(i,!0),i+=2;break;case"uint32":a=o.getUint32(i,!0),i+=4;break;case"uint8[]":for(a=new Array(u.length),p=0;p<u.length;p++)a[p]=o.getUint8(i),i+=1;break;case"uint16[]":for(a=new Array(u.length),p=0;p<u.length;p++)a[p]=o.getUint16(i,!0),i+=2;break;case"uint32[]":for(a=new Array(u.length),p=0;p<u.length;p++)a[p]=o.getUint32(i,!0),i+=4;break;case"string":throw new Error("not implemented")}r[e]=a}),r};return{type:e,payload:c(this.meta[this.mapper[e]])}},e.prototype.mapRaw=function(e){var t,n=this;return e.pipe((void 0===t&&(t=256),function(e){return new Wi.a(function(i){var o=null,c=new Uint8Array(t),r=0;return e.subscribe({next:function(e){for(var t=new Uint8Array(e),a=t.length,s=0;s<a;s++){var u=t[s];if(u&oo.mask){var p=u&oo.cmdPayloadMask;if(u&oo.cmdMask){if(null===o){n.store.dispatch(new Ut({time:new Date,icon:"alert-circle-outline",text:"received end marked, but type is not defined",type:Kt.error}));continue}var l=co(c.slice(0,r)),b=ao(n.meta[n.mapper[o]],n.struct);if(l.byteLength!==b){n.store.dispatch(new Ut({time:new Date,icon:"alert-circle-outline",text:"received bad length "+l.byteLength+" expected "+b,type:Kt.error})),o=null,r=0;continue}var d=ro(l);if(d!==p){n.store.dispatch(new Ut({time:new Date,icon:"alert-circle-outline",text:"received bad crc "+p+" expected "+d,type:Kt.error})),o=null,r=0;continue}i.next({type:o,raw:l.buffer}),o=null,r=0;continue}null!==o&&n.store.dispatch(new Ut({time:new Date,icon:"alert-circle-outline",text:"received begin marked, but previous message is not complete",type:Kt.error})),o=p,r=0}else null!==o?(c[r]=u,r+=1):n.store.dispatch(new Ut({time:new Date,icon:"alert-circle-outline",text:"received body, but type is not defined",type:Kt.error}))}},error:function(e){i.error(e)},complete:function(){i.complete()}})})})).pipe(Object(at.a)(function(e){return n.deserialize(e.type,e.raw)}))},e}(),po={empty:{fake:{type:"uint8"}},dayTime:{hour:{type:"uint8"},minute:{type:"uint8"},second:{type:"uint8"}},dateDay:{wday:{type:"uint8"},day:{type:"uint8"},month:{type:"uint8"},year:{type:"uint8"}},program:{valves:{type:"uint8[]",length:Math.ceil(3)},compote:{type:"uint8"},start:"dateDay"},compoteDaily:{days:{type:"uint8"},schedule:{type:"uint8"},volume:{type:"uint16"},washVolume:{type:"uint16"},dose:{type:"uint16[]",length:4}},compote:{daily:{type:"list",length:l,itemMeta:"compoteDaily"}},schedule:{enable:{type:"uint8"},deviceId:{type:"uint8"},startTime:"dayTime",endTime:"dayTime"},timer:{enable:{type:"uint8"},program:{type:"uint8"},weekDays:{type:"uint8"},time:"dayTime"},pump:{minFlow:{type:"uint16"},startingTime:{type:"uint16"},pwmFlow:{type:"uint16"},pwm:{type:"uint8"},rate:{type:"uint16"}},levelSensor:{beepSeconds:{type:"uint8"}},mixer:{seconds:{type:"uint16"},washSeconds:{type:"uint16"},pwmSensor:{type:"uint16"},pwm:{type:"uint8"}},dose:{rate:{type:"uint32"},seconds:{type:"uint16"},pwmSensor:{type:"uint16"},pwm:{type:"uint8"}},dateTime:{second:{type:"uint8"},minute:{type:"uint8"},hour:{type:"uint8"},wday:{type:"uint8"},day:{type:"uint8"},month:{type:"uint8"},year:{type:"uint8"}},deviceStatus:{state:{type:"uint8"},cmdState:{type:"uint8"},valve:{type:"uint8"},flow:{type:"uint16"},volume:{type:"uint16"},totalVolume:{type:"uint16"},mix:{type:"uint16"},doseId:{type:"uint8"},valveId:{type:"uint8"}},settings:{program:{type:"list",length:4,itemMeta:"program"},compote:{type:"list",length:2,itemMeta:"compote"},schedule:{type:"list",length:4,itemMeta:"schedule"},timer:{type:"list",length:8,itemMeta:"timer"},pump:{type:"list",length:2,itemMeta:"pump"},levelSensor:{type:"list",length:2,itemMeta:"levelSensor"},mixer:{type:"list",length:1,itemMeta:"mixer"},dose:{type:"list",length:4,itemMeta:"dose"}},pinAssignment:{pump:{type:"uint8[]",length:2},flowSensor:{type:"uint8[]",length:2},levelSensor:{type:"uint8[]",length:2},mixer:{type:"uint8[]",length:1},dose:{type:"uint8[]",length:4},doseMixer:{type:"uint8[]",length:4},valve:{type:"uint8[]",length:b}}},lo={fertigate:{programId:{type:"uint8"}},irrigate:{programId:{type:"uint8"}},wash:{programId:{type:"uint8"}},pumpIn:{programId:{type:"uint8"}},compote:{programId:{type:"uint8"}},washCompote:{programId:{type:"uint8"}},mix:{mixerId:{type:"uint8"}},mixDose:{mixerId:{type:"uint8"}},dose:{programId:{type:"uint8"},doseId:{type:"uint8"}},getProgram:{index:{type:"uint8"}},setProgram:{index:{type:"uint8"},value:"program"},getCompoteDaily:{index:{type:"uint8"},dailyIndex:{type:"uint8"}},setCompoteDaily:{index:{type:"uint8"},dailyIndex:{type:"uint8"},value:"compoteDaily"},getSchedule:{index:{type:"uint8"}},setSchedule:{index:{type:"uint8"},value:"schedule"},getTimer:{index:{type:"uint8"}},setTimer:{index:{type:"uint8"},value:"timer"},getPump:{index:{type:"uint8"}},setPump:{index:{type:"uint8"},value:"pump"},getMixer:{index:{type:"uint8"}},setMixer:{index:{type:"uint8"},value:"mixer"},getDose:{index:{type:"uint8"}},setDose:{index:{type:"uint8"},value:"dose"},getPinPump:{index:{type:"uint8"}},setPinPump:{index:{type:"uint8"},value:{type:"uint8"}},getPinFlowSensor:{index:{type:"uint8"}},setPinFlowSensor:{index:{type:"uint8"},value:{type:"uint8"}},getPinLevelSensor:{index:{type:"uint8"}},setPinLevelSensor:{index:{type:"uint8"},value:{type:"uint8"}},getPinMixer:{index:{type:"uint8"}},setPinMixer:{index:{type:"uint8"},value:{type:"uint8"}},getPinDose:{index:{type:"uint8"}},setPinDose:{index:{type:"uint8"},value:{type:"uint8"}},getPinDoseMixer:{index:{type:"uint8"}},setPinDoseMixer:{index:{type:"uint8"},value:{type:"uint8"}},getPinValve:{index:{type:"uint8"}},setPinValve:{index:{type:"uint8"},value:{type:"uint8"}},getTime:"empty",setTime:"dateTime",getTemp:"empty",getStatus:"empty",getStatePump:{index:{type:"uint8"}},setStatePump:{index:{type:"uint8"},value:{type:"uint8"}},getStateValve:{index:{type:"uint8"}},setStateValve:{index:{type:"uint8"},value:{type:"uint8"}},getStateMixer:{index:{type:"uint8"}},setStateMixer:{index:{type:"uint8"},value:{type:"uint8"}},getStateDose:{index:{type:"uint8"}},setStateDose:{index:{type:"uint8"},value:{type:"uint8"}},getStateDoseMixer:{index:{type:"uint8"}},setStateDoseMixer:{index:{type:"uint8"},value:{type:"uint8"}},resetError:{fake:{type:"uint8"}}},bo={commandSuccess:{code:{type:"uint8"}},log:{code:{type:"uint8"}},status:"deviceStatus",error:{code:{type:"uint8"}},program:{index:{type:"uint8"},value:"program"},compoteDaily:{index:{type:"uint8"},dailyIndex:{type:"uint8"},value:"compoteDaily"},schedule:{index:{type:"uint8"},value:"schedule"},timer:{index:{type:"uint8"},value:"timer"},pump:{index:{type:"uint8"},value:"pump"},mixer:{index:{type:"uint8"},value:"mixer"},dose:{index:{type:"uint8"},value:"dose"},pinPump:{index:{type:"uint8"},value:{type:"uint8"}},pinFlowSensor:{index:{type:"uint8"},value:{type:"uint8"}},pinLevelSensor:{index:{type:"uint8"},value:{type:"uint8"}},pinMixer:{index:{type:"uint8"},value:{type:"uint8"}},pinDose:{index:{type:"uint8"},value:{type:"uint8"}},pinDoseMixer:{index:{type:"uint8"},value:{type:"uint8"}},pinValve:{index:{type:"uint8"},value:{type:"uint8"}},time:"dateTime",temp:{value:{type:"uint16"}},statePump:{value:{type:"uint8"}},stateValve:{value:{type:"uint8"}},stateMixer:{value:{type:"uint8"}},stateDose:{value:{type:"uint8"}},stateDoseMixer:{value:{type:"uint8"}}},fo=function(){function e(e,t){this.deviceConnect=e,this.store=t,this.requestSerializer=new so(lo,po,Pt),this.responseDeserializer=new uo(bo,po,Nt,t),this.response$=this.deviceConnect.response$.pipe(this.responseDeserializer.mapRaw).pipe(Object(at.a)(function(e){return e.type===Nt.temp?{type:Nt.temp,payload:{value:.1*Math.round(2.5*e.payload.value)}}:e}))}return e.prototype.discover=function(e){return this.deviceConnect.discover(e)},e.prototype.connect=function(e){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(t){switch(t.label){case 0:return[4,this.deviceConnect.connect(e)];case 1:return t.sent(),[2]}})})},e.prototype.disconnect=function(){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(e){switch(e.label){case 0:return[4,this.deviceConnect.disconnect()];case 1:return e.sent(),[2]}})})},e.prototype.send=function(e){return Object(u.b)(this,void 0,void 0,function(){var t;return Object(u.d)(this,function(n){switch(n.label){case 0:return t=this.requestSerializer.serialize(e),[4,this.deviceConnect.send(t)];case 1:return n.sent(),[2]}})})},e.\u0275fac=function(t){return new(t||e)(i.Xb(io),i.Xb(p.b))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),mo=function(){function e(e,t,n,i){this.actions$=e,this.store=t,this.storage=n,this.connectBt=i}return e.prototype.init=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(j.INIT)).pipe(Object(Yi.a)(function(){return Object(Gi.a)(Object($i.a)(new w(e.storage.loadSettings())),e.store.pipe(Object(p.h)(de)).pipe(Object(Xi.a)(300)).pipe(Object(zi.a)(function(t){return e.storage.saveSettings(t)})).pipe(Object(qi.a)(function(){return Vi.a})))}))},e.prototype.sync=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(j.SYNC)).pipe(Object(Ji.a)(this.store.pipe(Object(p.h)(de)))).pipe(Object(rt.a)(function(e){return!e[1].sync})).pipe(Object(Yi.a)(function(t){var n=t[1];return Gi.a.apply(void 0,Object(u.f)([e.syncItems(me,Pt.getProgram,Pt.setProgram,Nt.program,4)],n.settings.compote.map(function(t,n){return e.syncItems(function(e){return function(t){return function(n){return n.settings.settings.compote[e].daily[t]}}}(n),Pt.getCompoteDaily,Pt.setCompoteDaily,Nt.compoteDaily,l,{id:n})}),[e.syncItems(ye,Pt.getTimer,Pt.setTimer,Nt.timer,8),e.syncItems(Se,Pt.getSchedule,Pt.setSchedule,Nt.schedule,4),e.syncItems(Te,Pt.getPump,Pt.setPump,Nt.pump,2),e.syncItems(Ee,Pt.getMixer,Pt.setMixer,Nt.mixer,1),e.syncItems(Ae,Pt.getDose,Pt.setDose,Nt.dose,4),e.syncItems(we,Pt.getPinPump,Pt.setPinPump,Nt.pinPump,2),e.syncItems(De,Pt.getPinFlowSensor,Pt.setPinFlowSensor,Nt.pinFlowSensor,2),e.syncItems(xe,Pt.getPinMixer,Pt.setPinMixer,Nt.pinMixer,1),e.syncItems(Pe,Pt.getPinDose,Pt.setPinDose,Nt.pinDose,4),e.syncItems(Re,Pt.getPinDoseMixer,Pt.setPinDoseMixer,Nt.pinDoseMixer,4),Object($i.a)(new le)]))}))},e.prototype.onChangePump=function(){return this.actions$.pipe(Object(Rn.d)(j.CHANGE_PUMP)).pipe(Object(Xi.a)(1e3)).pipe(Object(Yi.a)(function(e){var t=e.payload;return Object($i.a)(new ft({type:Pt.setPump,payload:t}))}))},e.prototype.loadPump=function(){return this.actions$.pipe(Object(Rn.d)(j.LOAD_PUMP)).pipe(Object(Yi.a)(function(){return Object(Hi.a)(Object(u.f)(new Array(2).fill(0).map(function(e,t){return new ft({type:Pt.getPump,payload:{index:t}})})))}))},e.prototype.onChangeMixer=function(){return this.actions$.pipe(Object(Rn.d)(j.CHANGE_MIXER)).pipe(Object(Xi.a)(1e3)).pipe(Object(Yi.a)(function(e){var t=e.payload;return Object($i.a)(new ft({type:Pt.setMixer,payload:t}))}))},e.prototype.loadMixer=function(){return this.actions$.pipe(Object(Rn.d)(j.LOAD_MIXER)).pipe(Object(Yi.a)(function(){return Object(Hi.a)(Object(u.f)(new Array(1).fill(0).map(function(e,t){return new ft({type:Pt.getMixer,payload:{index:t}})})))}))},e.prototype.onChangeDose=function(){return this.actions$.pipe(Object(Rn.d)(j.CHANGE_DOSE)).pipe(Object(Xi.a)(1e3)).pipe(Object(Yi.a)(function(e){var t=e.payload;return Object($i.a)(new ft({type:Pt.setDose,payload:t}))}))},e.prototype.loadDose=function(){return this.actions$.pipe(Object(Rn.d)(j.LOAD_DOSE)).pipe(Object(Yi.a)(function(){return Object(Hi.a)(Object(u.f)(new Array(4).fill(0).map(function(e,t){return new ft({type:Pt.getDose,payload:{index:t}})})))}))},e.prototype.onChangeProgram=function(){return this.actions$.pipe(Object(Rn.d)(j.CHANGE_PROGRAM)).pipe(Object(Xi.a)(1e3)).pipe(Object(Yi.a)(function(e){var t=e.payload;return Object($i.a)(new ft({type:Pt.setProgram,payload:t}))}))},e.prototype.loadProgram=function(){return this.actions$.pipe(Object(Rn.d)(j.LOAD_PROGRAM)).pipe(Object(Yi.a)(function(){return Object(Hi.a)(Object(u.f)(new Array(4).fill(0).map(function(e,t){return new ft({type:Pt.getProgram,payload:{index:t}})})))}))},e.prototype.onChangeCompote=function(){return this.actions$.pipe(Object(Rn.d)(j.CHANGE_COMPOTE_DAILY)).pipe(Object(Xi.a)(1e3)).pipe(Object(Yi.a)(function(e){var t=e.payload;return Object($i.a)(new ft({type:Pt.setCompoteDaily,payload:t}))}))},e.prototype.loadCompote=function(){return this.actions$.pipe(Object(Rn.d)(j.LOAD_COMPOTE)).pipe(Object(Yi.a)(function(){return Object(Hi.a)(Object(u.f)([].concat.apply([],new Array(2).fill(0).map(function(e,t){return new Array(l).fill(0).map(function(e,n){return new ft({type:Pt.getCompoteDaily,payload:{index:t,dailyIndex:n}})})}))))}))},e.prototype.onChangeTimer=function(){return this.actions$.pipe(Object(Rn.d)(j.CHANGE_TIMER)).pipe(Object(Xi.a)(1e3)).pipe(Object(Yi.a)(function(e){var t=e.payload;return Object($i.a)(new ft({type:Pt.setTimer,payload:t}))}))},e.prototype.loadTimer=function(){return this.actions$.pipe(Object(Rn.d)(j.LOAD_TIMER)).pipe(Object(Yi.a)(function(){return Object(Hi.a)(Object(u.f)(new Array(8).fill(0).map(function(e,t){return new ft({type:Pt.getTimer,payload:{index:t}})})))}))},e.prototype.onChangeSchedule=function(){return this.actions$.pipe(Object(Rn.d)(j.CHANGE_SCHEDULE)).pipe(Object(Xi.a)(1e3)).pipe(Object(Yi.a)(function(e){var t=e.payload;return Object($i.a)(new ft({type:Pt.setSchedule,payload:t}))}))},e.prototype.loadSchedule=function(){return this.actions$.pipe(Object(Rn.d)(j.LOAD_SCHEDULE)).pipe(Object(Yi.a)(function(){return Object(Hi.a)(Object(u.f)(new Array(4).fill(0).map(function(e,t){return new ft({type:Pt.getSchedule,payload:{index:t}})})))}))},e.prototype.onChangePin=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(j.CHANGE_PIN_ASSIGNMENT)).pipe(Object(Yi.a)(function(t){var n=t.payload;return Object($i.a)(new ft({type:e.keyToCmd(n.key),payload:{index:n.index,value:n.value}}))}))},e.prototype.loadPinAssignment=function(){return this.actions$.pipe(Object(Rn.d)(j.LOAD_PIN_ASSIGNMENT)).pipe(Object(Yi.a)(function(){return Object(Hi.a)(Object(u.f)(new Array(2).fill(0).map(function(e,t){return new ft({type:Pt.getPinPump,payload:{index:t}})}),new Array(b).fill(0).map(function(e,t){return new ft({type:Pt.getPinValve,payload:{index:t}})}),new Array(4).fill(0).map(function(e,t){return new ft({type:Pt.getPinDose,payload:{index:t}})}),new Array(4).fill(0).map(function(e,t){return new ft({type:Pt.getPinDoseMixer,payload:{index:t}})}),new Array(2).fill(0).map(function(e,t){return new ft({type:Pt.getPinFlowSensor,payload:{index:t}})}),new Array(2).fill(0).map(function(e,t){return new ft({type:Pt.getPinLevelSensor,payload:{index:t}})}),new Array(1).fill(0).map(function(e,t){return new ft({type:Pt.getPinMixer,payload:{index:t}})})))}))},e.prototype.keyToCmd=function(e){switch(e){case"pump":return Pt.setPinPump;case"valve":return Pt.setPinValve;case"flowSensor":return Pt.setPinFlowSensor;case"levelSensor":return Pt.setPinLevelSensor;case"mixer":return Pt.setPinMixer;case"doseMixer":return Pt.setPinDoseMixer;case"dose":return Pt.setPinDose}},e.prototype.syncItems=function(e,t,n,i,o,c){var r=this;return void 0===c&&(c=null),Object(Ki.a)(0,o).pipe(Object(at.a)(function(o){return r.syncItem(e,t,n,i,o,c)})).pipe(Object(Qi.a)())},e.prototype.syncItem=function(e,t,n,i,o,c){var r=this;return void 0===c&&(c=null),Object(Hi.a)(this.connectBt.send({type:t,payload:{index:o}})).pipe(Object(qi.a)(function(){return r.connectBt.response$})).pipe(Object(st.a)(1)).pipe(Object(rt.a)(function(e){return e.type===i})).pipe(Object(Ji.a)(this.store.pipe(Object(p.h)(e(o))))).pipe(Object(qi.a)(function(e){var t=e[1];return JSON.stringify(e[0])===JSON.stringify(t)?Vi.a:Object($i.a)(t)})).pipe(Object(qi.a)(function(e){return Object(Hi.a)(r.connectBt.send({type:n,payload:Object(u.a)({index:o,value:e},c)}))}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(Rn.a),i.Xb(p.b),i.Xb(no),i.Xb(fo))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"init",null),Object(u.c)([Object(Rn.b)({dispatch:!1}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"sync",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"onChangePump",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"loadPump",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"onChangeMixer",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"loadMixer",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"onChangeDose",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"loadDose",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"onChangeProgram",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"loadProgram",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"onChangeCompote",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"loadCompote",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"onChangeTimer",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"loadTimer",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"onChangeSchedule",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"loadSchedule",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"onChangePin",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"loadPinAssignment",null),e}(),ho=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,p.d.forFeature("settings",Ge),Rn.c.forFeature([mo])]]}),e}(),go=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Ni.b,mn.b,hn.b,ho,Ui]]}),e}(),yo=n("1jcm"),Oo=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,xi.d,ki.c,yo.b]]}),e}(),So=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Ni.b,mn.b,hn.b,Oo]]}),e}(),vo=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,xi.d,ki.c,yo.b]]}),e}(),To=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Ni.b,mn.b,hn.b,vo]]}),e}(),Co=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,xi.d,ki.c,Li.b,Bi.l]]}),e}(),Eo=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,xi.d,ki.c,yo.b,Li.b,Co]]}),e}(),jo=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Ni.b,mn.b,hn.b,Eo]]}),e}(),Ao=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,xi.d,ki.c,yo.b,Co]]}),e}(),wo=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Ni.b,mn.b,hn.b,Ao]]}),e}(),Io=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,xi.d,ki.c]]}),e}(),Do=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Ni.b,mn.b,hn.b,Io]]}),e}(),_o=n("wZkO"),xo=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,xi.d,Li.b]]}),e}(),ko=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,xi.d,Li.b,Bi.l,ki.c,_o.c,Ni.b,Dn,xo]]}),e}();function Po(e,t){if(1&e&&i.Ob(0,"mat-icon",3),2&e){var n=i.ec().$implicit;i.kc("svgIcon",n.icon)}}function No(e,t){if(1&e&&(i.Tb(0,"a",1),i.Ac(1,Po,1,1,"mat-icon",2),i.Cc(2),i.Sb()),2&e){var n=t.$implicit;i.kc("routerLink",n.route),i.Bb(1),i.kc("ngIf",n.icon),i.Bb(1),i.Ec(" \xa0 ",n.title," ")}}var Ro=function(){function e(){this.links=[{route:["/","settings","program"],title:"Program",icon:"cogs"},{route:["/","settings","compote"],title:"Compote",icon:"cup-water"},{route:["/","settings","timer"],title:"Timer",icon:"alarm"},{route:["/","settings","schedule"],title:"Schedule",icon:"clock-outline"},{route:["/","settings","pump"],title:"Pump",icon:"water-pump"},{route:["/","settings","dose"],title:"Dose",icon:"eyedropper"},{route:["/","settings","mixer"],title:"Mixer",icon:"pinwheel"},{route:["/","settings","pin-assignment"],title:"Pin Assignment",icon:"chip"}]}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-settings"]],decls:2,vars:1,consts:[["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(e,t){1&e&&(i.Tb(0,"mat-nav-list"),i.Ac(1,No,3,3,"a",0),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",t.links))},directives:[fn.d,bn.l,fn.b,r.d,bn.m,hn.a],styles:[""],changeDetection:0}),e}();function Mo(e,t){if(1&e){var n=i.Ub();i.Rb(0),i.Tb(1,"mat-form-field"),i.Tb(2,"input",5),i.ac("input",function(e){i.sc(n);var o=t.index;return i.ec().onDoseChange(o,+e.target.value)}),i.Sb(),i.Sb(),i.Qb()}if(2&e){var o=t.$implicit,c=t.index,r=i.ec();i.Bb(2),i.kc("placeholder",(o||c+1)+" Volume (0.1 mL)")("value",r.compoteDaily.dose[c])}}var Lo=function(){function e(){this.compoteDailyChange=new i.n}return e.prototype.onChange=function(e){this.compoteDailyChange.next(Object(u.a)(Object(u.a)({},this.compoteDaily),e))},e.prototype.onDoseChange=function(e,t){var n=this.compoteDaily.dose.slice(0);n[e]=t,this.onChange({dose:n})},e.prototype.trackByIndex=function(e){return e},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-compote-daily"]],inputs:{compoteDaily:"compoteDaily",soils:"soils"},outputs:{compoteDailyChange:"compoteDailyChange"},decls:9,vars:6,consts:[["matInput","","type","number","placeholder","Days",3,"value","input"],["matInput","","type","number","placeholder","Light schedule",3,"value","input"],["matInput","","type","number","placeholder","Volume (mL)",3,"value","input"],["matInput","","type","number","placeholder","Washing Volume (mL)",3,"value","input"],[4,"ngFor","ngForOf","ngForTrackBy"],["matInput","","type","number",3,"placeholder","value","input"]],template:function(e,t){1&e&&(i.Tb(0,"mat-form-field"),i.Tb(1,"input",0),i.ac("input",function(e){return t.onChange({days:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(2,"mat-form-field"),i.Tb(3,"input",1),i.ac("input",function(e){return t.onChange({schedule:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(4,"mat-form-field"),i.Tb(5,"input",2),i.ac("input",function(e){return t.onChange({volume:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(6,"mat-form-field"),i.Tb(7,"input",3),i.ac("input",function(e){return t.onChange({washVolume:+e.target.value})}),i.Sb(),i.Sb(),i.Ac(8,Mo,3,2,"ng-container",4)),2&e&&(i.Bb(1),i.kc("value",t.compoteDaily.days),i.Bb(2),i.kc("value",t.compoteDaily.schedule),i.Bb(2),i.kc("value",t.compoteDaily.volume),i.Bb(2),i.kc("value",t.compoteDaily.washVolume),i.Bb(1),i.kc("ngForOf",t.soils)("ngForTrackBy",t.trackByIndex))},directives:[xi.b,ki.b,bn.l],styles:[""],changeDetection:0}),e}();function Bo(e,t){if(1&e&&(i.Tb(0,"span",3),i.Cc(1),i.Sb()),2&e){var n=t.$implicit;i.Bb(1),i.Dc(n)}}function Fo(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-compote-daily",6),i.ac("compoteDailyChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onDailyChange(t,e)}),i.Sb()}if(2&e){var o=i.ec().$implicit,c=i.ec();i.kc("compoteDaily",o)("soils",c.soils)}}function Uo(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.Tb(6,"span",3),i.Cc(7),i.Sb(),i.Ac(8,Bo,2,1,"span",4),i.Sb(),i.Sb(),i.Ac(9,Fo,1,2,"ng-template",5),i.Sb()),2&e){var n=t.$implicit,o=t.index,c=i.ec();i.Bb(3),i.Ec(" #",o+1," "),i.Bb(2),i.Ec(" ",n.volume," "),i.Bb(2),i.Dc(n.washVolume),i.Bb(1),i.kc("ngForOf",n.dose)("ngForTrackBy",c.trackByIndex)}}var Go=function(){function e(){this.compoteChange=new i.n,this.compoteDailyChange=new i.n,this.nameChange=new i.n,this.add=new i.n}return e.prototype.onChange=function(e){this.compoteChange.next(Object(u.a)(Object(u.a)({},this.compote),e))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.prototype.onDailyChange=function(e,t){this.compoteDailyChange.next({index:e,value:t})},e.prototype.onAdd=function(){this.add.emit()},e.prototype.trackByIndex=function(e){return e},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-compote"]],inputs:{compote:"compote",name:"name",soils:"soils"},outputs:{compoteChange:"compoteChange",compoteDailyChange:"compoteDailyChange",nameChange:"nameChange",add:"add"},decls:7,vars:3,consts:[["matInput","","type","text","placeholder","Name",3,"value","input"],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-button","",3,"click"],[1,"ml-1"],["class","ml-1",4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"compoteDaily","soils","compoteDailyChange"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Tb(1,"mat-form-field"),i.Tb(2,"input",0),i.ac("input",function(e){return t.onNameChange(e.target.value)}),i.Sb(),i.Sb(),i.Tb(3,"mat-accordion"),i.Ac(4,Uo,10,5,"mat-expansion-panel",1),i.Sb(),i.Tb(5,"button",2),i.ac("click",function(){return t.onAdd()}),i.Cc(6,"Add"),i.Sb(),i.Sb()),2&e&&(i.Bb(2),i.kc("value",t.name),i.Bb(2),i.kc("ngForOf",t.compote.daily)("ngForTrackBy",t.trackByIndex))},directives:[xi.b,ki.b,Ni.a,bn.l,mn.a,Ni.c,Ni.f,Ni.g,Ni.e,Ni.d,Lo],styles:[""],changeDetection:0}),e}();function $o(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-compote",2),i.ac("compoteDailyChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onDailyChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)})("add",function(){i.sc(n);var e=i.ec().index;return i.ec().onAddDaily(e)}),i.fc(1,"async"),i.fc(2,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("compote",c)("name",i.gc(1,3,a.names$)[r])("soils",i.gc(2,5,a.soils$))}}function Vo(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,$o,3,7,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var Ho=function(){function e(e){this.store=e,this.compotes$=this.store.pipe(Object(p.h)(he)),this.soils$=this.store.pipe(Object(p.h)(Fe("dose"))),this.names$=this.store.pipe(Object(p.h)(Fe("compote")))}return e.prototype.ngOnInit=function(){this.store.dispatch(new x)},e.prototype.onNameChange=function(e,t){this.store.dispatch(new ue({key:"compote",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new D({index:e,value:t}))},e.prototype.onDailyChange=function(e,t){this.store.dispatch(new P({index:e,dailyIndex:t.index,value:t.value}))},e.prototype.onRemove=function(e){this.store.dispatch(new _(e))},e.prototype.onAddDaily=function(e){this.store.dispatch(new k(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-compote-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"compote","name","soils","compoteDailyChange","nameChange","add"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,Vo,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.compotes$))("ngForTrackBy",t.trackByIndex))},directives:[Ni.a,bn.l,Ni.c,Ni.f,Ni.g,Ni.e,Ni.d,Go],pipes:[bn.b],styles:[""],changeDetection:0}),e}(),Ko=function(){function e(){}return e.prototype.transform=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return m(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"dateDay",type:e,pure:!0}),e}(),Wo=function(){function e(){}return e.prototype.transform=function(e){for(var t=[],n=0;n<e.length;n++)for(var i=e[n],o=0;o<8;o++)1&i&&t.push(8*n+o+1),i>>=1;return t},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"bits",type:e,pure:!0}),e}();function Yo(e,t){if(1&e&&(i.Tb(0,"mat-option",7),i.Cc(1),i.Sb()),2&e){var n=t.$implicit,o=t.index;i.kc("value",o),i.Bb(1),i.Ec(" ",n||o+1," ")}}function Xo(e,t){if(1&e&&(i.Tb(0,"mat-option",7),i.Cc(1),i.Sb()),2&e){var n=t.$implicit;i.kc("value",n),i.Bb(1),i.Ec(" ",n," ")}}var zo=function(){function e(){this.programChange=new i.n,this.nameChange=new i.n}return e.prototype.onChange=function(e){this.programChange.next(Object(u.a)(Object(u.a)({},this.program),e))},e.prototype.onChangeDate=function(e){this.programChange.next(Object(u.a)(Object(u.a)({},this.program),{start:f(e)}))},e.prototype.onChangeValves=function(e){for(var t=new Array(Math.ceil(3)).fill(0),n=0,i=e;n<i.length;n++){var o=i[n]-1;t[Math.trunc(o/8)]|=1<<o%8}this.programChange.next(Object(u.a)(Object(u.a)({},this.program),{valves:t}))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-program"]],inputs:{program:"program",name:"name",compotes:"compotes",valves:"valves"},outputs:{programChange:"programChange",nameChange:"nameChange"},decls:15,vars:12,consts:[["matInput","","placeholder","Name",3,"value","input"],["placeholder","Compote",3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Start",3,"matDatepicker","value","dateChange"],["matSuffix","",3,"for"],["startDatepicker",""],["placeholder","Valves","multiple","",3,"value","selectionChange"],[3,"value"]],template:function(e,t){if(1&e&&(i.Tb(0,"mat-form-field"),i.Tb(1,"input",0),i.ac("input",function(e){return t.onNameChange(e.target.value)}),i.Sb(),i.Sb(),i.Tb(2,"mat-form-field"),i.Tb(3,"mat-select",1),i.ac("selectionChange",function(e){return t.onChange({compote:e.value})}),i.Ac(4,Yo,2,2,"mat-option",2),i.Sb(),i.Sb(),i.Tb(5,"mat-form-field"),i.Tb(6,"input",3),i.ac("dateChange",function(e){return t.onChangeDate(e.value)}),i.fc(7,"dateDay"),i.Sb(),i.Ob(8,"mat-datepicker-toggle",4),i.Ob(9,"mat-datepicker",null,5),i.Sb(),i.Tb(11,"mat-form-field"),i.Tb(12,"mat-select",6),i.ac("selectionChange",function(e){return t.onChangeValves(e.value)}),i.fc(13,"bits"),i.Ac(14,Xo,2,2,"mat-option",2),i.Sb(),i.Sb()),2&e){var n=i.qc(10);i.Bb(1),i.kc("value",t.name),i.Bb(2),i.kc("value",t.program.compote),i.Bb(1),i.kc("ngForOf",t.compotes),i.Bb(2),i.kc("matDatepicker",n)("value",i.gc(7,8,t.program.start)),i.Bb(2),i.kc("for",n),i.Bb(4),i.kc("value",i.gc(13,10,t.program.valves)),i.Bb(2),i.kc("ngForOf",t.valves)}},directives:[xi.b,ki.b,Li.a,bn.l,Fi.b,Fi.d,xi.e,Fi.a,Bi.k],pipes:[Ko,Wo],styles:[""],changeDetection:0}),e}();function qo(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-program",2),i.ac("programChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)}),i.fc(1,"async"),i.fc(2,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("program",c)("name",i.gc(1,4,a.names$)[r])("compotes",i.gc(2,6,a.compotes$))("valves",a.valves)}}function Jo(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,qo,3,8,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var Qo=function(){function e(e){this.store=e,this.destroy$=new xn.a,this.programs$=this.store.pipe(Object(p.h)(fe)),this.compotes$=this.store.pipe(Object(p.h)(Fe("compote"))),this.names$=this.store.pipe(Object(p.h)(Fe("program"))),this.valves=new Array(b);for(var t=0;t<b;t++)this.valves[t]=t+1}return e.prototype.ngOnInit=function(){this.store.dispatch(new F)},e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.onNameChange=function(e,t){this.store.dispatch(new ue({key:"program",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new M({index:e,value:t}))},e.prototype.onRemove=function(e){this.store.dispatch(new L(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-program-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"program","name","compotes","valves","programChange","nameChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,Jo,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.programs$))("ngForTrackBy",t.trackByIndex))},directives:[Ni.a,bn.l,Ni.c,Ni.f,Ni.g,Ni.e,Ni.d,zo],pipes:[bn.b],styles:[""],changeDetection:0}),e}(),Zo=function(){function e(){this.pumpChange=new i.n,this.nameChange=new i.n}return e.prototype.onChange=function(e){this.pumpChange.next(Object(u.a)(Object(u.a)({},this.pump),e))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-pump"]],inputs:{pump:"pump",name:"name"},outputs:{pumpChange:"pumpChange",nameChange:"nameChange"},decls:13,vars:6,consts:[["matInput","","type","text","placeholder","Name",3,"value","input"],["matInput","","type","number","placeholder","Min flow",3,"value","input"],["matInput","","type","number","placeholder","Starting Time",3,"value","input"],[1,"col-12",3,"checked","change"],["matInput","","type","number","placeholder","PWM Flow",3,"value","input"],["matInput","","type","number","placeholder","Rate",3,"value","input"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Tb(1,"mat-form-field"),i.Tb(2,"input",0),i.ac("input",function(e){return t.onNameChange(e.target.value)}),i.Sb(),i.Sb(),i.Tb(3,"mat-form-field"),i.Tb(4,"input",1),i.ac("input",function(e){return t.onChange({minFlow:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(5,"mat-form-field"),i.Tb(6,"input",2),i.ac("input",function(e){return t.onChange({startingTime:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(7,"mat-slide-toggle",3),i.ac("change",function(e){return t.onChange({pwm:+e.checked})}),i.Cc(8," PWM "),i.Sb(),i.Tb(9,"mat-form-field"),i.Tb(10,"input",4),i.ac("input",function(e){return t.onChange({pwmFlow:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(11,"mat-form-field"),i.Tb(12,"input",5),i.ac("input",function(e){return t.onChange({rate:+e.target.value})}),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(2),i.kc("value",t.name),i.Bb(2),i.kc("value",t.pump.minFlow),i.Bb(2),i.kc("value",t.pump.startingTime),i.Bb(1),i.kc("checked",!!t.pump.pwm),i.Bb(3),i.kc("value",t.pump.pwmFlow),i.Bb(2),i.kc("value",t.pump.rate))},directives:[xi.b,ki.b,yo.a],styles:[""],changeDetection:0}),e}();function ec(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pump",2),i.ac("pumpChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("pump",c)("name",i.gc(1,2,a.names$)[r])}}function tc(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,ec,2,4,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var nc=function(){function e(e){this.store=e,this.pumps$=this.store.pipe(Object(p.h)(ve)),this.names$=this.store.pipe(Object(p.h)(Fe("pump")))}return e.prototype.ngOnInit=function(){this.store.dispatch(new V)},e.prototype.onNameChange=function(e,t){this.store.dispatch(new ue({key:"pump",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new U({index:e,value:t}))},e.prototype.onRemove=function(e){this.store.dispatch(new G(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-pump-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"pump","name","pumpChange","nameChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,tc,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.pumps$))("ngForTrackBy",t.trackByIndex))},directives:[Ni.a,bn.l,Ni.c,Ni.f,Ni.g,Ni.e,Ni.d,Zo],pipes:[bn.b],styles:[""],changeDetection:0}),e}(),ic=function(){function e(){this.doseChange=new i.n,this.nameChange=new i.n}return e.prototype.onChange=function(e){this.doseChange.next(Object(u.a)(Object(u.a)({},this.dose),e))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-dose"]],inputs:{dose:"dose",name:"name"},outputs:{doseChange:"doseChange",nameChange:"nameChange"},decls:11,vars:5,consts:[[1,"col-12"],["matInput","","type","text","placeholder","Name",3,"value","input"],["matInput","","type","number","placeholder","Rate (0.1 mL / ms)",3,"value","input"],["matInput","","type","number","placeholder","Seconds",3,"value","input"],[1,"col-12",3,"checked","change"],["matInput","","type","number","placeholder","PWM Sensor",3,"value","input"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Tb(1,"mat-form-field",0),i.Tb(2,"input",1),i.ac("input",function(e){return t.onNameChange(e.target.value)}),i.Sb(),i.Sb(),i.Tb(3,"mat-form-field",0),i.Tb(4,"input",2),i.ac("input",function(e){return t.onChange({rate:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(5,"mat-form-field",0),i.Tb(6,"input",3),i.ac("input",function(e){return t.onChange({seconds:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(7,"mat-slide-toggle",4),i.ac("change",function(e){return t.onChange({pwm:+e.checked})}),i.Cc(8," PWM "),i.Sb(),i.Tb(9,"mat-form-field"),i.Tb(10,"input",5),i.ac("input",function(e){return t.onChange({pwmSensor:+e.target.value})}),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(2),i.kc("value",t.name),i.Bb(2),i.kc("value",t.dose.rate),i.Bb(2),i.kc("value",t.dose.seconds),i.Bb(1),i.kc("checked",!!t.dose.pwm),i.Bb(3),i.kc("value",t.dose.pwmSensor))},directives:[xi.b,ki.b,yo.a],styles:[""],changeDetection:0}),e}();function oc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-dose",2),i.ac("doseChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("dose",c)("name",i.gc(1,2,a.names$)[r])}}function cc(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,oc,2,4,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var rc=function(){function e(e){this.store=e,this.doses$=this.store.pipe(Object(p.h)(je)),this.names$=this.store.pipe(Object(p.h)(Fe("dose")))}return e.prototype.ngOnInit=function(){this.store.dispatch(new Y)},e.prototype.onNameChange=function(e,t){this.store.dispatch(new ue({key:"dose",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new H({index:e,value:t}))},e.prototype.onRemove=function(e){this.store.dispatch(new K(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-dose-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"dose","name","doseChange","nameChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,cc,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.doses$))("ngForTrackBy",t.trackByIndex))},directives:[Ni.a,bn.l,Ni.c,Ni.f,Ni.g,Ni.e,Ni.d,ic],pipes:[bn.b],styles:[""],changeDetection:0}),e}();function ac(e,t){if(1&e&&(i.Tb(0,"mat-option",3),i.Cc(1),i.Sb()),2&e){var n=t.$implicit;i.kc("value",n),i.Bb(1),i.Dc(n)}}function sc(e,t){if(1&e&&(i.Tb(0,"mat-option",3),i.Cc(1),i.Sb()),2&e){var n=t.$implicit;i.kc("value",n),i.Bb(1),i.Dc(n)}}var uc=function(){function e(){this.timeChange=new i.n,this.hours=new Array(24).fill(0).map(function(e,t){return t}),this.minutes=new Array(60).fill(0).map(function(e,t){return t})}return e.prototype.onChange=function(e){this.timeChange.next(Object(u.a)(Object(u.a)({},this.time),e))},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-day-time"]],inputs:{time:"time"},outputs:{timeChange:"timeChange"},decls:6,vars:4,consts:[["placeholder","Hour",3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Minute",3,"value","selectionChange"],[3,"value"]],template:function(e,t){1&e&&(i.Tb(0,"mat-form-field"),i.Tb(1,"mat-select",0),i.ac("selectionChange",function(e){return t.onChange({hour:e.value})}),i.Ac(2,ac,2,2,"mat-option",1),i.Sb(),i.Sb(),i.Tb(3,"mat-form-field"),i.Tb(4,"mat-select",2),i.ac("selectionChange",function(e){return t.onChange({minute:e.value})}),i.Ac(5,sc,2,2,"mat-option",1),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.kc("value",t.time.hour),i.Bb(1),i.kc("ngForOf",t.hours),i.Bb(2),i.kc("value",t.time.minute),i.Bb(1),i.kc("ngForOf",t.minutes))},directives:[xi.b,Li.a,bn.l,Bi.k],styles:[""],changeDetection:0}),e}(),pc=function(){function e(){this.scheduleChange=new i.n,this.nameChange=new i.n}return e.prototype.onChange=function(e){this.scheduleChange.next(Object(u.a)(Object(u.a)({},this.schedule),e))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-schedule"]],inputs:{schedule:"schedule",name:"name"},outputs:{scheduleChange:"scheduleChange",nameChange:"nameChange"},decls:5,vars:3,consts:[[1,"row"],[1,"col-12",3,"checked","change"],[1,"col-12",3,"time","timeChange"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"mat-slide-toggle",1),i.ac("change",function(e){return t.onChange({enable:+e.checked})}),i.Cc(2," Enable "),i.Sb(),i.Tb(3,"app-day-time",2),i.ac("timeChange",function(e){return t.onChange({startTime:e})}),i.Sb(),i.Tb(4,"app-day-time",2),i.ac("timeChange",function(e){return t.onChange({endTime:e})}),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.kc("checked",!!t.schedule.enable),i.Bb(2),i.kc("time",t.schedule.startTime),i.Bb(1),i.kc("time",t.schedule.endTime))},directives:[yo.a,uc],styles:[""],changeDetection:0}),e}();function lc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-schedule",2),i.ac("scheduleChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("schedule",c)("name",i.gc(1,2,a.names$)[r])}}function bc(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,lc,2,4,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var dc=function(){function e(e){this.store=e,this.schedules$=this.store.pipe(Object(p.h)(Oe)),this.names$=this.store.pipe(Object(p.h)(Fe("schedule")))}return e.prototype.ngOnInit=function(){this.store.dispatch(new te)},e.prototype.onNameChange=function(e,t){this.store.dispatch(new ue({key:"schedule",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new Q({index:e,value:t}))},e.prototype.onRemove=function(e){this.store.dispatch(new Z(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-schedule-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"schedule","name","scheduleChange","nameChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,bc,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.schedules$))("ngForTrackBy",t.trackByIndex))},directives:[Ni.a,bn.l,Ni.c,Ni.f,Ni.g,Ni.e,Ni.d,pc],pipes:[bn.b],styles:[""],changeDetection:0}),e}();function fc(e,t){if(1&e&&(i.Tb(0,"mat-option",5),i.Cc(1),i.Sb()),2&e){var n=t.$implicit,o=t.index;i.kc("value",o),i.Bb(1),i.Ec(" ",n||o+1," ")}}var mc=function(){function e(){this.timerChange=new i.n,this.nameChange=new i.n}return e.prototype.onChange=function(e){this.timerChange.next(Object(u.a)(Object(u.a)({},this.timer),e))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-timer"]],inputs:{timer:"timer",name:"name",programs:"programs"},outputs:{timerChange:"timerChange",nameChange:"nameChange"},decls:7,vars:4,consts:[[1,"col-12",3,"checked","change"],[1,"col-12",3,"time","timeChange"],[1,"col-12"],["placeholder","Program",3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Tb(1,"mat-slide-toggle",0),i.ac("change",function(e){return t.onChange({enable:+e.checked})}),i.Cc(2," Enable "),i.Sb(),i.Tb(3,"app-day-time",1),i.ac("timeChange",function(e){return t.onChange({time:e})}),i.Sb(),i.Tb(4,"mat-form-field",2),i.Tb(5,"mat-select",3),i.ac("selectionChange",function(e){return t.onChange({program:e.value})}),i.Ac(6,fc,2,2,"mat-option",4),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.kc("checked",!!t.timer.enable),i.Bb(2),i.kc("time",t.timer.time),i.Bb(2),i.kc("value",t.timer.program),i.Bb(1),i.kc("ngForOf",t.programs))},directives:[yo.a,uc,xi.b,Li.a,bn.l,Bi.k],styles:[""],changeDetection:0}),e}();function hc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-timer",2),i.ac("timerChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)}),i.fc(1,"async"),i.fc(2,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("timer",c)("name",i.gc(1,3,a.names$)[r])("programs",i.gc(2,5,a.programs$))}}function gc(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,hc,3,7,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var yc=function(){function e(e){this.store=e,this.timers$=this.store.pipe(Object(p.h)(ge)),this.names$=this.store.pipe(Object(p.h)(Fe("timer"))),this.programs$=this.store.pipe(Object(p.h)(Fe("program")))}return e.prototype.ngOnInit=function(){this.store.dispatch(new J)},e.prototype.onNameChange=function(e,t){this.store.dispatch(new ue({key:"timer",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new X({index:e,value:t}))},e.prototype.onRemove=function(e){this.store.dispatch(new z(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-timer-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"timer","name","programs","timerChange","nameChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,gc,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.timers$))("ngForTrackBy",t.trackByIndex))},directives:[Ni.a,bn.l,Ni.c,Ni.f,Ni.g,Ni.e,Ni.d,mc],pipes:[bn.b],styles:[""],changeDetection:0}),e}(),Oc=function(){function e(){this.mixerChange=new i.n,this.nameChange=new i.n}return e.prototype.onChange=function(e){this.mixerChange.next(Object(u.a)(Object(u.a)({},this.mixer),e))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-mixer"]],inputs:{mixer:"mixer",name:"name"},outputs:{mixerChange:"mixerChange",nameChange:"nameChange"},decls:7,vars:3,consts:[["matInput","","type","text","placeholder","Name",3,"value","input"],["matInput","","type","number","placeholder","Seconds",3,"value","input"],["matInput","","type","number","placeholder","Wash seconds",3,"value","input"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Tb(1,"mat-form-field"),i.Tb(2,"input",0),i.ac("input",function(e){return t.onNameChange(e.target.value)}),i.Sb(),i.Sb(),i.Tb(3,"mat-form-field"),i.Tb(4,"input",1),i.ac("input",function(e){return t.onChange({seconds:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(5,"mat-form-field"),i.Tb(6,"input",2),i.ac("input",function(e){return t.onChange({washSeconds:+e.target.value})}),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(2),i.kc("value",t.name),i.Bb(2),i.kc("value",t.mixer.seconds),i.Bb(2),i.kc("value",t.mixer.washSeconds))},directives:[xi.b,ki.b],styles:[""],changeDetection:0}),e}();function Sc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-mixer",2),i.ac("mixerChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("mixer",c)("name",i.gc(1,2,a.names$)[r])}}function vc(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,Sc,2,4,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var Tc=function(){function e(e){this.store=e,this.mixers$=this.store.pipe(Object(p.h)(Ce)),this.names$=this.store.pipe(Object(p.h)(Fe("mixer")))}return e.prototype.ngOnInit=function(){this.store.dispatch(new ce)},e.prototype.onNameChange=function(e,t){this.store.dispatch(new ue({key:"mixer",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new ne({index:e,value:t}))},e.prototype.onRemove=function(e){this.store.dispatch(new ie(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-mixer-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"mixer","name","mixerChange","nameChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,vc,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.mixers$))("ngForTrackBy",t.trackByIndex))},directives:[Ni.a,bn.l,Ni.c,Ni.f,Ni.g,Ni.e,Ni.d,Oc],pipes:[bn.b],styles:[""],changeDetection:0}),e}(),Cc={mega2560:{pins:{0:{mode:"rx"},1:{mode:"tx"},2:{pwm:!0,int:0},3:{pwm:!0,int:1},4:{pwm:!0},5:{pwm:!0},6:{pwm:!0},7:{pwm:!0},8:{pwm:!0},9:{pwm:!0},10:{pwm:!0},11:{pwm:!0},12:{pwm:!0},13:{pwm:!0},14:{mode:"tx3"},15:{mode:"rx3"},16:{mode:"tx2"},17:{mode:"rx2"},18:{mode:"tx1",int:5},19:{mode:"rx1",int:4},20:{mode:"sda",int:3},21:{mode:"scl",int:2},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{},36:{},37:{},38:{},39:{},40:{},41:{},42:{},43:{},44:{pwm:!0},45:{pwm:!0},46:{pwm:!0},47:{},48:{},49:{},50:{mode:"miso"},51:{mode:"mosi"},52:{mode:"sck"},53:{mode:"ss"},54:{analog:!0},55:{analog:!0},56:{analog:!0},57:{analog:!0},58:{analog:!0},59:{analog:!0},60:{analog:!0},61:{analog:!0},62:{analog:!0},63:{analog:!0},64:{analog:!0},65:{analog:!0},66:{analog:!0},67:{analog:!0},68:{analog:!0},69:{analog:!0}}}},Ec={pump:"Pump",valve:"Valve",mixer:"Mixer",dose:"Dose",doseMixer:"Dose Mixer",flowSensor:"Flow Sensor",levelSensor:"Level Sensor",rtc:"RTC",display:"Display",button:"Button"};function jc(e,t){if(1&e&&(i.Tb(0,"mat-option",6),i.Tb(1,"div",7),i.Cc(2),i.Sb(),i.Sb()),2&e){var n=t.$implicit;i.kc("value",n),i.Bb(2),i.Ec(" ",n," ")}}function Ac(e,t){if(1&e){var n=i.Ub();i.Tb(0,"mat-form-field",3),i.Tb(1,"mat-select",4),i.ac("selectionChange",function(e){i.sc(n);var o=t.index;return i.ec().onChange(o,e.value)}),i.Ac(2,jc,3,2,"mat-option",5),i.Sb(),i.Sb()}if(2&e){var o=t.$implicit,c=t.index,r=i.ec();i.Bb(1),i.lc("placeholder","Pin ",r.title," #",c,""),i.kc("value",o),i.Bb(1),i.kc("ngForOf",r.allPins)("ngForTrackBy",r.trackByValue)}}var wc=function(){function e(){this.pinChange=new i.n}return e.prototype.onChange=function(e,t){this.pinChange.next({index:e,value:t})},e.prototype.trackByValue=function(e,t){return t},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-pin-select"]],inputs:{pins:"pins",allPins:"allPins",title:"title"},outputs:{pinChange:"pinChange"},decls:3,vars:2,consts:[[1,"container-fluid"],[1,"row"],["class","col-12",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-12"],[3,"placeholder","value","selectionChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"pl-4"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"div",1),i.Ac(2,Ac,3,5,"mat-form-field",2),i.Sb(),i.Sb()),2&e&&(i.Bb(2),i.kc("ngForOf",t.pins)("ngForTrackBy",t.trackByValue))},directives:[bn.l,xi.b,Li.a,Bi.k],styles:[""],changeDetection:0}),e}();function Ic(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",5),i.ac("pinChange",function(e){return i.sc(n),i.ec().onChange("pump",e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinPumps$))("allPins",o.pins)}}function Dc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",6),i.ac("pinChange",function(e){return i.sc(n),i.ec().onChange("flowSensor",e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinFlowSensors$))("allPins",o.pins)}}function _c(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",7),i.ac("pinChange",function(e){return i.sc(n),i.ec().onChange("mixer",e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinMixers$))("allPins",o.pins)}}function xc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",8),i.ac("pinChange",function(e){return i.sc(n),i.ec().onChange("dose",e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinDoses$))("allPins",o.pins)}}function kc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",9),i.ac("pinChange",function(e){return i.sc(n),i.ec().onChange("doseMixer",e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinDoseMixers$))("allPins",o.pins)}}function Pc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",10),i.ac("pinChange",function(e){return i.sc(n),i.ec().onChange("valve",e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinValves$))("allPins",o.pins)}}function Nc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",11),i.ac("pinChange",function(e){return i.sc(n),i.ec().onChange("levelSensor",e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinLevelSensors$))("allPins",o.pins)}}var Rc=[{path:"settings",children:[{path:"",component:Ro,pathMatch:"full",data:{title:"Settings",actions:["menu","bt","sync"]}},{path:"compote",component:Ho,data:{title:"Compote",actions:["back","sync"]}},{path:"program",component:Qo,data:{title:"Program",actions:["back","sync"]}},{path:"pump",component:nc,data:{title:"Pump",actions:["back","sync"]}},{path:"dose",component:rc,data:{title:"Dose",actions:["back","sync"]}},{path:"mixer",component:Tc,data:{title:"Mixer",actions:["back","sync"]}},{path:"timer",component:yc,data:{title:"Timer",actions:["back","sync"]}},{path:"schedule",component:dc,data:{title:"Schedule",actions:["back","sync"]}},{path:"pin-assignment",component:function(){function e(e){this.store=e,this.pins=Object.keys(Cc.mega2560.pins).map(function(e){return+e}),this.pins2=Object.keys(Cc.mega2560.pins).map(function(e){return{key:+e,value:Cc.mega2560.pins[e]}}).sort(function(e,t){return e.key-t.key}),this.devicePartTypeName=Ec,this.destroy$=new xn.a}return e.prototype.ngOnInit=function(){this.store.dispatch(new re),this.pinPumps$=this.store.pipe(Object(p.h)(Ie)),this.pinFlowSensors$=this.store.pipe(Object(p.h)(_e)),this.pinMixers$=this.store.pipe(Object(p.h)(ke)),this.pinDoses$=this.store.pipe(Object(p.h)(Ne)),this.pinDoseMixers$=this.store.pipe(Object(p.h)(Me)),this.pinValves$=this.store.pipe(Object(p.h)(Le)),this.pinLevelSensors$=this.store.pipe(Object(p.h)(Be))},e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.onChange=function(e,t,n){this.store.dispatch(new ae({key:e,index:t,value:n}))},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-pin-assignment"]],decls:53,vars:0,consts:[[1,"h-100"],["label","Blocks"],[1,"w-100"],["matExpansionPanelContent",""],["label","Pins"],["title","Pump",3,"pins","allPins","pinChange"],["title","Flow Sensor",3,"pins","allPins","pinChange"],["title","Mixer",3,"pins","allPins","pinChange"],["title","Dose",3,"pins","allPins","pinChange"],["title","Dose Mixer",3,"pins","allPins","pinChange"],["title","Valve",3,"pins","allPins","pinChange"],["title","Level Sensor",3,"pins","allPins","pinChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-tab-group",0),i.Tb(1,"mat-tab",1),i.Tb(2,"mat-accordion",2),i.Tb(3,"mat-expansion-panel"),i.Tb(4,"mat-expansion-panel-header"),i.Tb(5,"mat-panel-title"),i.Cc(6," Pump "),i.Sb(),i.Tb(7,"mat-panel-description"),i.Cc(8," Pump pin assignment "),i.Sb(),i.Sb(),i.Ac(9,Ic,2,4,"ng-template",3),i.Sb(),i.Tb(10,"mat-expansion-panel"),i.Tb(11,"mat-expansion-panel-header"),i.Tb(12,"mat-panel-title"),i.Cc(13," Flow sensor "),i.Sb(),i.Tb(14,"mat-panel-description"),i.Cc(15," Flow sensor pin assignment "),i.Sb(),i.Sb(),i.Ac(16,Dc,2,4,"ng-template",3),i.Sb(),i.Tb(17,"mat-expansion-panel"),i.Tb(18,"mat-expansion-panel-header"),i.Tb(19,"mat-panel-title"),i.Cc(20," Mixer "),i.Sb(),i.Tb(21,"mat-panel-description"),i.Cc(22," Mixer pin assignment "),i.Sb(),i.Sb(),i.Ac(23,_c,2,4,"ng-template",3),i.Sb(),i.Tb(24,"mat-expansion-panel"),i.Tb(25,"mat-expansion-panel-header"),i.Tb(26,"mat-panel-title"),i.Cc(27," Dose "),i.Sb(),i.Tb(28,"mat-panel-description"),i.Cc(29," Dose pin assignment "),i.Sb(),i.Sb(),i.Ac(30,xc,2,4,"ng-template",3),i.Sb(),i.Tb(31,"mat-expansion-panel"),i.Tb(32,"mat-expansion-panel-header"),i.Tb(33,"mat-panel-title"),i.Cc(34," Dose Mixer "),i.Sb(),i.Tb(35,"mat-panel-description"),i.Cc(36," Dose Mixer pin assignment "),i.Sb(),i.Sb(),i.Ac(37,kc,2,4,"ng-template",3),i.Sb(),i.Tb(38,"mat-expansion-panel"),i.Tb(39,"mat-expansion-panel-header"),i.Tb(40,"mat-panel-title"),i.Cc(41," Valve "),i.Sb(),i.Tb(42,"mat-panel-description"),i.Cc(43," Valve pin assignment "),i.Sb(),i.Sb(),i.Ac(44,Pc,2,4,"ng-template",3),i.Sb(),i.Tb(45,"mat-expansion-panel"),i.Tb(46,"mat-expansion-panel-header"),i.Tb(47,"mat-panel-title"),i.Cc(48," Level sensor "),i.Sb(),i.Tb(49,"mat-panel-description"),i.Cc(50," Level sensor pin assignment "),i.Sb(),i.Sb(),i.Ac(51,Nc,2,4,"ng-template",3),i.Sb(),i.Sb(),i.Sb(),i.Ob(52,"mat-tab",4),i.Sb())},directives:[_o.b,_o.a,Ni.a,Ni.c,Ni.f,Ni.g,Ni.e,Ni.d,wc],pipes:[bn.b],styles:[""],changeDetection:0}),e}(),data:{title:"Pin Assignment",actions:["back","sync"]}}]}],Mc=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(Rc)],r.e]}),e}(),Lc=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Mc,fn.c,hn.b,In,Mi,go,So,To,jo,wo,Do,ko]]}),e}(),Bc=function(){function e(){this.enabled=!0,this.responseSubject=new xn.a,"serial"in navigator||(console.warn("Your browser does not support Serial API"),this.enabled=!1),this.response$=this.responseSubject.asObservable()}return e.prototype.discover=function(e){return Object(u.b)(this,void 0,void 0,function(){var t,n;return Object(u.d)(this,function(i){switch(i.label){case 0:return console.log("[Serial::Info] Requesting devices with options %o",e),[4,navigator.serial.getPorts()];case 1:return t=i.sent(),console.log(t),[4,navigator.serial.requestPort()];case 2:return n=i.sent(),console.log(n),console.log(n.getInfo()),this.port=n,[2,[{id:"id",name:"name",type:"serial",port:n}]]}})})},e.prototype.connect=function(e){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(e){switch(e.label){case 0:return console.log("open serial port"),[4,this.port.open({baudrate:9600,baudRate:9600})];case 1:return e.sent(),console.log("serial port is opened"),[2]}})})},e.prototype.disconnect=function(){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(e){return[2]})})},e.prototype.send=function(e){return Object(u.b)(this,void 0,void 0,function(){var t;return Object(u.d)(this,function(n){switch(n.label){case 0:return console.log("serial port write"),[4,(t=this.port.writable.getWriter()).write(e)];case 1:return n.sent(),t.releaseLock(),[2]}})})},e.prototype.read=function(){return Object(u.b)(this,void 0,void 0,function(){var e,t,n,i;return Object(u.d)(this,function(o){switch(o.label){case 0:o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.port.readable.getReader().read()];case 2:return e=o.sent(),n=e.done,(t=e.value)&&this.responseSubject.next(t),n?(console.log("[readLoop] DONE",n),this.port.readable.getReader().releaseLock(),[3,5]):[3,4];case 3:return i=o.sent(),console.log(i),[3,4];case 4:return[3,0];case 5:return[2]}})})},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}(),Fc=n("0IaG"),Uc=n("QibW"),Gc=n("3Pt+"),$c=n("Xa2L"),Vc=function(e){return e.ACCESS_CHECKIN_PROPERTIES="android.permission.ACCESS_CHECKIN_PROPERTIES",e.ACCESS_COARSE_LOCATION="android.permission.ACCESS_COARSE_LOCATION",e.ACCESS_FINE_LOCATION="android.permission.ACCESS_FINE_LOCATION",e.ACCESS_LOCATION_EXTRA_COMMANDS="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS",e.ACCESS_MOCK_LOCATION="android.permission.ACCESS_MOCK_LOCATION",e.ACCESS_NETWORK_STATE="android.permission.ACCESS_NETWORK_STATE",e.ACCESS_SURFACE_FLINGER="android.permission.ACCESS_SURFACE_FLINGER",e.ACCESS_WIFI_STATE="android.permission.ACCESS_WIFI_STATE",e.ACCOUNT_MANAGER="android.permission.ACCOUNT_MANAGER",e.ADD_VOICEMAIL="com.android.voicemail.permission.ADD_VOICEMAIL",e.AUTHENTICATE_ACCOUNTS="android.permission.AUTHENTICATE_ACCOUNTS",e.BATTERY_STATS="android.permission.BATTERY_STATS",e.BIND_ACCESSIBILITY_SERVICE="android.permission.BIND_ACCESSIBILITY_SERVICE",e.BIND_APPWIDGET="android.permission.BIND_APPWIDGET",e.BIND_CARRIER_MESSAGING_SERVICE="android.permission.BIND_CARRIER_MESSAGING_SERVICE",e.BIND_DEVICE_ADMIN="android.permission.BIND_DEVICE_ADMIN",e.BIND_DREAM_SERVICE="android.permission.BIND_DREAM_SERVICE",e.BIND_INPUT_METHOD="android.permission.BIND_INPUT_METHOD",e.BIND_NFC_SERVICE="android.permission.BIND_NFC_SERVICE",e.BIND_NOTIFICATION_LISTENER_SERVICE="android.permission.BIND_NOTIFICATION_LISTENER_SERVICE",e.BIND_PRINT_SERVICE="android.permission.BIND_PRINT_SERVICE",e.BIND_REMOTEVIEWS="android.permission.BIND_REMOTEVIEWS",e.BIND_TEXT_SERVICE="android.permission.BIND_TEXT_SERVICE",e.BIND_TV_INPUT="android.permission.BIND_TV_INPUT",e.BIND_VOICE_INTERACTION="android.permission.BIND_VOICE_INTERACTION",e.BIND_VPN_SERVICE="android.permission.BIND_VPN_SERVICE",e.BIND_WALLPAPER="android.permission.BIND_WALLPAPER",e.BLUETOOTH="android.permission.BLUETOOTH",e.BLUETOOTH_ADMIN="android.permission.BLUETOOTH_ADMIN",e.BLUETOOTH_PRIVILEGED="android.permission.BLUETOOTH_PRIVILEGED",e.BODY_SENSORS="android.permission.BODY_SENSORS",e.BRICK="android.permission.BRICK",e.BROADCAST_PACKAGE_REMOVED="android.permission.BROADCAST_PACKAGE_REMOVED",e.BROADCAST_SMS="android.permission.BROADCAST_SMS",e.BROADCAST_STICKY="android.permission.BROADCAST_STICKY",e.BROADCAST_WAP_PUSH="android.permission.BROADCAST_WAP_PUSH",e.CALL_PHONE="android.permission.CALL_PHONE",e.CALL_PRIVILEGED="android.permission.CALL_PRIVILEGED",e.CAMERA="android.permission.CAMERA",e.CAPTURE_AUDIO_OUTPUT="android.permission.CAPTURE_AUDIO_OUTPUT",e.CAPTURE_SECURE_VIDEO_OUTPUT="android.permission.CAPTURE_SECURE_VIDEO_OUTPUT",e.CAPTURE_VIDEO_OUTPUT="android.permission.CAPTURE_VIDEO_OUTPUT",e.CHANGE_COMPONENT_ENABLED_STATE="android.permission.CHANGE_COMPONENT_ENABLED_STATE",e.CHANGE_CONFIGURATION="android.permission.CHANGE_CONFIGURATION",e.CHANGE_NETWORK_STATE="android.permission.CHANGE_NETWORK_STATE",e.CHANGE_WIFI_MULTICAST_STATE="android.permission.CHANGE_WIFI_MULTICAST_STATE",e.CHANGE_WIFI_STATE="android.permission.CHANGE_WIFI_STATE",e.CLEAR_APP_CACHE="android.permission.CLEAR_APP_CACHE",e.CLEAR_APP_USER_DATA="android.permission.CLEAR_APP_USER_DATA",e.CONTROL_LOCATION_UPDATES="android.permission.CONTROL_LOCATION_UPDATES",e.DELETE_CACHE_FILES="android.permission.DELETE_CACHE_FILES",e.DELETE_PACKAGES="android.permission.DELETE_PACKAGES",e.DEVICE_POWER="android.permission.DEVICE_POWER",e.DIAGNOSTIC="android.permission.DIAGNOSTIC",e.DISABLE_KEYGUARD="android.permission.DISABLE_KEYGUARD",e.DUMP="android.permission.DUMP",e.EXPAND_STATUS_BAR="android.permission.EXPAND_STATUS_BAR",e.FACTORY_TEST="android.permission.FACTORY_TEST",e.FLASHLIGHT="android.permission.FLASHLIGHT",e.FORCE_BACK="android.permission.FORCE_BACK",e.GET_ACCOUNTS="android.permission.GET_ACCOUNTS",e.GET_PACKAGE_SIZE="android.permission.GET_PACKAGE_SIZE",e.GET_TASKS="android.permission.GET_TASKS",e.GET_TOP_ACTIVITY_INFO="android.permission.GET_TOP_ACTIVITY_INFO",e.GLOBAL_SEARCH="android.permission.GLOBAL_SEARCH",e.HARDWARE_TEST="android.permission.HARDWARE_TEST",e.INJECT_EVENTS="android.permission.INJECT_EVENTS",e.INSTALL_LOCATION_PROVIDER="android.permission.INSTALL_LOCATION_PROVIDER",e.INSTALL_PACKAGES="android.permission.INSTALL_PACKAGES",e.INSTALL_SHORTCUT="com.android.launcher.permission.INSTALL_SHORTCUT",e.INTERNAL_SYSTEM_WINDOW="android.permission.INTERNAL_SYSTEM_WINDOW",e.INTERNET="android.permission.INTERNET",e.KILL_BACKGROUND_PROCESSES="android.permission.KILL_BACKGROUND_PROCESSES",e.LOCATION_HARDWARE="android.permission.LOCATION_HARDWARE",e.MANAGE_ACCOUNTS="android.permission.MANAGE_ACCOUNTS",e.MANAGE_APP_TOKENS="android.permission.MANAGE_APP_TOKENS",e.MANAGE_DOCUMENTS="android.permission.MANAGE_DOCUMENTS",e.MASTER_CLEAR="android.permission.MASTER_CLEAR",e.MEDIA_CONTENT_CONTROL="android.permission.MEDIA_CONTENT_CONTROL",e.MODIFY_AUDIO_SETTINGS="android.permission.MODIFY_AUDIO_SETTINGS",e.MODIFY_PHONE_STATE="android.permission.MODIFY_PHONE_STATE",e.MOUNT_FORMAT_FILESYSTEMS="android.permission.MOUNT_FORMAT_FILESYSTEMS",e.MOUNT_UNMOUNT_FILESYSTEMS="android.permission.MOUNT_UNMOUNT_FILESYSTEMS",e.NFC="android.permission.NFC",e.PERSISTENT_ACTIVITY="android.permission.PERSISTENT_ACTIVITY",e.PROCESS_OUTGOING_CALLS="android.permission.PROCESS_OUTGOING_CALLS",e.READ_CALENDAR="android.permission.READ_CALENDAR",e.READ_CALL_LOG="android.permission.READ_CALL_LOG",e.READ_CONTACTS="android.permission.READ_CONTACTS",e.READ_EXTERNAL_STORAGE="android.permission.READ_EXTERNAL_STORAGE",e.READ_FRAME_BUFFER="android.permission.READ_FRAME_BUFFER",e.READ_HISTORY_BOOKMARKS="com.android.browser.permission.READ_HISTORY_BOOKMARKS",e.READ_INPUT_STATE="android.permission.READ_INPUT_STATE",e.READ_LOGS="android.permission.READ_LOGS",e.READ_PHONE_STATE="android.permission.READ_PHONE_STATE",e.READ_PROFILE="android.permission.READ_PROFILE",e.READ_SMS="android.permission.READ_SMS",e.READ_SOCIAL_STREAM="android.permission.READ_SOCIAL_STREAM",e.READ_SYNC_SETTINGS="android.permission.READ_SYNC_SETTINGS",e.READ_SYNC_STATS="android.permission.READ_SYNC_STATS",e.READ_USER_DICTIONARY="android.permission.READ_USER_DICTIONARY",e.READ_VOICEMAIL="com.android.voicemail.permission.READ_VOICEMAIL",e.REBOOT="android.permission.REBOOT",e.RECEIVE_BOOT_COMPLETED="android.permission.RECEIVE_BOOT_COMPLETED",e.RECEIVE_MMS="android.permission.RECEIVE_MMS",e.RECEIVE_SMS="android.permission.RECEIVE_SMS",e.RECEIVE_WAP_PUSH="android.permission.RECEIVE_WAP_PUSH",e.RECORD_AUDIO="android.permission.RECORD_AUDIO",e.REORDER_TASKS="android.permission.REORDER_TASKS",e.RESTART_PACKAGES="android.permission.RESTART_PACKAGES",e.SEND_RESPOND_VIA_MESSAGE="android.permission.SEND_RESPOND_VIA_MESSAGE",e.SEND_SMS="android.permission.SEND_SMS",e.SET_ACTIVITY_WATCHER="android.permission.SET_ACTIVITY_WATCHER",e.SET_ALARM="com.android.alarm.permission.SET_ALARM",e.SET_ALWAYS_FINISH="android.permission.SET_ALWAYS_FINISH",e.SET_ANIMATION_SCALE="android.permission.SET_ANIMATION_SCALE",e.SET_DEBUG_APP="android.permission.SET_DEBUG_APP",e.SET_ORIENTATION="android.permission.SET_ORIENTATION",e.SET_POINTER_SPEED="android.permission.SET_POINTER_SPEED",e.SET_PREFERRED_APPLICATIONS="android.permission.SET_PREFERRED_APPLICATIONS",e.SET_PROCESS_LIMIT="android.permission.SET_PROCESS_LIMIT",e.SET_TIME="android.permission.SET_TIME",e.SET_TIME_ZONE="android.permission.SET_TIME_ZONE",e.SET_WALLPAPER="android.permission.SET_WALLPAPER",e.SET_WALLPAPER_HINTS="android.permission.SET_WALLPAPER_HINTS",e.SIGNAL_PERSISTENT_PROCESSES="android.permission.SIGNAL_PERSISTENT_PROCESSES",e.STATUS_BAR="android.permission.STATUS_BAR",e.SUBSCRIBED_FEEDS_READ="android.permission.SUBSCRIBED_FEEDS_READ",e.SUBSCRIBED_FEEDS_WRITE="android.permission.SUBSCRIBED_FEEDS_WRITE",e.SYSTEM_ALERT_WINDOW="android.permission.SYSTEM_ALERT_WINDOW",e.TRANSMIT_IR="android.permission.TRANSMIT_IR",e.UNINSTALL_SHORTCUT="com.android.launcher.permission.UNINSTALL_SHORTCUT",e.UPDATE_DEVICE_STATS="android.permission.UPDATE_DEVICE_STATS",e.USE_CREDENTIALS="android.permission.USE_CREDENTIALS",e.USE_SIP="android.permission.USE_SIP",e.VIBRATE="android.permission.VIBRATE",e.WAKE_LOCK="android.permission.WAKE_LOCK",e.WRITE_APN_SETTINGS="android.permission.WRITE_APN_SETTINGS",e.WRITE_CALENDAR="android.permission.WRITE_CALENDAR",e.WRITE_CALL_LOG="android.permission.WRITE_CALL_LOG",e.WRITE_CONTACTS="android.permission.WRITE_CONTACTS",e.WRITE_EXTERNAL_STORAGE="android.permission.WRITE_EXTERNAL_STORAGE",e.WRITE_GSERVICES="android.permission.WRITE_GSERVICES",e.WRITE_HISTORY_BOOKMARKS="com.android.browser.permission.WRITE_HISTORY_BOOKMARKS",e.WRITE_PROFILE="android.permission.WRITE_PROFILE",e.WRITE_SECURE_SETTINGS="android.permission.WRITE_SECURE_SETTINGS",e.WRITE_SETTINGS="android.permission.WRITE_SETTINGS",e.WRITE_SMS="android.permission.WRITE_SMS",e.WRITE_SOCIAL_STREAM="android.permission.WRITE_SOCIAL_STREAM",e.WRITE_SYNC_SETTINGS="android.permission.WRITE_SYNC_SETTINGS",e.WRITE_USER_DICTIONARY="android.permission.WRITE_USER_DICTIONARY",e.WRITE_VOICEMAIL="com.android.voicemail.permission.WRITE_VOICEMAIL",e}({}),Hc=function(){function e(){this.plugin=window.cordova.plugins.permissions}return e.prototype.checkPermission=function(e){var t=this;return new Promise(function(n,i){t.plugin.hasPermission(e,function(t){n(t[e])},i)})},e.prototype.requestPermission=function(e){var t=this;return new Promise(function(n,i){t.plugin.requestPermission(e,function(e){n(e.hasPermission)},i)})},e.prototype.requestPermissions=function(e){return null},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),Kc=function(){function e(e){var t=this;this.permission=e,this.responseSubject=new xn.a,console.log(window.plugins,window.cordova,window.cordova.plugins),this.plugin=bluetoothSerial,this.response$=this.responseSubject.asObservable(),this.subscribeRawData=function(e){t.responseSubject.next(e)}}return e.prototype.discover=function(e){return Object(u.b)(this,void 0,void 0,function(){var e=this;return Object(u.d)(this,function(t){switch(t.label){case 0:return console.log("discover$"),[4,this.permission.requestPermission(Vc.BLUETOOTH)];case 1:if(!t.sent())throw new Error("deny");return console.log(Vc.BLUETOOTH,"OK"),[4,new Promise(function(t,n){return e.plugin.list(function(e){console.log("discover",JSON.stringify(e)),t(e)},function(e){console.log("discover",JSON.stringify(e)),n(e)})})];case 2:return[2,t.sent()]}})})},e.prototype.connect=function(e){return Object(u.b)(this,void 0,void 0,function(){var t=this;return Object(u.d)(this,function(n){switch(n.label){case 0:return console.log("connect$",e),[4,new Promise(function(n,i){return t.plugin.connectInsecure(e.address,function(e){console.log("connect",JSON.stringify(e)),n()},function(e){console.log("connect",JSON.stringify(e)),i(e)})})];case 1:return n.sent(),this.plugin.subscribeRawData(this.subscribeRawData),[2]}})})},e.prototype.disconnect=function(){return Object(u.b)(this,void 0,void 0,function(){var e=this;return Object(u.d)(this,function(t){switch(t.label){case 0:return console.log("disconnect$"),[4,new Promise(function(t,n){return e.plugin.unsubscribeRawData(function(e){console.log("unsubscribe",JSON.stringify(e)),t()},function(e){console.log("unsubscribe",JSON.stringify(e)),n(e)})})];case 1:return t.sent(),[4,new Promise(function(t,n){return e.plugin.disconnect(function(e){console.log("disconnect",JSON.stringify(e)),t()},function(e){console.log("disconnect",JSON.stringify(e)),n(e)})})];case 2:return t.sent(),[2]}})})},e.prototype.send=function(e){var t=this;return new Promise(function(n,i){return t.plugin.write(e,function(e){console.log("send success",JSON.stringify(e)),n()},function(e){console.log("send error",JSON.stringify(e)),i(e)})})},e.\u0275fac=function(t){return new(t||e)(i.Xb(Hc))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Wc=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[Hc,{provide:io,useClass:Kc}]}),e}(),Yc=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[Object(u.f)([Wc])]}),e}(),Xc=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[fo],imports:[[bn.c,Yc]]}),e}(),zc=n("R1ws"),qc=n("tk/3"),Jc=n("DKVz"),Qc=function(e){return e.INIT="[Monitor] Init",e.UPDATE_TEMP="[Monitor] Update temp",e.UPDATE_FLOW="[Monitor] Update flow",e}({}),Zc=function(){return function(){this.type=Qc.INIT}}(),er=function(){return function(e){this.payload=e,this.type=Qc.UPDATE_TEMP}}(),tr=function(){return function(e){this.payload=e,this.type=Qc.UPDATE_FLOW}}(),nr={temp:{xData:[],yData:[]},flow:{xData:[],yData:[]}},ir=function(e){return e.monitor.temp},or=function(e){return e.monitor.flow};function cr(e,t){switch(void 0===e&&(e=nr),t.type){case Qc.UPDATE_TEMP:return function(e,t){return Object(u.a)(Object(u.a)({},e),{temp:t})}(e,t.payload);case Qc.UPDATE_FLOW:return function(e,t){return Object(u.a)(Object(u.a)({},e),{flow:t})}(e,t.payload);default:return e}}var rr=[{path:"monitor",component:function(){function e(e){var t=this;this.store=e,this.tempOptions$=this.store.pipe(Object(p.h)(ir)).pipe(Object(at.a)(function(e){return t.getTempOptions(e)})),this.flowOptions$=this.store.pipe(Object(p.h)(or)).pipe(Object(at.a)(function(e){return t.getFlowOptions(e)}))}return e.prototype.ngOnInit=function(){this.store.dispatch(new Zc)},e.prototype.getTempOptions=function(e){return{color:["#1edb13"],title:{show:!0,text:"Temperature \u2103"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataZoom:{show:!0,realtime:!0,zoomLock:!0,start:80,end:100},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:e.xData,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"Counters",type:"line",barWidth:"60%",data:e.yData}]}},e.prototype.getFlowOptions=function(e){return{color:["#3398DB"],title:{show:!0,text:"Flow mL/min"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataZoom:{show:!0,realtime:!0,zoomLock:!0,start:80,end:100},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:e.xData,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"mL/min",type:"line",barWidth:"60%",data:e.yData}]}},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-monitor"]],decls:4,vars:6,consts:[["echarts","",1,"temp-chart",3,"options"]],template:function(e,t){1&e&&(i.Ob(0,"div",0),i.fc(1,"async"),i.Ob(2,"div",0),i.fc(3,"async")),2&e&&(i.kc("options",i.gc(1,2,t.tempOptions$)),i.Bb(2),i.kc("options",i.gc(3,4,t.flowOptions$)))},directives:[Jc.b],pipes:[bn.b],styles:[".temp-chart[_ngcontent-%COMP%]{height:300px}"],changeDetection:0}),e}(),data:{title:"Monitor",actions:["menu","bt","sync"]}}],ar=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(rr)],r.e]}),e}(),sr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,ar,In,Jc.a]]}),e}(),ur=n("Jho9"),pr=n("bSwM"),lr=n("8yBR"),br=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,hn.b,mn.b,pr.b,Fc.f,lr.a]]}),e}(),dr=n("vxfF"),fr=n("SxV6");function mr(e,t){if(1&e){var n=i.Ub();i.Tb(0,"div"),i.Tb(1,"button",6),i.ac("click",function(){i.sc(n);var e=t.$implicit;return i.ec().onExpand(e)}),i.Ob(2,"mat-icon",7),i.Sb(),i.Tb(3,"mat-checkbox",8),i.ac("change",function(){i.sc(n);var e=t.$implicit;return i.ec().onSelect(e)}),i.Cc(4),i.Sb(),i.Sb()}if(2&e){var o=t.$implicit;i.Db("app-tree-padding-"+o.level),i.Fb("d-none",!o.visible),i.Bb(1),i.Fb("invisible",!o.expandable),i.Cb("aria-label","toggle "+o.title),i.Bb(1),i.kc("svgIcon",o.expanded?"chevron-down":"chevron-right"),i.Bb(1),i.kc("checked",o.selected)("indeterminate",null===o.selected),i.Bb(1),i.Ec(" ",o.title," ")}}var hr=function(){function e(e,t){var n=this;this.store=e,this.dialogRef=t,this.filter$=this.store.pipe(Object(p.h)(Yt)),this.store.pipe(Object(p.h)(Yt),Object(fr.a)()).subscribe(function(e){return n.initialFilter=e})}return e.prototype.onSelect=function(e){this.store.dispatch(new Vt(e))},e.prototype.onExpand=function(e){this.store.dispatch(new Ht(e))},e.prototype.onReset=function(){this.store.dispatch(new Gt)},e.prototype.onApply=function(){this.dialogRef.close()},e.prototype.onCancel=function(){var e=this;this.dialogRef.close(),setTimeout(function(){return e.store.dispatch(new $t(e.initialFilter))})},e.prototype.trackBy=function(e){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(Fc.g))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-log-filter"]],decls:12,vars:4,consts:[["mat-dialog-title",""],[1,"pb-2"],[3,"class","d-none",4,"ngFor","ngForOf","ngForTrackBy"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",3,"click"],["mat-button","",3,"click"],["mat-icon-button","",3,"click"],[1,"mat-icon-rtl-mirror",3,"svgIcon"],[1,"align-middle",3,"checked","indeterminate","change"]],template:function(e,t){1&e&&(i.Tb(0,"h1",0),i.Cc(1,"Log filter"),i.Sb(),i.Tb(2,"mat-dialog-content",1),i.Ac(3,mr,5,11,"div",2),i.fc(4,"async"),i.Sb(),i.Tb(5,"div",3),i.Tb(6,"button",4),i.ac("click",function(){return t.onCancel()}),i.Cc(7,"Cancel"),i.Sb(),i.Tb(8,"button",5),i.ac("click",function(){return t.onReset()}),i.Cc(9,"Reset"),i.Sb(),i.Tb(10,"button",5),i.ac("click",function(){return t.onApply()}),i.Cc(11,"Apply"),i.Sb(),i.Sb()),2&e&&(i.Bb(3),i.kc("ngForOf",i.gc(4,2,t.filter$))("ngForTrackBy",t.trackBy))},directives:[Fc.h,Fc.e,bn.l,Fc.c,mn.a,hn.a,pr.a],pipes:[bn.b],styles:["[_nghost-%COMP%]     .mat-checkbox-layout{margin-bottom:0}.app-tree-padding-0[_ngcontent-%COMP%]{padding-left:0}.app-tree-padding-1[_ngcontent-%COMP%]{padding-left:1em}.app-tree-padding-2[_ngcontent-%COMP%]{padding-left:2em}"],changeDetection:0}),e}();function gr(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",5),i.ac("click",function(){return i.sc(n),i.ec().onFilterReset()}),i.Ob(1,"mat-icon",6),i.Sb()}}function yr(e,t){if(1&e&&(i.Tb(0,"div"),i.Cc(1),i.fc(2,"date"),i.Ob(3,"mat-icon",7),i.Cc(4),i.Sb()),2&e){var n=t.$implicit;i.Bb(1),i.Ec(" ",i.hc(2,3,n.time,"HH:mm:ss")," "),i.Bb(2),i.kc("svgIcon",n.icon),i.Bb(1),i.Ec(" ",n.text," ")}}var Or=[{path:"log",component:function(){function e(e,t,n){this.store=e,this.actions=t,this.dialog=n,this.destroy$=new xn.a}return e.prototype.ngOnInit=function(){this.log$=this.store.pipe(Object(p.h)(zt)),this.hasFilter$=this.store.pipe(Object(p.h)(Xt))},e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.onFilter=function(){var e=this;this.dialog.open(hr).afterClosed().subscribe(function(t){t&&e.store.dispatch(new $t(t))})},e.prototype.onFilterReset=function(){this.store.dispatch(new Gt)},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(Rn.a),i.Nb(Fc.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-log"]],decls:9,vars:6,consts:[["mat-button","",1,"mt-1",3,"click"],["svgIcon","filter-outline",1,"align-middle"],["mat-icon-button","",3,"click",4,"ngIf"],["itemSize","24",1,"flex-fill"],[4,"cdkVirtualFor","cdkVirtualForOf"],["mat-icon-button","",3,"click"],["svgIcon","close-circle-outline"],[3,"svgIcon"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Tb(1,"button",0),i.ac("click",function(){return t.onFilter()}),i.Ob(2,"mat-icon",1),i.Cc(3," Filters... "),i.Sb(),i.Ac(4,gr,2,0,"button",2),i.fc(5,"async"),i.Sb(),i.Tb(6,"cdk-virtual-scroll-viewport",3),i.Ac(7,yr,5,6,"div",4),i.fc(8,"async"),i.Sb()),2&e&&(i.Bb(4),i.kc("ngIf",i.gc(5,2,t.hasFilter$)),i.Bb(3),i.kc("cdkVirtualForOf",i.gc(8,4,t.log$)))},directives:[mn.a,hn.a,bn.m,dr.e,dr.a,dr.d],pipes:[bn.b,bn.e],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0}"],changeDetection:0}),e}(),data:{title:"Log",actions:["menu","bt","sync"]}}],Sr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(Or)],r.e]}),e}(),vr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Sr,In,hn.b,mn.b,dr.g,br]]}),e}(),Tr=n("XqQ8"),Cr=n("P0+2"),Er=function(){function e(){}return e.prototype.init=function(){return Object(u.b)(this,void 0,void 0,function(){var e;return Object(u.d)(this,function(t){switch(t.label){case 0:return e=this,[4,Object(Cr.a)("grow-control-db4",1,{upgrade:function(e){e.createObjectStore("temp"),e.createObjectStore("flow"),e.createObjectStore("accessControlCamshot"),e.createObjectStore("accessControlEpisode")}})];case 1:return e.db=t.sent(),[2]}})})},e.prototype.logTemp=function(e){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(t){switch(t.label){case 0:return[4,this.db.put("temp",e,(new Date).toISOString())];case 1:return t.sent(),[2]}})})},e.prototype.getTemp=function(){return Object(u.b)(this,void 0,void 0,function(){var e;return Object(u.d)(this,function(t){switch(t.label){case 0:return e={},[4,this.db.getAllKeys("temp")];case 1:return e.xData=t.sent(),[4,this.db.getAll("temp")];case 2:return[2,(e.yData=t.sent(),e)]}})})},e.prototype.logFlow=function(e){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(t){switch(t.label){case 0:return[4,this.db.put("flow",e,(new Date).toISOString())];case 1:return t.sent(),[2]}})})},e.prototype.getFlow=function(){return Object(u.b)(this,void 0,void 0,function(){var e;return Object(u.d)(this,function(t){switch(t.label){case 0:return e={},[4,this.db.getAllKeys("flow")];case 1:return e.xData=t.sent(),[4,this.db.getAll("flow")];case 2:return[2,(e.yData=t.sent(),e)]}})})},e.prototype.logAccessControl=function(e,t){return Object(u.b)(this,void 0,void 0,function(){var n;return Object(u.d)(this,function(i){switch(i.label){case 0:return(n=this.db.transaction(["accessControlCamshot","accessControlEpisode"],"readwrite")).objectStore("accessControlEpisode").put({lastKey:t.key},e),n.objectStore("accessControlCamshot").put(t.value,t.key),[4,n.done];case 1:return i.sent(),[2]}})})},e.prototype.getAccessControlEpisode=function(){return Object(u.b)(this,void 0,void 0,function(){var e,t;return Object(u.d)(this,function(n){switch(n.label){case 0:return[4,this.db.getAllKeys("accessControlEpisode")];case 1:return e=n.sent(),[4,this.db.getAll("accessControlEpisode")];case 2:return t=n.sent(),[2,e.map(function(e,n){return{key:e,value:t[n]}}).sort(function(e,t){return t.key-e.key})]}})})},e.prototype.getAccessControlEpisodeKeys=function(e){return Object(u.b)(this,void 0,void 0,function(){var t,n,i;return Object(u.d)(this,function(o){switch(o.label){case 0:return t=IDBKeyRange.bound(e.key,e.value.lastKey),[4,this.db.transaction(["accessControlCamshot"],"readonly").objectStore("accessControlCamshot").openCursor(t)];case 1:n=o.sent(),i=[],o.label=2;case 2:return n?(i.push(n.key),[4,n.continue()]):[3,4];case 3:return n=o.sent(),[3,2];case 4:return[2,i]}})})},e.prototype.getAccessControlCamshot=function(e){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(t){switch(t.label){case 0:return[4,this.db.get("accessControlCamshot",e)];case 1:return[2,t.sent()]}})})},e.prototype.getAccessControlCamshotNext=function(e){return Object(u.b)(this,void 0,void 0,function(){var t,n;return Object(u.d)(this,function(i){switch(i.label){case 0:return t=IDBKeyRange.lowerBound(e,!0),[4,this.db.transaction(["accessControlCamshot"],"readonly").objectStore("accessControlCamshot").openCursor(t)];case 1:return[2,{key:(n=i.sent()).key,value:n.value}]}})})},e.prototype.getAccessControlCamshotPrev=function(e){return Object(u.b)(this,void 0,void 0,function(){var t,n;return Object(u.d)(this,function(i){switch(i.label){case 0:return t=IDBKeyRange.upperBound(e,!0),[4,this.db.transaction(["accessControlCamshot"],"readonly").objectStore("accessControlCamshot").openCursor(t)];case 1:return[2,{key:(n=i.sent()).key,value:n.value}]}})})},e.prototype.clear=function(e){return Object(u.b)(this,void 0,void 0,function(){var t=this;return Object(u.d)(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(e){return t.db.clear(e)}))];case 1:return n.sent(),[2]}})})},e.prototype.getTableSize=function(e){return Object(u.b)(this,void 0,void 0,function(){var t,n,i;return Object(u.d)(this,function(o){switch(o.label){case 0:return t=0,n=0,[4,this.db.transaction(e).store.openCursor()];case 1:i=o.sent(),o.label=2;case 2:return i?(t+=JSON.stringify(i.value).length,t+=JSON.stringify(i.key).length,n++,[4,i.continue()]):[3,4];case 3:return i=o.sent(),[3,2];case 4:return[2,{name:e,size:t,count:n}]}})})},e.prototype.getDatabaseSize=function(){return Object(u.b)(this,void 0,void 0,function(){var e,t,n,i=this;return Object(u.d)(this,function(o){switch(o.label){case 0:return e=Array.from(this.db.objectStoreNames),[4,Promise.all(e.map(function(e){return i.getTableSize(e)}))];case 1:return t=o.sent(),(n=t).push({name:"total",size:t.reduce(function(e,t){return e+t.size},0),count:t.reduce(function(e,t){return e+t.count},0)}),[2,n]}})})},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}(),jr=function(){function e(e,t,n,i){this.actions$=e,this.store=t,this.storage=n,this.db=i}return e.prototype.init=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(He.INIT)).pipe(Object(Yi.a)(function(){return Object(Gi.a)(Object($i.a)(new We(e.storage.loadConfig())),e.store.pipe(Object(p.h)(Ze)).pipe(Object(Xi.a)(300)).pipe(Object(zi.a)(function(t){return e.storage.saveConfig(t)})).pipe(Object(qi.a)(function(){return Vi.a})))}))},e.prototype.updateSize=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(He.UPDATE_DATABASE_SIZES)).pipe(Object(Tr.a)(function(){return Object(Hi.a)(e.db.getDatabaseSize())})).pipe(Object(at.a)(function(e){return new ze(e)}))},e.prototype.clear=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(He.CLEAR_DATABASE),Object(Tr.a)(function(t){return Object(Hi.a)(e.db.clear(t.payload)).pipe(Object(at.a)(function(){return t.payload}))}),Object(Ji.a)(this.store.pipe(Object(p.h)(tt))),Object(at.a)(function(e){var t=e[0];return new ze(e[1].map(function(e){return t.includes(e.name)?{name:e.name,size:0,count:0}:e}))}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(Rn.a),i.Xb(p.b),i.Xb(no),i.Xb(Er))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"init",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"updateSize",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"clear",null),e}(),Ar=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,p.d.forFeature("config",ct),Rn.c.forFeature([jr])]]}),e}(),wr=function(){function e(){}return e.prototype.transform=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(t={})[Symbol.iterator]=function(){var t;return Object(u.d)(this,function(n){switch(n.label){case 0:t=0,n.label=1;case 1:return t<e?[4,t]:[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}})},t},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"times",type:e,pure:!0}),e}();function Ir(e,t){if(1&e&&(i.Tb(0,"mat-radio-button",7),i.Cc(1),i.Sb()),2&e){var n=t.$implicit;i.kc("value",n),i.Bb(1),i.Ec(" ",n+1," ")}}var Dr=function(){function e(e,t){this.dialogRef=e,this.data=t,this.count=t.count,this.index=0}return e.prototype.onCancel=function(){this.dialogRef.close()},e.prototype.onSelect=function(){this.dialogRef.close(this.index)},e.prototype.onChange=function(e){this.index=e},e.\u0275fac=function(t){return new(t||e)(i.Nb(Fc.g),i.Nb(Fc.a))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-select-index"]],inputs:{count:"count",index:"index"},decls:11,vars:5,consts:[["mat-dialog-title",""],[1,"pt-2"],[3,"value","change"],["class","mr-3",3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["cdkFocusInitial","","mat-button","",3,"click"],["mat-button","",3,"click"],[1,"mr-3",3,"value"]],template:function(e,t){1&e&&(i.Tb(0,"h1",0),i.Cc(1),i.Sb(),i.Tb(2,"mat-dialog-content",1),i.Tb(3,"mat-radio-group",2),i.ac("change",function(e){return t.onChange(e.value)}),i.Ac(4,Ir,2,2,"mat-radio-button",3),i.fc(5,"times"),i.Sb(),i.Sb(),i.Tb(6,"div",4),i.Tb(7,"button",5),i.ac("click",function(){return t.onCancel()}),i.Cc(8,"Cancel"),i.Sb(),i.Tb(9,"button",6),i.ac("click",function(){return t.onSelect()}),i.Cc(10,"Select"),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.Dc(t.data.title||"Select index number"),i.Bb(2),i.kc("value",t.index),i.Bb(1),i.kc("ngForOf",i.gc(5,3,t.count)))},directives:[Fc.h,Fc.e,Uc.b,bn.l,Fc.c,mn.a,Uc.a],pipes:[wr],styles:[".mat-dialog-content[_ngcontent-%COMP%]{min-height:4em}"],changeDetection:0}),e}(),_r=function(){function e(e){this.dialog=e}return e.prototype.select=function(e){return this.dialog.open(Dr,{data:e}).afterClosed()},e.\u0275fac=function(t){return new(t||e)(i.Xb(Fc.b))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),e}(),xr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[_r],imports:[[bn.c,Fc.f,mn.b,Uc.c,$c.b,Dn]]}),e}(),kr=n("3E0/"),Pr=n("2Vo4"),Nr=function(){function e(e,t){this.store=e,this.actions=t,this.enableSubject=new Pr.a(!1)}return e.prototype.init=function(){var e=this;this.actions.pipe(Object(Rn.d)(pt.REQUEST)).pipe(Object(Ji.a)(this.enableSubject.asObservable())).pipe(Object(rt.a)(function(e){return e[1]})).pipe(Object(at.a)(function(e){return e[0].payload})).pipe(Object(qi.a)(function(e){return e.type===Pt.getTemp?Object($i.a)(new mt({type:Nt.temp,payload:{value:50*Math.random()}})).pipe(Object(kr.a)(1e3)):e.type===Pt.getStatus?Object($i.a)(new mt({type:Nt.status,payload:{state:Rt.fertigate,cmdState:Mt.irrigate,valve:0,flow:1200*Math.random(),volume:0,totalVolume:0,mix:0,doseId:0,valveId:0}})).pipe(Object(kr.a)(1e3)):Vi.a})).subscribe(function(t){e.store.dispatch(t)})},e.prototype.enable=function(e){this.enableSubject.next(e)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this.enableSubject.value},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(i.Xb(p.b),i.Xb(Rn.a))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Rr=function(){function e(){this.constraints={qvga:{width:{exact:320},height:{exact:240}},vga:{width:{exact:640},height:{exact:480}}},this.onInactive=function(){console.error("media loss")}}return e.prototype.start=function(e,t){return Object(u.b)(this,void 0,void 0,function(){var n,i,o,c;return Object(u.d)(this,function(r){switch(r.label){case 0:n=this.constraints[e],(i=document.getElementById(t))||((i=document.createElement("video")).width=n.width.exact,i.height=n.height.exact),this.video=i,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,navigator.mediaDevices.getUserMedia({video:n,audio:!1})];case 2:return o=r.sent(),i.srcObject=o,i.play(),this.video=i,this.stream=o,[4,new Promise(function(e){var t=function(){i.removeEventListener("canplay",t),e()};i.addEventListener("canplay",t,!1)})];case 3:return r.sent(),console.log("camera ready"),[3,5];case 4:return c=r.sent(),console.error("Camera Error: "+c.name+" "+c.message),[3,5];case 5:return[2]}})})},e.prototype.stop=function(){this.video&&(this.video.pause(),this.video.srcObject=null),this.stream&&this.stream.getVideoTracks()[0].stop()},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}(),Mr=new i.r("OpenCV config object token"),Lr=function(){function e(e,t){this.zone=t,this.cvState=new Pr.a({ready:!1,error:!1,loading:!0,state:"loading"}),e||(e={}),this.configModule=this.generateConfigModule(e),this.loadOpenCv()}return e.prototype.loadOpenCv=function(){var e=this;this.cvState.next(this.newState("loading")),window.Module=this.configModule;var t=document.createElement("script");t.setAttribute("async",""),t.setAttribute("type","text/javascript"),t.addEventListener("error",function(){var t=new Error("Failed to load "+e.configModule.scriptUrl);e.cvState.next(e.newState("error")),e.cvState.error(t)},{passive:!0}),t.src=this.configModule.scriptUrl;var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):document.head.appendChild(t)},e.prototype.newState=function(e){var t={ready:!1,loading:!1,error:!1,state:""};return Object.keys(t).forEach(function(n){"state"!==n&&(n===e?(t[n]=!0,t.state=n):t[n]=!1)}),t},e.prototype.generateConfigModule=function(e){var t=this;return{scriptUrl:e.openCVDirPath?e.openCVDirPath+"/opencv.js":"/assets/opencv/opencv.js",wasmBinaryFile:"opencv_js.wasm",usingWasm:!1,onRuntimeInitialized:function(){t.zone.run(function(){console.log("openCV Ready"),t.cvState.next(t.newState("ready"))})}}},e.\u0275fac=function(t){return new(t||e)(i.Xb(Mr),i.Xb(i.A))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Br=function(){function e(){this.frameSubject=new xn.a,this.frame$=this.frameSubject.asObservable()}return e.prototype.start=function(){this.frameDelta=new cv.Mat,this.M=cv.Mat.ones(5,5,cv.CV_8U),this.ksize=new cv.Size(3,3),this.anchor=new cv.Point(-1,-1),this.contours=new cv.MatVector,this.hierarchy=new cv.Mat},e.prototype.process=function(e,t){cv.absdiff(e,t,this.frameDelta),cv.threshold(this.frameDelta,this.frameDelta,25,255,cv.THRESH_BINARY),cv.erode(this.frameDelta,this.frameDelta,this.M,this.anchor,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue()),cv.dilate(this.frameDelta,this.frameDelta,this.M,this.anchor,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue()),cv.findContours(this.frameDelta,this.contours,this.hierarchy,cv.RETR_CCOMP,cv.CHAIN_APPROX_SIMPLE);for(var n=0;n<this.contours.size();n++)if(!(cv.contourArea(this.contours.get(n),!1)<500))return!0;return this.frameSubject.next(this.frameDelta),!1},e.prototype.preprocess=function(e,t){cv.cvtColor(e,t,cv.COLOR_RGBA2GRAY,0),cv.GaussianBlur(t,t,this.ksize,0,0,cv.BORDER_DEFAULT)},e.prototype.stop=function(){this.frameDelta.delete(),this.M.delete(),this.contours.delete(),this.hierarchy.delete()},e}(),Fr=function(){function e(e,t){this.camera=e,this.openCv=t,this.strategy=new Br,this.started=!1,this.frameSubject=new xn.a,this.stateSubject=new Pr.a("idle"),this.frame$=this.frameSubject.asObservable(),this.state$=this.stateSubject.asObservable()}return e.prototype.start=function(e){return Object(u.b)(this,void 0,void 0,function(){var t;return Object(u.d)(this,function(n){switch(n.label){case 0:return this.started?[2]:(this.started=!0,this.stateSubject.next("start"),this.config=e,t=this.camera.constraints.vga,[4,this.camera.start("vga","videoInput")]);case 1:return n.sent(),this.openCv.cvState.value.ready?[3,3]:[4,this.openCv.cvState.pipe(Object(rt.a)(function(e){return e.ready}),Object(fr.a)()).toPromise()];case 2:n.sent(),n.label=3;case 3:return this.video=this.camera.video,this.capture=new cv.VideoCapture(this.video),this.source=new cv.Mat(t.height.exact,t.width.exact,cv.CV_8UC4),this.prevFrame=new cv.Mat,this.currentFrame=new cv.Mat,this.strategy.start(),this.getFrame(this.currentFrame),this.stateSubject.next("idle"),[2]}})})},e.prototype.stop=function(){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(e){return this.started?(this.started=!1,this.stateSubject.next("stop"),this.source.delete(),this.prevFrame.delete(),this.currentFrame.delete(),this.strategy.stop(),this.camera.stop(),this.stateSubject.next("idle"),[2]):[2]})})},e.prototype.process=function(){return Object(u.b)(this,void 0,void 0,function(){var e;return Object(u.d)(this,function(t){this.stateSubject.next("process");try{if(!this.camera.stream)return[2,!1];if(this.prevFrame=(e=[this.currentFrame,this.prevFrame])[0],this.currentFrame=e[1],this.getFrame(this.currentFrame),this.strategy.process(this.prevFrame,this.currentFrame))return[2,!0]}catch(n){console.error(n)}finally{this.stateSubject.next("idle")}return[2,!1]})})},e.prototype.getImage=function(){var e=document.createElement("canvas");return e.width=640,e.height=480,cv.imshow(e,this.source),e.toDataURL("image/jpeg")},e.prototype.getFrame=function(e){this.capture.read(this.source),this.strategy.preprocess(this.source,e),this.frameSubject.next(this.source)},e.\u0275fac=function(t){return new(t||e)(i.Xb(Rr),i.Xb(Lr))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Ur=function(){function e(e){this.accessControlService=e,this.destroy$=new xn.a}return e.prototype.ngOnInit=function(){this.accessControlService.frame$.pipe(Object(Mn.a)(this.destroy$)).subscribe(function(e){cv.imshow("canvasInput",e)}),this.accessControlService.strategy.frame$.pipe(Object(Mn.a)(this.destroy$)).subscribe(function(e){cv.imshow("canvasOutput",e)})},e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.\u0275fac=function(t){return new(t||e)(i.Nb(Fr))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-dev-access-control"]],decls:4,vars:0,consts:[["id","canvasInput","width","640","height","480"],["id","canvasOutput","width","640","height","480"]],template:function(e,t){1&e&&(i.Tb(0,"p"),i.Cc(1,"access-control works!"),i.Sb(),i.Ob(2,"canvas",0),i.Ob(3,"canvas",1))},styles:[""]}),e}(),Gr=[{path:"dev",component:function(){function e(e,t,n,i,o){this.store=e,this.connectBt=t,this.selectIndexService=n,this.deviceSimulateService=i,this.serialService=o,this.destroy$=new xn.a}return e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.requestStatus=function(){this.store.dispatch(new ft({type:Pt.getStatus,payload:{fake:0}}))},e.prototype.discover=function(){this.connectBt.discover({discover:!0})},e.prototype.compote=function(){this.store.dispatch(new ft({type:Pt.compote,payload:{programId:0}}))},e.prototype.mixer=function(){this.store.dispatch(new ft({type:Pt.mix,payload:{mixerId:0}}))},e.prototype.getProgram=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ft({type:Pt.getProgram,payload:{index:t}}))})},e.prototype.setProgram=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ft({type:Pt.setProgram,payload:{index:t,value:h()}}))})},e.prototype.getCompote=function(){var e=this;this.selectIndexService.select({count:2,title:"Select compote"}).pipe(Object(Ji.a)(this.selectIndexService.select({count:l,title:"Select compote daily"}))).subscribe(function(t){var n=t[0],i=t[1];void 0!==n&&void 0!==i&&e.store.dispatch(new ft({type:Pt.getCompoteDaily,payload:{index:n,dailyIndex:i}}))})},e.prototype.setCompote=function(){var e=this;this.selectIndexService.select({count:2,title:"Select compote"}).pipe(Object(Ji.a)(this.selectIndexService.select({count:l,title:"Select compote daily"}))).subscribe(function(t){var n=t[0],i=t[1];void 0!==n&&void 0!==i&&e.store.dispatch(new ft({type:Pt.setCompoteDaily,payload:{index:n,dailyIndex:i,value:g()}}))})},e.prototype.getTimer=function(){var e=this;this.selectIndexService.select({count:8,title:"Select timer"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ft({type:Pt.getTimer,payload:{index:t}}))})},e.prototype.setTimer=function(){var e=this;this.selectIndexService.select({count:8,title:"Select timer"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ft({type:Pt.setTimer,payload:{index:t,value:{enable:0,program:0,weekDays:0,time:{hour:0,minute:0,second:0}}}}))})},e.prototype.getSchedule=function(){var e=this;this.selectIndexService.select({count:4,title:"Select schedule"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ft({type:Pt.getSchedule,payload:{index:t}}))})},e.prototype.setSchedule=function(){var e=this;this.selectIndexService.select({count:4,title:"Select schedule"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ft({type:Pt.setSchedule,payload:{index:t,value:{enable:0,deviceId:0,startTime:{hour:0,minute:0,second:0},endTime:{hour:0,minute:0,second:0}}}}))})},e.prototype.simulate=function(){this.deviceSimulateService.enable(!this.deviceSimulateService.enabled)},e.prototype.serialDiscover=function(){this.serialService.discover()},e.prototype.serialConnect=function(){this.serialService.connect(null)},e.prototype.syncSettings=function(){this.store.dispatch(new pe)},e.prototype.resetError=function(){this.store.dispatch(new ft({type:Pt.resetError,payload:{fake:0}}))},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(fo),i.Nb(_r),i.Nb(Nr),i.Nb(Bc))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-dev"]],decls:35,vars:0,consts:[["mat-button","",3,"click"]],template:function(e,t){1&e&&(i.Tb(0,"button",0),i.ac("click",function(){return t.discover()}),i.Cc(1,"Discover"),i.Sb(),i.Tb(2,"button",0),i.ac("click",function(){return t.requestStatus()}),i.Cc(3,"Status"),i.Sb(),i.Tb(4,"button",0),i.ac("click",function(){return t.compote()}),i.Cc(5,"Compote"),i.Sb(),i.Tb(6,"button",0),i.ac("click",function(){return t.mixer()}),i.Cc(7,"Mixer"),i.Sb(),i.Tb(8,"button",0),i.ac("click",function(){return t.getProgram()}),i.Cc(9,"getProgram"),i.Sb(),i.Tb(10,"button",0),i.ac("click",function(){return t.setProgram()}),i.Cc(11,"setProgram"),i.Sb(),i.Tb(12,"button",0),i.ac("click",function(){return t.getCompote()}),i.Cc(13,"getCompote"),i.Sb(),i.Tb(14,"button",0),i.ac("click",function(){return t.setCompote()}),i.Cc(15,"setCompote"),i.Sb(),i.Tb(16,"button",0),i.ac("click",function(){return t.getTimer()}),i.Cc(17,"getTimer"),i.Sb(),i.Tb(18,"button",0),i.ac("click",function(){return t.setTimer()}),i.Cc(19,"setTimer"),i.Sb(),i.Tb(20,"button",0),i.ac("click",function(){return t.getSchedule()}),i.Cc(21,"getSchedule"),i.Sb(),i.Tb(22,"button",0),i.ac("click",function(){return t.setSchedule()}),i.Cc(23,"setSchedule"),i.Sb(),i.Tb(24,"button",0),i.ac("click",function(){return t.simulate()}),i.Cc(25,"simulate"),i.Sb(),i.Tb(26,"button",0),i.ac("click",function(){return t.serialDiscover()}),i.Cc(27,"serial discover"),i.Sb(),i.Tb(28,"button",0),i.ac("click",function(){return t.serialConnect()}),i.Cc(29,"serial connect"),i.Sb(),i.Tb(30,"button",0),i.ac("click",function(){return t.syncSettings()}),i.Cc(31,"sync"),i.Sb(),i.Tb(32,"button",0),i.ac("click",function(){return t.resetError()}),i.Cc(33,"Reset error"),i.Sb(),i.Ob(34,"app-dev-access-control"))},directives:[Ur],styles:[".mat-list-item[_ngcontent-%COMP%]{height:auto}"],changeDetection:0}),e}(),data:{title:"Development",actions:["menu","bt","sync"]}}],$r=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(Gr)],r.e]}),e}(),Vr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[Lr,{provide:Mr,useValue:{}}],imports:[[bn.c]]}),e}(),Hr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[Rr]}),e}(),Kr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[Fr],imports:[[bn.c,Vr,Hr]]}),e}(),Wr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Kr]]}),e}(),Yr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:Object(u.f)([],[{provide:i.d,useFactory:function(e){return function(){return e.init()}},deps:[Nr],multi:!0}]),imports:[[bn.c,$r,In,xr,fn.c,hn.b,Wr]]}),e}(),Xr=n("JIr8"),zr=n("bOdf"),qr=n("4A3s"),Jr=function(){function e(e,t,n){this.actions$=e,this.store=t,this.connectBt=n}return e.prototype.connect=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(pt.CONNECT)).pipe(Object(Ji.a)(this.store.pipe(Object(p.h)(et)))).pipe(Object(Yi.a)(function(t){var n=t[1];return n?Object(Hi.a)(e.connectBt.connect(n)):Object(Hi.a)(e.connectBt.discover()).pipe(Object(Yi.a)(function(t){return Object(Hi.a)(e.connectBt.connect(t[0]))}))})).pipe(Object(qi.a)(function(){return Object($i.a)(new dt(ut.CONNECTED))})).pipe(Object(Xr.a)(function(e){return Object($i.a)(new ht(e))}))},e.prototype.disconnect=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(pt.DISCONNECT)).pipe(Object(Yi.a)(function(){return Object(Hi.a)(e.connectBt.disconnect()).pipe(Object(qi.a)(function(){return Object($i.a)(new dt(ut.DISCONNECTED))}))})).pipe(Object(Xr.a)(function(e){return Object($i.a)(new ht(e))}))},e.prototype.request=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(pt.REQUEST)).pipe(Object(Ji.a)(this.store.select(yt))).pipe(Object(rt.a)(function(e){var t=e[1];return t===ut.CONNECTED||t===ut.TRANSFER})).pipe(Object(zr.a)(function(t){var n=t[0];return Object(Gi.a)(Object($i.a)(new dt(ut.TRANSFER)),Object(Hi.a)(e.connectBt.send(n.payload)).pipe(Object(qr.a)()),Object($i.a)(new dt(ut.CONNECTED)))})).pipe(Object(Xr.a)(function(e){return Object($i.a)(new ht(e))}))},e.prototype.response=function(){return this.connectBt.response$.pipe(Object(at.a)(function(e){return new mt(e)}))},e.prototype.responseProcess=function(){return this.actions$.pipe(Object(Rn.d)(pt.RESPONSE)).pipe(Object(Yi.a)(function(e){var t=e.payload;switch(t.type){case Nt.pump:return Object($i.a)(new $({index:t.payload.index,value:t.payload.value}));case Nt.mixer:return Object($i.a)(new oe({index:t.payload.index,value:t.payload.value}));case Nt.dose:return Object($i.a)(new W({index:t.payload.index,value:t.payload.value}));case Nt.program:return Object($i.a)(new B({index:t.payload.index,value:t.payload.value}));case Nt.timer:return Object($i.a)(new q({index:t.payload.index,value:t.payload.value}));case Nt.schedule:return Object($i.a)(new ee({index:t.payload.index,value:t.payload.value}));case Nt.compoteDaily:return Object($i.a)(new N({index:t.payload.index,dailyIndex:t.payload.dailyIndex,value:t.payload.value}));case Nt.pinPump:return Object($i.a)(new se({key:"pump",index:t.payload.index,value:t.payload.value}));case Nt.pinValve:return Object($i.a)(new se({key:"valve",index:t.payload.index,value:t.payload.value}));case Nt.pinFlowSensor:return Object($i.a)(new se({key:"flowSensor",index:t.payload.index,value:t.payload.value}));case Nt.pinLevelSensor:return Object($i.a)(new se({key:"levelSensor",index:t.payload.index,value:t.payload.value}));case Nt.pinDose:return Object($i.a)(new se({key:"dose",index:t.payload.index,value:t.payload.value}));case Nt.pinMixer:return Object($i.a)(new se({key:"mixer",index:t.payload.index,value:t.payload.value}));case Nt.pinDoseMixer:return Object($i.a)(new se({key:"doseMixer",index:t.payload.index,value:t.payload.value}))}return Vi.a}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(Rn.a),i.Xb(p.b),i.Xb(fo))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"connect",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"disconnect",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"request",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"response",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"responseProcess",null),e}(),Qr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,p.d.forFeature("connect",Ot),Rn.c.forFeature([Jr])]]}),e}(),Zr=n("VRyK"),ea=n("PqYM"),ta=function(){function e(e,t,n){this.actions$=e,this.store=t,this.db=n}return e.prototype.init=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(St.INIT)).pipe(Object(Yi.a)(function(){return e.store.pipe(Object(p.h)(it))})).pipe(Object(Yi.a)(function(t){return Object(Zr.a)(t.time.enable?Object(ea.a)(0,t.time.interval).pipe(Object(Yi.a)(function(){return e.getTime()})):Vi.a,t.temp.enable?Object(ea.a)(0,t.temp.interval).pipe(Object(Yi.a)(function(){return e.getTemp()})):Vi.a,t.status.enable?Object(ea.a)(0,t.status.interval).pipe(Object(Yi.a)(function(){return e.getStatus()})):Vi.a)}))},e.prototype.updateTemp=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(St.UPDATE_TEMP)).pipe(Object(qi.a)(function(t){return Object(Hi.a)(e.db.logTemp(t.payload))}))},e.prototype.updateStatus=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(St.UPDATE_STATUS)).pipe(Object(rt.a)(function(e){return e.payload.state===Rt.fertigate&&e.payload.cmdState===Mt.irrigate})).pipe(Object(qi.a)(function(t){return Object(Hi.a)(e.db.logFlow(t.payload.flow))}))},e.prototype.syncTime=function(){return this.actions$.pipe(Object(Rn.d)(St.SYNC_TIME)).pipe(Object(at.a)(function(e){return new ft({type:Pt.setTime,payload:Object(u.a)({},(t=new Date,{minute:t.getMinutes(),second:t.getSeconds(),hour:t.getHours(),wday:t.getDay(),day:t.getDate(),month:t.getMonth(),year:t.getFullYear()-1970}))});var t}))},e.prototype.getTime=function(){return Object(Gi.a)(Object($i.a)(new ft({type:Pt.getTime,payload:{fake:0}})),this.actions$.pipe(Object(Rn.d)(pt.RESPONSE)).pipe(Object(rt.a)(function(e){return e.payload.type===Nt.time})).pipe(Object(st.a)(1)).pipe(Object(at.a)(function(e){return new Tt(e.payload.payload)})))},e.prototype.getTemp=function(){return Object(Gi.a)(Object($i.a)(new ft({type:Pt.getTemp,payload:{fake:0}})),this.actions$.pipe(Object(Rn.d)(pt.RESPONSE)).pipe(Object(rt.a)(function(e){return e.payload.type===Nt.temp})).pipe(Object(st.a)(1)).pipe(Object(at.a)(function(e){return new Ct(e.payload.payload.value)})))},e.prototype.getStatus=function(){return Object(Gi.a)(Object($i.a)(new ft({type:Pt.getStatus,payload:{fake:0}})),this.actions$.pipe(Object(Rn.d)(pt.RESPONSE)).pipe(Object(rt.a)(function(e){return e.payload.type===Nt.status})).pipe(Object(st.a)(1)).pipe(Object(at.a)(function(e){return new Et(e.payload.payload)})))},e.\u0275fac=function(t){return new(t||e)(i.Xb(Rn.a),i.Xb(p.b),i.Xb(Er))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"init",null),Object(u.c)([Object(Rn.b)({dispatch:!1}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"updateTemp",null),Object(u.c)([Object(Rn.b)({dispatch:!1}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"updateStatus",null),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"syncTime",null),e}(),na=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,p.d.forFeature("dashboard",kt),Rn.c.forFeature([ta])]]}),e}(),ia=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[no,Er,{provide:i.d,useFactory:function(e){return function(){return e.init()}},deps:[Er],multi:!0}],imports:[[bn.c]]}),e}(),oa=function(){function e(e,t,n){this.actions$=e,this.store=t,this.db=n}return e.prototype.init=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(Qc.INIT)).pipe(Object(Yi.a)(function(){return Object(Zr.a)(Object(Hi.a)(e.db.getTemp()).pipe(Object(at.a)(function(e){return new er(e)})),Object(Hi.a)(e.db.getFlow()).pipe(Object(at.a)(function(e){return new tr(e)})))}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(Rn.a),i.Xb(p.b),i.Xb(Er))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"init",null),e}(),ca=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,p.d.forFeature("monitor",cr),Rn.c.forFeature([oa])]]}),e}(),ra=function(){function e(e,t){this.dialog=e,this.connectService=t}return e.prototype.select=function(){return Object(Hi.a)(this.connectService.discover()).pipe(Object(at.a)(function(e){return e[0]}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(Fc.b),i.Xb(io))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),aa=n("f0Cb"),sa=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[ra],imports:[[bn.c,Fc.f,fn.c,mn.b,$c.b,aa.a]]}),e}(),ua=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,hn.b,xi.d,ki.c,yo.b]]}),e}(),pa=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,ua]]}),e}(),la=n("0EQZ"),ba=function(){function e(){}return e.prototype.transform=function(e){var t=1024;if(Math.abs(e)<t)return e+" B";var n=["KB","MB","GB","TB","PB","EB","ZB","YB"],i=-1;do{e/=t,++i}while(Math.abs(e)>=t&&i<n.length-1);return e.toFixed(1)+" "+n[i]},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"memory",type:e,pure:!0}),e}();function da(e,t){1&e&&(i.Tb(0,"div"),i.Ob(1,"mat-progress-spinner",4),i.Sb())}function fa(e,t){if(1&e){var n=i.Ub();i.Tb(0,"div"),i.Tb(1,"mat-checkbox",6),i.ac("change",function(){i.sc(n);var e=t.$implicit;return i.ec(2).selection.toggle(e.name)}),i.Sb(),i.Cc(2),i.fc(3,"memory"),i.Sb()}if(2&e){var o=t.$implicit,c=i.ec(2);i.Bb(1),i.kc("checked",c.selection.isSelected(o.name)),i.Bb(1),i.Gc(" ",o.name," - ",i.gc(3,4,o.size)," of ",o.count," records ")}}function ma(e,t){if(1&e&&i.Ac(0,fa,4,6,"div",5),2&e){var n=i.ec();i.kc("ngForOf",n.sizes)}}var ha=function(){function e(){this.updateSizes=new i.n,this.clear=new i.n,this.selection=new la.c(!0)}return e.prototype.onClear=function(){this.clear.emit(this.selection.selected),this.selection.clear()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-database-config"]],inputs:{sizes:"sizes",update:"update"},outputs:{updateSizes:"updateSizes",clear:"clear"},decls:8,vars:2,consts:[[4,"ngIf","ngIfElse"],[1,"mt-2"],["mat-button","",3,"click"],["databaseSizes",""],["mode","indeterminate","diameter","58"],[4,"ngFor","ngForOf"],[3,"checked","change"]],template:function(e,t){if(1&e&&(i.Ac(0,da,2,0,"div",0),i.Tb(1,"div",1),i.Tb(2,"button",2),i.ac("click",function(){return t.updateSizes.emit()}),i.Cc(3,"Update database"),i.Sb(),i.Tb(4,"button",2),i.ac("click",function(){return t.onClear()}),i.Cc(5,"Clear database"),i.Sb(),i.Sb(),i.Ac(6,ma,1,1,"ng-template",null,3,i.Bc)),2&e){var n=i.qc(7);i.kc("ngIf",t.update)("ngIfElse",n)}},directives:[bn.m,mn.a,$c.a,bn.l,pr.a],pipes:[ba],styles:[""],changeDetection:0}),e}(),ga=function(){function e(){this.configChange=new i.n}return e.prototype.onChange=function(e){this.configChange.emit(Object(u.a)(Object(u.a)({},this.config),e))},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-device-monitor"]],inputs:{config:"config"},outputs:{configChange:"configChange"},decls:4,vars:2,consts:[[1,"col-12",3,"checked","change"],["matInput","","type","number","placeholder","Interval",3,"value","input"]],template:function(e,t){1&e&&(i.Tb(0,"mat-slide-toggle",0),i.ac("change",function(e){return t.onChange({enable:e.checked})}),i.Cc(1," Enable\n"),i.Sb(),i.Tb(2,"mat-form-field"),i.Tb(3,"input",1),i.ac("input",function(e){return t.onChange({interval:+e.target.value})}),i.Sb(),i.Sb()),2&e&&(i.kc("checked",t.config.enable),i.Bb(3),i.kc("value",t.config.interval))},directives:[yo.a,xi.b,ki.b],styles:[""],changeDetection:0}),e}(),ya=function(){function e(){this.configChange=new i.n}return e.prototype.onChange=function(e){this.configChange.emit(Object(u.a)(Object(u.a)({},this.config),e))},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-monitor-config"]],inputs:{config:"config"},outputs:{configChange:"configChange"},decls:9,vars:3,consts:[[3,"config","configChange"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Cc(1," Time "),i.Tb(2,"app-device-monitor",0),i.ac("configChange",function(e){return t.onChange({time:e})}),i.Sb(),i.Sb(),i.Tb(3,"div"),i.Cc(4," Temp "),i.Tb(5,"app-device-monitor",0),i.ac("configChange",function(e){return t.onChange({temp:e})}),i.Sb(),i.Sb(),i.Tb(6,"div"),i.Cc(7," Status "),i.Tb(8,"app-device-monitor",0),i.ac("configChange",function(e){return t.onChange({status:e})}),i.Sb(),i.Sb()),2&e&&(i.Bb(2),i.kc("config",t.config.time),i.Bb(3),i.kc("config",t.config.temp),i.Bb(3),i.kc("config",t.config.status))},directives:[ga],styles:[""],changeDetection:0}),e}(),Oa=function(){function e(){this.accessControlChange=new i.n}return e.prototype.onChange=function(e){this.accessControlChange.emit(Object(u.a)(Object(u.a)({},this.accessControl),e))},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-access-control-config"]],inputs:{accessControl:"accessControl"},outputs:{accessControlChange:"accessControlChange"},decls:2,vars:1,consts:[[1,"col-12",3,"checked","change"]],template:function(e,t){1&e&&(i.Tb(0,"mat-slide-toggle",0),i.ac("change",function(e){return t.onChange({enable:e.checked})}),i.Cc(1," Enable\n"),i.Sb()),2&e&&i.kc("checked",t.accessControl.enable)},directives:[yo.a],styles:[""]}),e}();function Sa(e,t){if(1&e){var n=i.Ub();i.Tb(0,"mat-accordion"),i.Tb(1,"mat-expansion-panel"),i.Tb(2,"mat-expansion-panel-header"),i.Tb(3,"mat-panel-title"),i.Ob(4,"mat-icon",1),i.Cc(5," \xa0Bluetooth "),i.Sb(),i.Tb(6,"mat-panel-description"),i.Cc(7),i.Sb(),i.Sb(),i.Tb(8,"button",2),i.ac("click",function(){return i.sc(n),i.ec().selectDevice()}),i.Cc(9,"Select Device"),i.Sb(),i.Sb(),i.Tb(10,"mat-expansion-panel"),i.Tb(11,"mat-expansion-panel-header"),i.Tb(12,"mat-panel-title"),i.Ob(13,"mat-icon",3),i.Cc(14," \xa0Database "),i.Sb(),i.Sb(),i.Tb(15,"app-database-config",4),i.ac("clear",function(e){return i.sc(n),i.ec().clearDb(e)})("updateSizes",function(){return i.sc(n),i.ec().updateDb()}),i.fc(16,"async"),i.fc(17,"async"),i.Sb(),i.Sb(),i.Tb(18,"mat-expansion-panel"),i.Tb(19,"mat-expansion-panel-header"),i.Tb(20,"mat-panel-title"),i.Ob(21,"mat-icon",5),i.Cc(22," \xa0Monitor "),i.Sb(),i.Sb(),i.Tb(23,"app-monitor-config",6),i.ac("configChange",function(e){return i.sc(n),i.ec().onChange({monitor:e})}),i.fc(24,"async"),i.Sb(),i.Sb(),i.Tb(25,"mat-expansion-panel"),i.Tb(26,"mat-expansion-panel-header"),i.Tb(27,"mat-panel-title"),i.Ob(28,"mat-icon",7),i.Cc(29," \xa0Access control "),i.Sb(),i.Sb(),i.Tb(30,"app-access-control-config",8),i.ac("accessControlChange",function(e){return i.sc(n),i.ec().onChange({accessControl:e})}),i.fc(31,"async"),i.Sb(),i.Sb(),i.Sb()}if(2&e){var o=t.ngIf,c=i.ec();i.Bb(7),i.Ec(" ",null==o.device?null:o.device.name," "),i.Bb(8),i.kc("sizes",i.gc(16,5,c.databaseSizes$))("update",i.gc(17,7,c.updateDatabaseSizes$)),i.Bb(8),i.kc("config",i.gc(24,9,c.monitor$)),i.Bb(7),i.kc("accessControl",i.gc(31,11,c.accessControl$))}}var va=[{path:"config",component:function(){function e(e,t){this.store=e,this.connectService=t}return e.prototype.ngOnInit=function(){this.config$=this.store.pipe(Object(p.h)(Ze)),this.updateDatabaseSizes$=this.store.pipe(Object(p.h)(nt)),this.databaseSizes$=this.store.pipe(Object(p.h)(tt)),this.monitor$=this.store.pipe(Object(p.h)(it)),this.accessControl$=this.store.pipe(Object(p.h)(ot)),this.store.dispatch(new Ye)},e.prototype.selectDevice=function(){var e=this;Object(Hi.a)(this.connectService.discover()).subscribe(function(t){(null==t?void 0:t.length)&&e.store.dispatch(new Xe(t[0]))})},e.prototype.updateDb=function(){this.store.dispatch(new Ye)},e.prototype.clearDb=function(e){this.store.dispatch(new Je(e))},e.prototype.onChange=function(e){this.store.dispatch(new qe(e))},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(io))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-config"]],decls:2,vars:3,consts:[[4,"ngIf"],["svgIcon","bluetooth"],["mat-button","",3,"click"],["svgIcon","database"],[3,"sizes","update","clear","updateSizes"],["svgIcon","monitor"],[3,"config","configChange"],["svgIcon","webcam"],[3,"accessControl","accessControlChange"]],template:function(e,t){1&e&&(i.Ac(0,Sa,32,13,"mat-accordion",0),i.fc(1,"async")),2&e&&i.kc("ngIf",i.gc(1,1,t.config$))},directives:[bn.m,Ni.a,Ni.c,Ni.f,Ni.g,hn.a,Ni.e,mn.a,ha,ya,Oa],pipes:[bn.b],styles:[""],changeDetection:0}),e}(),data:{title:"Config",actions:["back","sync"]}}],Ta=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(va)],r.e]}),e}(),Ca=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,yo.b]]}),e}(),Ea=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Dn,pr.b,$c.b,mn.b]]}),e}(),ja=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Ta,Ni.b,mn.b,hn.b,$c.b,sa,Dn,pa,Ca,Ea]]}),e}(),Aa=function(){function e(e,t){this.actions$=e,this.store=t}return e.prototype.init=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(Bt.INIT)).pipe(Object(Yi.a)(function(){return Object(Zr.a)(e.actions$.pipe(Object(Rn.d)(pt.CONNECT)).pipe(Object(at.a)(function(e){return{time:new Date,icon:"bluetooth",text:"bluetooth connect",type:Kt.connect}})),e.actions$.pipe(Object(Rn.d)(pt.DISCONNECT)).pipe(Object(at.a)(function(e){return{time:new Date,icon:"bluetooth-off",text:"bluetooth disconnect",type:Kt.disconnect}})),e.actions$.pipe(Object(Rn.d)(pt.REQUEST)).pipe(Object(at.a)(function(e){return{time:new Date,icon:"chevron-right",text:(t=e.payload,Pt[t.type]+" "+JSON.stringify(t.payload)),type:Kt.request,subType:e.payload.type};var t})),e.actions$.pipe(Object(Rn.d)(pt.RESPONSE)).pipe(Object(at.a)(function(e){return{time:new Date,icon:"chevron-left",text:(t=e.payload,Nt[t.type]+" "+JSON.stringify(t)),type:Kt.response,subType:e.payload.type};var t})),e.actions$.pipe(Object(Rn.d)(pt.ERROR)).pipe(Object(at.a)(function(e){return{time:new Date,icon:"alert-circle-outline",text:"connect error",type:Kt.error}}))).pipe(Object(at.a)(function(e){return new Ut(e)}))}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(Rn.a),i.Xb(p.b))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"init",null),e}(),wa=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,p.d.forFeature("log",qt),Rn.c.forFeature([Aa])]]}),e}(),Ia=n("xHqg"),Da=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Gc.g,Gc.o,Ia.d,mn.b,hn.b,ki.c,xi.d]]}),e}(),_a=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Gc.g,Gc.o,Ia.d,mn.b,hn.b,ki.c,xi.d]]}),e}();function xa(e,t){if(1&e&&i.Ob(0,"mat-icon",3),2&e){var n=i.ec().$implicit;i.kc("svgIcon",n.icon)}}function ka(e,t){if(1&e&&(i.Tb(0,"a",1),i.Ac(1,xa,1,1,"mat-icon",2),i.Cc(2),i.Sb()),2&e){var n=t.$implicit;i.kc("routerLink",n.route),i.Bb(1),i.kc("ngIf",n.icon),i.Bb(1),i.Ec(" \xa0 ",n.title," ")}}var Pa=function(){function e(){this.links=Object(u.f)(new Array(2).fill(0).map(function(e,t){return{route:["/","calibrate","pump",""+t],title:"Pump "+d[t],icon:t===d.in?"water-pump":"fountain"}}),new Array(4).fill(0).map(function(e,t){return{route:["/","calibrate","dose",""+t],title:"Dose "+(t+1),icon:"eyedropper"}}))}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-calibrate"]],decls:2,vars:1,consts:[["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(e,t){1&e&&(i.Tb(0,"mat-nav-list"),i.Ac(1,ka,3,3,"a",0),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",t.links))},directives:[fn.d,bn.l,fn.b,r.d,bn.m,hn.a],styles:[""],changeDetection:0}),e}(),Na=n("B/XX");function Ra(e,t){1&e&&i.Cc(0,"Pump In Flow sensor")}function Ma(e,t){1&e&&i.Cc(0,"Pumping")}function La(e,t){1&e&&i.Cc(0,"Save")}function Ba(e,t){1&e&&i.Cc(0,"Done")}function Fa(e,t){1&e&&i.Ob(0,"mat-icon",11)}function Ua(e,t){1&e&&i.Ob(0,"mat-icon",12)}function Ga(e,t){1&e&&i.Cc(0,"Dose rate")}function $a(e,t){1&e&&i.Cc(0,"Pumping")}function Va(e,t){1&e&&i.Cc(0,"Save")}function Ha(e,t){1&e&&i.Cc(0,"Done")}function Ka(e,t){1&e&&i.Ob(0,"mat-icon",11)}function Wa(e,t){1&e&&i.Ob(0,"mat-icon",12)}var Ya=[{path:"calibrate",children:[{path:"",component:Pa,pathMatch:"full",data:{title:"Calibrate",actions:["menu","bt","sync"]}},{path:"pump/:id",component:function(){function e(e){this.formBuilder=e}return e.prototype.ngOnInit=function(){this.firstFormGroup=this.formBuilder.group({firstCtrl:[""]}),this.secondFormGroup=this.formBuilder.group({secondCtrl:[""]})},e.\u0275fac=function(t){return new(t||e)(i.Nb(Gc.d))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-calibrate-flow-sensor"]],features:[i.Ab([{provide:Na.h,useValue:{displayDefaultIndicatorType:!1}}])],decls:34,vars:9,consts:[[3,"linear"],["stepper",""],[3,"stepControl","editable"],[3,"formGroup"],["matStepLabel",""],["matInput","","placeholder","Volume (mL)","formControlName","firstCtrl"],["mat-button","","matStepperNext",""],["mat-button","",3,"click"],[3,"editable"],["matStepperIcon","edit"],["matStepperIcon","done"],["svgIcon","pencil"],["svgIcon","check"]],template:function(e,t){if(1&e){var n=i.Ub();i.Tb(0,"mat-vertical-stepper",0,1),i.Tb(2,"mat-step",2),i.Tb(3,"form",3),i.Ac(4,Ra,1,0,"ng-template",4),i.Tb(5,"mat-form-field"),i.Ob(6,"input",5),i.Sb(),i.Tb(7,"div"),i.Tb(8,"button",6),i.Cc(9,"Start"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(10,"mat-step",2),i.Tb(11,"form",3),i.Ac(12,Ma,1,0,"ng-template",4),i.Tb(13,"div"),i.Tb(14,"button",7),i.ac("click",function(){return i.sc(n),i.qc(1).reset()}),i.Cc(15,"Cancel"),i.Sb(),i.Tb(16,"button",6),i.Cc(17,"Stop"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(18,"mat-step",8),i.Ac(19,La,1,0,"ng-template",4),i.Cc(20," You are going to save new rate value. "),i.Tb(21,"div"),i.Tb(22,"button",7),i.ac("click",function(){return i.sc(n),i.qc(1).reset()}),i.Cc(23,"Cancel"),i.Sb(),i.Tb(24,"button",6),i.Cc(25,"Save"),i.Sb(),i.Sb(),i.Sb(),i.Tb(26,"mat-step",8),i.Ac(27,Ba,1,0,"ng-template",4),i.Cc(28," You are done. "),i.Tb(29,"div"),i.Tb(30,"button",7),i.ac("click",function(){return i.sc(n),i.qc(1).reset()}),i.Cc(31,"Repeat"),i.Sb(),i.Sb(),i.Sb(),i.Ac(32,Fa,1,0,"ng-template",9),i.Ac(33,Ua,1,0,"ng-template",10),i.Sb()}2&e&&(i.kc("linear",!0),i.Bb(2),i.kc("stepControl",t.firstFormGroup)("editable",!1),i.Bb(1),i.kc("formGroup",t.firstFormGroup),i.Bb(7),i.kc("stepControl",t.secondFormGroup)("editable",!1),i.Bb(1),i.kc("formGroup",t.secondFormGroup),i.Bb(7),i.kc("editable",!1),i.Bb(8),i.kc("editable",!1))},directives:[Ia.f,Ia.a,Gc.q,Gc.l,Gc.f,Ia.b,xi.b,ki.b,Gc.c,Gc.k,Gc.e,mn.a,Ia.e,Ia.c,hn.a],styles:[""],changeDetection:0}),e}(),data:{title:"Calibrate flow sensor",actions:["back","sync"]}},{path:"dose/:id",component:function(){function e(e){this.formBuilder=e}return e.prototype.ngOnInit=function(){this.firstFormGroup=this.formBuilder.group({firstCtrl:[""]}),this.secondFormGroup=this.formBuilder.group({secondCtrl:[""]})},e.\u0275fac=function(t){return new(t||e)(i.Nb(Gc.d))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-calibrate-dose"]],features:[i.Ab([{provide:Na.h,useValue:{displayDefaultIndicatorType:!1}}])],decls:34,vars:9,consts:[[3,"linear"],["stepper",""],[3,"stepControl","editable"],[3,"formGroup"],["matStepLabel",""],["matInput","","placeholder","Volume (mL)","formControlName","firstCtrl"],["mat-button","","matStepperNext",""],["mat-button","",3,"click"],[3,"editable"],["matStepperIcon","edit"],["matStepperIcon","done"],["svgIcon","pencil"],["svgIcon","check"]],template:function(e,t){if(1&e){var n=i.Ub();i.Tb(0,"mat-vertical-stepper",0,1),i.Tb(2,"mat-step",2),i.Tb(3,"form",3),i.Ac(4,Ga,1,0,"ng-template",4),i.Tb(5,"mat-form-field"),i.Ob(6,"input",5),i.Sb(),i.Tb(7,"div"),i.Tb(8,"button",6),i.Cc(9,"Start"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(10,"mat-step",2),i.Tb(11,"form",3),i.Ac(12,$a,1,0,"ng-template",4),i.Tb(13,"div"),i.Tb(14,"button",7),i.ac("click",function(){return i.sc(n),i.qc(1).reset()}),i.Cc(15,"Cancel"),i.Sb(),i.Tb(16,"button",6),i.Cc(17,"Stop"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(18,"mat-step",8),i.Ac(19,Va,1,0,"ng-template",4),i.Cc(20," You are going to save new rate value. "),i.Tb(21,"div"),i.Tb(22,"button",7),i.ac("click",function(){return i.sc(n),i.qc(1).reset()}),i.Cc(23,"Cancel"),i.Sb(),i.Tb(24,"button",6),i.Cc(25,"Save"),i.Sb(),i.Sb(),i.Sb(),i.Tb(26,"mat-step",8),i.Ac(27,Ha,1,0,"ng-template",4),i.Cc(28," You are done. "),i.Tb(29,"div"),i.Tb(30,"button",7),i.ac("click",function(){return i.sc(n),i.qc(1).reset()}),i.Cc(31,"Repeat"),i.Sb(),i.Sb(),i.Sb(),i.Ac(32,Ka,1,0,"ng-template",9),i.Ac(33,Wa,1,0,"ng-template",10),i.Sb()}2&e&&(i.kc("linear",!0),i.Bb(2),i.kc("stepControl",t.firstFormGroup)("editable",!1),i.Bb(1),i.kc("formGroup",t.firstFormGroup),i.Bb(7),i.kc("stepControl",t.secondFormGroup)("editable",!1),i.Bb(1),i.kc("formGroup",t.secondFormGroup),i.Bb(7),i.kc("editable",!1),i.Bb(8),i.kc("editable",!1))},directives:[Ia.f,Ia.a,Gc.q,Gc.l,Gc.f,Ia.b,xi.b,ki.b,Gc.c,Gc.k,Gc.e,mn.a,Ia.e,Ia.c,hn.a],styles:[""]}),e}(),data:{title:"Calibrate dose",actions:["back","sync"]}}]}],Xa=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(Ya)],r.e]}),e}(),za=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Xa,mn.b,hn.b,fn.c,_a,Da]]}),e}(),qa=[{path:"manual-control",component:function(){function e(e,t){this.store=e,this.selectIndexService=t}return e.prototype.onFertigate=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ft({type:Pt.fertigate,payload:{programId:t}}))})},e.prototype.onPumpIn=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ft({type:Pt.pumpIn,payload:{programId:t}}))})},e.prototype.onDose=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).pipe(Object(Yi.a)(function(t){return void 0===t?Vi.a:e.selectIndexService.select({count:4,title:"Select dose"}).pipe(Object(at.a)(function(e){return[t,e]}))})).subscribe(function(t){var n=t[0],i=t[1];void 0!==n&&void 0!==i&&e.store.dispatch(new ft({type:Pt.dose,payload:{programId:n,doseId:i}}))})},e.prototype.onDoseMix=function(){var e=this;this.selectIndexService.select({count:4,title:"Select dose"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ft({type:Pt.mixDose,payload:{mixerId:t}}))})},e.prototype.onMix=function(){this.store.dispatch(new ft({type:Pt.mix,payload:{mixerId:0}}))},e.prototype.onIrrigate=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ft({type:Pt.irrigate,payload:{programId:t}}))})},e.prototype.onWash=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ft({type:Pt.wash,payload:{programId:t}}))})},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(_r))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-manual-control"]],decls:22,vars:0,consts:[[3,"click"],["svgIcon","fountain"],["svgIcon","water-pump"],["svgIcon","eyedropper"],["svgIcon","pinwheel"]],template:function(e,t){1&e&&(i.Tb(0,"mat-action-list"),i.Tb(1,"mat-list-item",0),i.ac("click",function(){return t.onFertigate()}),i.Ob(2,"mat-icon",1),i.Cc(3," \xa0 Fertigate "),i.Sb(),i.Tb(4,"mat-list-item",0),i.ac("click",function(){return t.onPumpIn()}),i.Ob(5,"mat-icon",2),i.Cc(6," \xa0 Pump In "),i.Sb(),i.Tb(7,"mat-list-item",0),i.ac("click",function(){return t.onDose()}),i.Ob(8,"mat-icon",3),i.Cc(9," \xa0 Dose "),i.Sb(),i.Tb(10,"mat-list-item",0),i.ac("click",function(){return t.onDoseMix()}),i.Ob(11,"mat-icon",4),i.Cc(12," \xa0 Dose mix "),i.Sb(),i.Tb(13,"mat-list-item",0),i.ac("click",function(){return t.onMix()}),i.Ob(14,"mat-icon",4),i.Cc(15," \xa0 Mix "),i.Sb(),i.Tb(16,"mat-list-item",0),i.ac("click",function(){return t.onIrrigate()}),i.Ob(17,"mat-icon",1),i.Cc(18," \xa0 Irrigate "),i.Sb(),i.Tb(19,"mat-list-item",0),i.ac("click",function(){return t.onWash()}),i.Ob(20,"mat-icon",1),i.Cc(21," \xa0 Wash "),i.Sb(),i.Sb())},directives:[fn.a,fn.b,hn.a],styles:[""]}),e}(),data:{title:"Manual Control",actions:["menu","bt","sync"]}}],Ja=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(qa)],r.e]}),e}(),Qa=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,fn.c,hn.b,Ja]]}),e}(),Za=n("JX91"),es=n("FtGj");function ts(e,t){if(1&e&&(i.Tb(0,"div",8),i.Ob(1,"img",9),i.Sb()),2&e){var n=i.ec();i.Bb(1),i.Cb("src",n.camshot.image,i.tc)}}var ns=function(){function e(e,t,n,i){var o=this;this.db=e,this.dialogRef=i,this.keySubject=new Pr.a(null),this.keySubject.pipe(Object(Yi.a)(function(t){return Object(Hi.a)(e.getAccessControlCamshot(t)).pipe(Object(Za.a)(null))})).subscribe(function(e){o.camshot=e,t.markForCheck()}),this.key=n.key}return Object.defineProperty(e.prototype,"key",{get:function(){return this.keySubject.value},set:function(e){this.keySubject.next(e)},enumerable:!1,configurable:!0}),e.prototype.onKeyDown=function(e){switch(e.keyCode){case es.i:this.onPrev();break;case es.m:this.onNext()}},e.prototype.onPrev=function(){var e=this;this.db.getAccessControlCamshotPrev(this.key).then(function(t){var n=t.value;e.key=t.key,e.camshot=n})},e.prototype.onNext=function(){var e=this;this.db.getAccessControlCamshotNext(this.key).then(function(t){var n=t.value;e.key=t.key,e.camshot=n})},e.\u0275fac=function(t){return new(t||e)(i.Nb(Er),i.Nb(i.h),i.Nb(Fc.a),i.Nb(Fc.g))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-camshot-slider"]],hostBindings:function(e,t){1&e&&i.ac("keydown",function(e){return t.onKeyDown(e)},!1,i.rc)},inputs:{key:"key"},decls:14,vars:9,consts:[["mat-dialog-title",""],[1,"pt-2"],[1,"d-flex","flex-column","flex-nowrap"],[1,"d-flex","flex-row","flex-nowrap"],[3,"click"],["svgIcon","chevron-left"],["class","flex-fill",4,"ngIf"],["svgIcon","chevron-right"],[1,"flex-fill"],[1,"mx-auto","d-block"]],template:function(e,t){1&e&&(i.Tb(0,"h1",0),i.Cc(1),i.fc(2,"date"),i.Sb(),i.Tb(3,"mat-dialog-content",1),i.Tb(4,"div",2),i.Tb(5,"div",3),i.Tb(6,"div",4),i.ac("click",function(){return t.onPrev()}),i.Ob(7,"mat-icon",5),i.Sb(),i.Ac(8,ts,2,1,"div",6),i.Tb(9,"div",4),i.ac("click",function(){return t.onNext()}),i.Ob(10,"mat-icon",7),i.Sb(),i.Sb(),i.Tb(11,"div"),i.Cc(12),i.fc(13,"date"),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.Dc(i.hc(2,3,t.key,"yyyy.MM.dd HH:mm:ss")),i.Bb(7),i.kc("ngIf",t.camshot),i.Bb(4),i.Ec(" ",i.hc(13,6,t.key,"HH:mm:ss")," "))},directives:[Fc.h,Fc.e,hn.a,bn.m],pipes:[bn.e],styles:["mat-dialog-content[_ngcontent-%COMP%]{max-height:100vh}"]}),e}(),is=function(){function e(e){this.dialog=e}return e.prototype.show=function(e){return this.dialog.open(ns,{data:{key:e},width:"100vw",height:"100vh"}).afterClosed()},e.\u0275fac=function(t){return new(t||e)(i.Xb(Fc.b))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),e}();function os(e,t){if(1&e){var n=i.Ub();i.Rb(0),i.Tb(1,"img",2),i.ac("click",function(){return i.sc(n),i.ec().onClick()}),i.Sb(),i.Qb()}if(2&e){var o=i.ec();i.Bb(1),i.Cb("src",o.camshot.image,i.tc)}}var cs=function(){function e(e,t,n){var i=this;this.camshotSlider=n,this.keySubject=new Pr.a(null),this.keySubject.pipe(Object(Yi.a)(function(t){return Object(Hi.a)(e.getAccessControlCamshot(t)).pipe(Object(Za.a)(null))})).subscribe(function(e){i.camshot=e,t.markForCheck()})}return Object.defineProperty(e.prototype,"key",{get:function(){return this.keySubject.value},set:function(e){this.keySubject.next(e)},enumerable:!1,configurable:!0}),e.prototype.onClick=function(){this.camshotSlider.show(this.key)},e.\u0275fac=function(t){return new(t||e)(i.Nb(Er),i.Nb(i.h),i.Nb(is))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-camshot"]],inputs:{key:"key"},decls:5,vars:5,consts:[[1,"d-flex","flex-column","flex-nowrap"],[4,"ngIf"],["width","64","height","48",1,"flex-fill",3,"click"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Ac(1,os,2,1,"ng-container",1),i.Tb(2,"div"),i.Cc(3),i.fc(4,"date"),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.kc("ngIf",t.camshot),i.Bb(2),i.Ec(" ",i.hc(4,2,t.key,"HH:mm:ss")," "))},directives:[bn.m],pipes:[bn.e],styles:[""],changeDetection:0}),e}();function rs(e,t){1&e&&i.Ob(0,"app-camshot",2),2&e&&i.kc("key",t.$implicit)}var as=function(){function e(){}return e.prototype.trackByKey=function(e,t){return t},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-camshots"]],inputs:{keys:"keys"},decls:2,vars:2,consts:[["itemSize","64","orientation","horizontal",1,"h-100","w-100","overflow-auto"],["class","d-block",3,"key",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"d-block",3,"key"]],template:function(e,t){1&e&&(i.Tb(0,"cdk-virtual-scroll-viewport",0),i.Ac(1,rs,1,1,"app-camshot",1),i.Sb()),2&e&&(i.Bb(1),i.kc("cdkVirtualForOf",t.keys)("cdkVirtualForTrackBy",t.trackByKey))},directives:[dr.e,dr.a,dr.d,cs],styles:["[_nghost-%COMP%]     .cdk-virtual-scroll-content-wrapper{display:flex;flex-direction:row;flex-wrap:nowrap}app-camshot[_ngcontent-%COMP%]{width:64px}"],changeDetection:0}),e}(),ss=function(){function e(e,t){var n=this;this.episodeSubject=new Pr.a(null),this.episodeSubject.pipe(Object(Yi.a)(function(t){return Object(Hi.a)(e.getAccessControlEpisodeKeys(t))})).subscribe(function(e){n.episodeKeys=e,t.markForCheck()})}return Object.defineProperty(e.prototype,"episode",{get:function(){return this.episodeSubject.value},set:function(e){this.episodeSubject.next(e)},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(i.Nb(Er),i.Nb(i.h))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-episode"]],inputs:{episode:"episode"},decls:6,vars:9,consts:[[1,"h-100","d-flex","flex-column","flex-nowrap"],[1,"flex-fill",3,"keys"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"div"),i.Cc(2),i.fc(3,"date"),i.fc(4,"date"),i.Sb(),i.Ob(5,"app-camshots",1),i.Sb()),2&e&&(i.Bb(2),i.Fc("",i.hc(3,3,t.episode.key,"yyyy.MM.dd HH:mm:ss")," - ",i.hc(4,6,t.episode.value.lastKey,"HH:mm:ss"),""),i.Bb(3),i.kc("keys",t.episodeKeys))},directives:[as],pipes:[bn.e],styles:["app-camshots[_ngcontent-%COMP%]{width:100%;display:block;overflow:hidden}"],changeDetection:0}),e}();function us(e,t){1&e&&i.Ob(0,"app-episode",2),2&e&&i.kc("episode",t.$implicit)}var ps=[{path:"access-control",component:function(){function e(e){this.store=e,this.log$=this.store.pipe(Object(p.h)(sn))}return e.prototype.trackByKey=function(e,t){return t.key},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-access-control"]],decls:3,vars:4,consts:[["itemSize","120",1,"h-100","w-100"],[3,"episode",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"episode"]],template:function(e,t){1&e&&(i.Tb(0,"cdk-virtual-scroll-viewport",0),i.Ac(1,us,1,1,"app-episode",1),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("cdkVirtualForOf",i.gc(2,2,t.log$))("cdkVirtualForTrackBy",t.trackByKey))},directives:[dr.e,dr.a,dr.d,ss],pipes:[bn.b],styles:["app-episode[_ngcontent-%COMP%]{width:100%;height:120px;display:block}"]}),e}(),data:{title:"Access control",actions:["menu","bt","sync"]}}],ls=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(ps)],r.e]}),e}(),bs=n("NXyV"),ds=n("PZkE"),fs=n("/d8p"),ms=function(){function e(e,t,n,i){this.actions$=e,this.store=t,this.accessControl=n,this.db=i}return e.prototype.init=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(nn.INIT)).pipe(Object(Yi.a)(function(){return Object(Gi.a)(Object(Hi.a)(e.db.getAccessControlEpisode()).pipe(Object(at.a)(function(e){return new rn(e)})),e.store.pipe(Object(p.h)(ot),Object(ds.a)("enable")).pipe(Object(Yi.a)(function(t){return t.enable?Object(Gi.a)(e.stop(),e.start(t),e.process(t)):e.stop()})))}))},e.prototype.add=function(){var e=this;return this.actions$.pipe(Object(Rn.d)(nn.ADD)).pipe(Object(Ji.a)(this.store.pipe(Object(p.h)(un)))).pipe(Object(qi.a)(function(t){var n=t[0],i=t[1];return Object(Hi.a)(e.db.logAccessControl(i.key,n.payload))}))},e.prototype.start=function(e){var t=this;return Object(Gi.a)(this.accessControl.state$.pipe(Object(rt.a)(function(e){return"idle"===e}),Object(fr.a)()),Object(bs.a)(function(){return t.accessControl.start(e)})).pipe(Object(qr.a)())},e.prototype.stop=function(){var e=this;return Object(Gi.a)(this.accessControl.state$.pipe(Object(rt.a)(function(e){return"idle"===e}),Object(fr.a)()),Object(bs.a)(function(){return e.accessControl.stop()})).pipe(Object(qr.a)())},e.prototype.process=function(e){var t=this;return Object(bs.a)(function(){return Object($i.a)(Date.now())}).pipe(Object(Yi.a)(function(n){return Object(bs.a)(function(){return t.accessControl.process()}).pipe(Object(Yi.a)(function(i){var o=Math.max(1e3/e.fps-(Date.now()-n),30);return Object(Gi.a)(i?Object($i.a)(new cn({key:n,value:{processTime:Date.now()-n,image:t.accessControl.getImage()}})):Vi.a,Object($i.a)(1).pipe(Object(kr.a)(o),Object(qr.a)()))}))}),Object(fs.a)())},e.prototype.process2=function(e){var t=this;return Object(ea.a)(0,1e3/e.fps).pipe(Object(Tr.a)(function(){return Object(bs.a)(function(){return Object($i.a)(Date.now())}).pipe(Object(Yi.a)(function(e){return Object(bs.a)(function(){return t.accessControl.process()}).pipe(Object(Yi.a)(function(n){return n?Object($i.a)(new cn({key:e,value:{processTime:Date.now()-e,image:t.accessControl.getImage()}})):Vi.a}))}))}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(Rn.a),i.Xb(p.b),i.Xb(Fr),i.Xb(Er))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(Rn.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"init",null),Object(u.c)([Object(Rn.b)({dispatch:!1}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Wi.a)],e.prototype,"add",null),e}(),hs=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,Kr,p.d.forFeature("accessControl",pn),Rn.c.forFeature([ms])]]}),e}(),gs=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[is],imports:[[bn.c,Fc.f,mn.b,hn.b]]}),e}(),ys=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,gs]]}),e}(),Os=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,dr.g,ys]]}),e}(),Ss=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Os]]}),e}(),vs=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,dr.g,ls,hs,Ss]]}),e}();function Ts(e,t){if(1&e){var n=i.Ub();i.Tb(0,"div",1),i.Tb(1,"mat-slide-toggle",2),i.ac("change",function(e){i.sc(n);var o=t.$implicit;return i.ec().onChange(o,+e.checked)}),i.Cc(2),i.Sb(),i.Sb()}if(2&e){var o=t.$implicit;i.Bb(2),i.Ec(" Valve #",o+1," ")}}var Cs=function(){function e(e){this.store=e,this.valveCount=b}return e.prototype.ngOnInit=function(){},e.prototype.onChange=function(e,t){this.store.dispatch(new ft({type:Pt.setStateValve,payload:{index:e,value:t}}))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-valve-list"]],decls:3,vars:4,consts:[["class","row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"row"],[1,"d-block","col-12",3,"change"]],template:function(e,t){1&e&&(i.Cc(0,"vla"),i.Ac(1,Ts,3,1,"div",0),i.fc(2,"times")),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.valveCount))("ngForTrackBy",t.trackByIndex))},directives:[bn.l,yo.a],pipes:[wr],styles:[""],changeDetection:0}),e}();function Es(e,t){1&e&&i.Ob(0,"app-valve-list")}var js=[{path:"test",component:function(){function e(){this.links=[{route:["/","settings","program"],title:"Program",icon:"cogs"},{route:["/","settings","compote"],title:"Compote",icon:"cup-water"},{route:["/","settings","timer"],title:"Timer",icon:"alarm"},{route:["/","settings","schedule"],title:"Schedule",icon:"clock-outline"},{route:["/","settings","pump"],title:"Pump",icon:"water-pump"},{route:["/","settings","dose"],title:"Dose",icon:"eyedropper"},{route:["/","settings","mixer"],title:"Mixer",icon:"pinwheel"},{route:["/","settings","pin-assignment"],title:"Pin Assignment",icon:"chip"}]}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-test"]],decls:8,vars:0,consts:[["matExpansionPanelContent",""]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Tb(1,"mat-expansion-panel"),i.Tb(2,"mat-expansion-panel-header"),i.Tb(3,"mat-panel-title"),i.Cc(4," Valves "),i.Sb(),i.Tb(5,"mat-panel-description"),i.Cc(6," Valves state "),i.Sb(),i.Sb(),i.Ac(7,Es,1,0,"ng-template",0),i.Sb(),i.Sb())},directives:[Ni.a,Ni.c,Ni.f,Ni.g,Ni.e,Ni.d,Cs],styles:[""],changeDetection:0}),e}(),data:{title:"Test Control",actions:["menu","bt","sync"]}}],As=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(js)],r.e]}),e}(),ws=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,yo.b,Dn]]}),e}(),Is=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[bn.c,Ni.b,As,In,ws]]}),e}();function Ds(e){return function(t,n){var i=e(t,n);return console.log("action "+n.type,{payload:n.payload,oldState:t,newState:i}),i}}var _s=function(){function e(e,t){e.addSvgIconSet(t.bypassSecurityTrustResourceUrl("assets/sprite.svg"))}return e.\u0275mod=i.Lb({type:e,bootstrap:[wn]}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)(i.Xb(hn.c),i.Xb(c.b))},providers:[],imports:[[c.a,zc.b,qc.b,s,Xc,In,_i,Lc,sr,vr,Yr,ja,ho,Ar,Qr,na,ca,ia,wa,za,Qa,Is,vs,ur.a.register("ngsw-worker.js",{enabled:o}),p.d.forRoot({},{metaReducers:o?[]:[Ds]}),Rn.c.forRoot([])]]}),e}();o&&Object(i.U)(),document.addEventListener("deviceready",function(){c.c().bootstrapModule(_s).catch(function(e){return console.error(e.message,e)})},!1)}},[[0,0,5]]]);