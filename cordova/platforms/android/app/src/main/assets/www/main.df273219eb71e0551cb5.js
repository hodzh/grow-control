(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},crnd:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},zUnb:function(e,t,n){"use strict";n.r(t);var i=n("fXoL"),o=(n("yLV6"),n("75ce"),n("AH3D"),n("Ynxi"),n("sRwP"),n("Cm0C"),!1),c=n("jhN1"),r=n("tyNb"),a=[{path:"",redirectTo:"dashboard",pathMatch:"full"}],s=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forRoot(a)],r.e]}),e}(),u=n("mrSG"),p=n("l7P3"),l=24,b=function(e){return e[e.in=0]="in",e[e.out=1]="out",e}({});function d(e){return{wday:e.getDay(),day:e.getDate(),month:e.getMonth(),year:e.getFullYear()-1970}}function f(e){return new Date(e.year+1970,e.month,e.day)}function m(){return{program:new Array(4).fill(0).map(function(){return h()}),compote:new Array(2).fill(0).map(function(){return y()}),schedule:new Array(4).fill(0).map(function(){return{enable:0,deviceId:0,startTime:{hour:0,minute:0,second:0},endTime:{hour:0,minute:0,second:0}}}),timer:new Array(8).fill(0).map(function(){return{enable:0,program:0,weekDays:0,time:{hour:0,minute:0,second:0}}}),pump:new Array(2).fill(0).map(function(){return{minFlow:100,startingTime:3e3,pwmFlow:0,pwm:0,rate:5880}}),mixer:new Array(1).fill(0).map(function(){return{seconds:180,washSeconds:180,pwmSensor:0,pwm:0}}),dose:new Array(4).fill(0).map(function(){return{rate:0,seconds:0,pwmSensor:0,pwm:0}}),levelSensor:new Array(4).fill(0).map(function(){return{enable:0,seconds:1}})}}function h(){return{valves:new Array(Math.ceil(3)).fill(0),compote:0,start:d(new Date)}}function g(){return{days:0,schedule:0,volume:0,washVolume:0,dose:new Array(4).fill(0)}}function y(){return{daily:new Array(14).fill(0).map(function(){return g()})}}function O(){return{enable:0,deviceId:0,startTime:{hour:0,minute:0,second:0},endTime:{hour:0,minute:0,second:0}}}function v(){return{enable:0,program:0,weekDays:0,time:{hour:0,minute:0,second:0}}}function S(){return{minFlow:100,startingTime:3e3,pwmFlow:0,pwm:0,rate:5880}}function T(){return{rate:0,seconds:0,pwmSensor:0,pwm:0}}function C(){return{enable:0,seconds:1}}function E(){return{seconds:180,washSeconds:180,pwmSensor:0,pwm:0}}var j=function(e){return e[e.pump=0]="pump",e[e.valve=1]="valve",e[e.mixer=2]="mixer",e[e.dose=3]="dose",e[e.doseMixer=4]="doseMixer",e[e.flowSensor=5]="flowSensor",e[e.levelSensor=6]="levelSensor",e[e.rtc=7]="rtc",e[e.display=8]="display",e[e.button=9]="button",e[e.beeper=10]="beeper",e}({}),A={pump:"Pump",valve:"Valve",mixer:"Mixer",dose:"Dose",doseMixer:"Dose Mixer",flowSensor:"Flow Sensor",levelSensor:"Level Sensor",rtc:"RTC",display:"Display",button:"Button",beeper:"Beeper"},w=function(e){return e.INIT="[Settings] Init",e.UPDATE="[Settings] Update",e.CHANGE_NAME="[Settings] Change name",e.ADD_COMPOTE="[Settings] Add compote",e.CHANGE_COMPOTE="[Settings] Change compote",e.REMOVE_COMPOTE="[Settings] Remove compote",e.LOAD_COMPOTE="[Settings] Load compote",e.UPDATE_COMPOTE="[Settings] Update compote",e.ADD_COMPOTE_DAILY="[Settings] Add compote daily",e.CHANGE_COMPOTE_DAILY="[Settings] Change compote daily",e.REMOVE_COMPOTE_DAILY="[Settings] Remove compote daily",e.LOAD_COMPOTE_DAILY="[Settings] Load compote daily",e.UPDATE_COMPOTE_DAILY="[Settings] Update compote daily",e.ADD_PROGRAM="[Settings] Add program",e.CHANGE_PROGRAM="[Settings] Change program",e.REMOVE_PROGRAM="[Settings] Remove program",e.LOAD_PROGRAM="[Settings] Load program",e.UPDATE_PROGRAM="[Settings] Update program",e.ADD_PUMP="[Settings] Add pump",e.CHANGE_PUMP="[Settings] Change pump",e.REMOVE_PUMP="[Settings] Remove pump",e.LOAD_PUMP="[Settings] Load pump",e.UPDATE_PUMP="[Settings] Update pump",e.ADD_DOSE="[Settings] Add dose",e.CHANGE_DOSE="[Settings] Change dose",e.REMOVE_DOSE="[Settings] Remove dose",e.LOAD_DOSE="[Settings] Load dose",e.UPDATE_DOSE="[Settings] Update dose",e.ADD_TIMER="[Settings] Add timer",e.CHANGE_TIMER="[Settings] Change timer",e.REMOVE_TIMER="[Settings] Remove timer",e.LOAD_TIMER="[Settings] Load timer",e.UPDATE_TIMER="[Settings] Update timer",e.ADD_SCHEDULE="[Settings] Add schedule",e.CHANGE_SCHEDULE="[Settings] Change schedule",e.REMOVE_SCHEDULE="[Settings] Remove schedule",e.LOAD_SCHEDULE="[Settings] Load schedule",e.UPDATE_SCHEDULE="[Settings] Update schedule",e.ADD_MIXER="[Settings] Add mixer",e.CHANGE_MIXER="[Settings] Change mixer",e.REMOVE_MIXER="[Settings] Remove mixer",e.LOAD_MIXER="[Settings] Load mixer",e.UPDATE_MIXER="[Settings] Update mixer",e.ADD_LEVEL_SENSOR="[Settings] Add level sensor",e.CHANGE_LEVEL_SENSOR="[Settings] Change level sensor",e.REMOVE_LEVEL_SENSOR="[Settings] Remove level sensor",e.LOAD_LEVEL_SENSOR="[Settings] Load level sensor",e.UPDATE_LEVEL_SENSOR="[Settings] Update level sensor",e.CHANGE_PIN_ASSIGNMENT="[Settings] Change pin assignment",e.LOAD_PIN_ASSIGNMENT="[Settings] Load pin assignment",e.UPDATE_PIN_ASSIGNMENT="[Settings] Update pin assignment",e.SYNC="[Settings] Sync",e.SYNC_END="[Settings] Sync end",e.BACKUP="[Settings] Backup",e.RESTORE="[Settings] Restore",e.BACKUP_REMOVE="[Settings] Backup remove",e}({}),I=function(){return function(){this.type=w.INIT}}(),D=function(){return function(e){this.payload=e,this.type=w.UPDATE}}(),_=function(){return function(){this.type=w.ADD_COMPOTE}}(),x=function(){return function(e){this.payload=e,this.type=w.CHANGE_COMPOTE}}(),k=function(){return function(e){this.payload=e,this.type=w.REMOVE_COMPOTE}}(),R=function(){return function(){this.type=w.LOAD_COMPOTE}}(),N=function(){return function(e){this.payload=e,this.type=w.ADD_COMPOTE_DAILY}}(),P=function(){return function(e){this.payload=e,this.type=w.CHANGE_COMPOTE_DAILY}}(),M=function(){return function(e){this.payload=e,this.type=w.UPDATE_COMPOTE_DAILY}}(),B=function(){return function(){this.type=w.ADD_PROGRAM}}(),L=function(){return function(e){this.payload=e,this.type=w.CHANGE_PROGRAM}}(),F=function(){return function(e){this.payload=e,this.type=w.REMOVE_PROGRAM}}(),U=function(){return function(e){this.payload=e,this.type=w.UPDATE_PROGRAM}}(),$=function(){return function(){this.type=w.LOAD_PROGRAM}}(),G=function(){return function(e){this.payload=e,this.type=w.CHANGE_PUMP}}(),H=function(){return function(e){this.payload=e,this.type=w.REMOVE_PUMP}}(),V=function(){return function(e){this.payload=e,this.type=w.UPDATE_PUMP}}(),K=function(){return function(){this.type=w.LOAD_PUMP}}(),W=function(){return function(e){this.payload=e,this.type=w.CHANGE_DOSE}}(),Y=function(){return function(e){this.payload=e,this.type=w.REMOVE_DOSE}}(),X=function(){return function(e){this.payload=e,this.type=w.UPDATE_DOSE}}(),z=function(){return function(){this.type=w.LOAD_DOSE}}(),q=function(){return function(e){this.payload=e,this.type=w.CHANGE_TIMER}}(),J=function(){return function(e){this.payload=e,this.type=w.REMOVE_TIMER}}(),Q=function(){return function(e){this.payload=e,this.type=w.UPDATE_TIMER}}(),Z=function(){return function(){this.type=w.LOAD_TIMER}}(),ee=function(){return function(e){this.payload=e,this.type=w.CHANGE_SCHEDULE}}(),te=function(){return function(e){this.payload=e,this.type=w.REMOVE_SCHEDULE}}(),ne=function(){return function(e){this.payload=e,this.type=w.UPDATE_SCHEDULE}}(),ie=function(){return function(){this.type=w.LOAD_SCHEDULE}}(),oe=function(){return function(e){this.payload=e,this.type=w.CHANGE_MIXER}}(),ce=function(){return function(e){this.payload=e,this.type=w.REMOVE_MIXER}}(),re=function(){return function(e){this.payload=e,this.type=w.UPDATE_MIXER}}(),ae=function(){return function(){this.type=w.LOAD_MIXER}}(),se=function(){return function(){this.type=w.LOAD_PIN_ASSIGNMENT}}(),ue=function(){return function(e){this.payload=e,this.type=w.CHANGE_PIN_ASSIGNMENT}}(),pe=function(){return function(e){this.payload=e,this.type=w.UPDATE_PIN_ASSIGNMENT}}(),le=function(){return function(e){this.payload=e,this.type=w.CHANGE_NAME}}(),be=function(){return function(){this.type=w.SYNC}}(),de=function(){return function(e){this.payload=e,this.type=w.BACKUP}}(),fe=function(){return function(e){this.payload=e,this.type=w.RESTORE}}(),me=function(){return function(e){this.payload=e,this.type=w.BACKUP_REMOVE}}(),he=function(e){return e.settings},ge=function(e){return e.settings.settings.program},ye=function(e){return e.settings.settings.compote},Oe=function(e){return e.settings.settings.timer},ve=function(e){return e.settings.settings.schedule},Se=function(e){return e.settings.settings.pump},Te=function(e){return e.settings.settings.mixer},Ce=function(e){return e.settings.settings.dose},Ee=function(e){return e.settings.pinAssignment.pump},je=function(e){return e.settings.pinAssignment.flowSensor},Ae=function(e){return e.settings.pinAssignment.mixer},we=function(e){return e.settings.pinAssignment.dose},Ie=function(e){return e.settings.pinAssignment.doseMixer},De=function(e){return e.settings.pinAssignment.valve},_e=function(e){return e.settings.pinAssignment.levelSensor},xe=function(e){return e.settings.pinAssignment.beeper},ke=function(e){return function(t){return t.settings.names[e]}},Re=function(e){return e.settings.sync},Ne=function(e){return e.settings.backups};function Pe(e,t){switch(void 0===e&&(e={settings:m(),pinAssignment:{pump:[],flowSensor:[],levelSensor:[],mixer:[],dose:[],doseMixer:[],valve:[],rtc:[],display:[],button:[],beeper:[]},names:{program:new Array(4).fill(""),compote:new Array(2).fill(""),schedule:new Array(4).fill(""),timer:new Array(8).fill(""),pump:["In","Out"],mixer:["Compote","Wash"],dose:["Grow","Bloom","",""],levelSensor:["Low","High"]},sync:!1,backups:[]}),t.type){case w.UPDATE:return Me(e,t.payload);case w.CHANGE_NAME:return function(e,t){var n,i=t.key,o=t.index,c=t.value,r=e.names[i].slice(0);return r[o]=c,Object(u.a)(Object(u.a)({},e),{names:Object(u.a)(Object(u.a)({},e.names),(n={},n[i]=r,n))})}(e,t.payload);case w.ADD_COMPOTE:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{compote:Object(u.f)(e.settings.compote,[{daily:[]}])})})}(e);case w.CHANGE_COMPOTE:return function(e,t){var n=t.index,i=t.value,o=e.settings.compote.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{compote:o})})}(e,t.payload);case w.REMOVE_COMPOTE:return function(e,t){var n=e.settings.compote.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{compote:n})})}(e,t.payload);case w.ADD_COMPOTE_DAILY:return function(e,t){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{compote:e.settings.compote.map(function(e,n){return n===t?Object(u.a)(Object(u.a)({},e),{daily:Object(u.f)(e.daily,[g()])}):e})})})}(e,t.payload);case w.CHANGE_COMPOTE_DAILY:case w.UPDATE_COMPOTE_DAILY:return function(e,t){var n=t.index,i=t.dailyIndex,o=t.value,c=e.settings.compote.slice(0),r=c[n].daily.slice(0);return r[i]=o,c[n]=Object(u.a)(Object(u.a)({},c[n]),{daily:r}),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{compote:c})})}(e,t.payload);case w.LOAD_COMPOTE_DAILY:return e;case w.REMOVE_COMPOTE_DAILY:return function(e,t){var n=t.index,i=e.settings.compote.slice(0);return i.splice(n,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{compote:i})})}(e,t.payload);case w.ADD_PROGRAM:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{program:Object(u.f)(e.settings.program,[h()])})})}(e);case w.CHANGE_PROGRAM:case w.UPDATE_PROGRAM:return function(e,t){var n=t.index,i=t.value,o=e.settings.program.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{program:o})})}(e,t.payload);case w.LOAD_PROGRAM:return e;case w.REMOVE_PROGRAM:return function(e,t){var n=e.settings.program.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{program:n})})}(e,t.payload);case w.ADD_DOSE:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{dose:Object(u.f)(e.settings.dose,[{rate:0,seconds:0,pwmSensor:0,pwm:0}])})})}(e);case w.CHANGE_DOSE:case w.UPDATE_DOSE:return function(e,t){var n=t.index,i=t.value,o=e.settings.dose.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{dose:o})})}(e,t.payload);case w.LOAD_DOSE:return e;case w.REMOVE_DOSE:return function(e,t){var n=e.settings.dose.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{dose:n})})}(e,t.payload);case w.ADD_PUMP:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{pump:Object(u.f)(e.settings.pump,[{minFlow:100,startingTime:3e3,pwmFlow:0,pwm:0,rate:5880}])})})}(e);case w.CHANGE_PUMP:case w.UPDATE_PUMP:return function(e,t){var n=t.index,i=t.value,o=e.settings.pump.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{pump:o})})}(e,t.payload);case w.LOAD_PUMP:return e;case w.REMOVE_PUMP:return function(e,t){var n=e.settings.pump.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{pump:n})})}(e,t.payload);case w.ADD_TIMER:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{timer:Object(u.f)(e.settings.timer,[{enable:0,program:0,weekDays:0,time:{hour:0,minute:0,second:0}}])})})}(e);case w.CHANGE_TIMER:case w.UPDATE_TIMER:return function(e,t){var n=t.index,i=t.value,o=e.settings.timer.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{timer:o})})}(e,t.payload);case w.LOAD_TIMER:return e;case w.REMOVE_TIMER:return function(e,t){var n=e.settings.timer.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{timer:n})})}(e,t.payload);case w.ADD_SCHEDULE:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{schedule:Object(u.f)(e.settings.schedule,[{enable:0,deviceId:0,startTime:{hour:0,minute:0,second:0},endTime:{hour:0,minute:0,second:0}}])})})}(e);case w.CHANGE_SCHEDULE:case w.UPDATE_SCHEDULE:return function(e,t){var n=t.index,i=t.value,o=e.settings.schedule.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{schedule:o})})}(e,t.payload);case w.LOAD_SCHEDULE:return e;case w.REMOVE_SCHEDULE:return function(e,t){var n=e.settings.schedule.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{schedule:n})})}(e,t.payload);case w.ADD_MIXER:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{mixer:Object(u.f)(e.settings.mixer,[{seconds:180,washSeconds:180,pwmSensor:0,pwm:0}])})})}(e);case w.CHANGE_MIXER:case w.UPDATE_MIXER:return function(e,t){var n=t.index,i=t.value,o=e.settings.mixer.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{mixer:o})})}(e,t.payload);case w.LOAD_MIXER:return e;case w.REMOVE_MIXER:return function(e,t){var n=e.settings.mixer.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{mixer:n})})}(e,t.payload);case w.ADD_LEVEL_SENSOR:return function(e){return Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{levelSensor:Object(u.f)(e.settings.levelSensor,[{enable:0,seconds:1}])})})}(e);case w.CHANGE_LEVEL_SENSOR:case w.UPDATE_LEVEL_SENSOR:return function(e,t){var n=t.index,i=t.value,o=e.settings.levelSensor.slice(0);return o[n]=i,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{levelSensor:o})})}(e,t.payload);case w.LOAD_LEVEL_SENSOR:return e;case w.REMOVE_LEVEL_SENSOR:return function(e,t){var n=e.settings.levelSensor.slice(0);return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},e.settings),{levelSensor:n})})}(e,t.payload);case w.LOAD_PIN_ASSIGNMENT:return e;case w.CHANGE_PIN_ASSIGNMENT:case w.UPDATE_PIN_ASSIGNMENT:return function(e,t){var n,i=t.type,o=t.index,c=t.value,r=e.pinAssignment[j[i]].slice(0);r[o]=c;var a=Object(u.a)(Object(u.a)({},e.pinAssignment),((n={})[j[i]]=r,n));return Object(u.a)(Object(u.a)({},e),{pinAssignment:a})}(e,t.payload);case w.SYNC:return Object(u.a)(Object(u.a)({},e),{sync:!0});case w.SYNC_END:return Object(u.a)(Object(u.a)({},e),{sync:!1});case w.BACKUP:return function(e,t){var n=t.name;return Object(u.a)(Object(u.a)({},e),{backups:Object(u.f)([{name:n,date:new Date,backup:{settings:e.settings,pinAssignment:e.pinAssignment,names:e.names}}],e.backups)})}(e,t.payload);case w.RESTORE:return function(e,t){var n=e.backups[t].backup;return Me(e,Object(u.a)(Object(u.a)({},e),{settings:Object(u.a)(Object(u.a)({},m()),n.settings),pinAssignment:Object(u.a)(Object(u.a)({},{pump:[],flowSensor:[],levelSensor:[],mixer:[],dose:[],doseMixer:[],valve:[],rtc:[],display:[],button:[],beeper:[]}),n.pinAssignment),names:n.names}))}(e,t.payload);case w.BACKUP_REMOVE:return function(e,t){var n=e.backups.slice();return n.splice(t,1),Object(u.a)(Object(u.a)({},e),{backups:n})}(e,t.payload);default:return e}}function Me(e,t){return t?Object(u.a)(Object(u.a)({},t),{settings:{program:Le(t.settings.program,4,h),compote:Le(t.settings.compote,2,y),schedule:Le(t.settings.schedule,4,O),timer:Le(t.settings.timer,8,v),pump:Le(t.settings.pump,2,S),levelSensor:Le(t.settings.levelSensor,2,C),mixer:Le(t.settings.mixer,1,E),dose:Le(t.settings.dose,4,T)},pinAssignment:{pump:Le(t.pinAssignment.pump,2,Be),levelSensor:Le(t.pinAssignment.levelSensor,2,Be),mixer:Le(t.pinAssignment.mixer,1,Be),dose:Le(t.pinAssignment.dose,4,Be),valve:Le(t.pinAssignment.valve,l,Be),doseMixer:Le(t.pinAssignment.doseMixer,4,Be),flowSensor:Le(t.pinAssignment.flowSensor,2,Be),rtc:Le(t.pinAssignment.rtc,1,Be),display:t.pinAssignment.display,button:Le(t.pinAssignment.button,0,Be),beeper:Le(t.pinAssignment.beeper,1,Be)}}):e}function Be(){return 0}function Le(e,t,n){if(e.length===t)return e;if(e.length>t)return e.slice(0,t);for(var i=e.slice(),o=e.length;o<t;o++)i.push(n());return i}var Fe=function(e){return e.INIT="[Config] Init",e.UPDATE="[Config] Update",e.UPDATE_DATABASE_SIZES="[Config] Update size",e.SET_DEVICE="[Config] Set device",e.SET_DATABASE_SIZES="[Config] Set database sizes",e.CHANGE="[Config] Change",e.CLEAR_DATABASE="[Config] Clear database",e}({}),Ue=function(){return function(){this.type=Fe.INIT}}(),$e=function(){return function(e){this.payload=e,this.type=Fe.UPDATE}}(),Ge=function(){return function(){this.type=Fe.UPDATE_DATABASE_SIZES}}(),He=function(){return function(e){this.payload=e,this.type=Fe.SET_DEVICE}}(),Ve=function(){return function(e){this.payload=e,this.type=Fe.SET_DATABASE_SIZES}}(),Ke=function(){return function(e){this.payload=e,this.type=Fe.CHANGE}}(),We=function(){return function(e){this.payload=e,this.type=Fe.CLEAR_DATABASE}}(),Ye={device:null,databaseSizes:[],updateDatabaseSizes:!1,monitor:{time:{enable:!0,interval:5e3},temp:{enable:!0,interval:5e3},status:{enable:!0,interval:5e3}},accessControl:{enable:!1,fps:3}},Xe=function(e){return e.config},ze=function(e){return e.config.device},qe=function(e){return e.config.databaseSizes},Je=function(e){return e.config.updateDatabaseSizes},Qe=function(e){return e.config.monitor},Ze=function(e){return e.config.accessControl};function et(e,t){switch(void 0===e&&(e=Ye),t.type){case Fe.UPDATE:return function(e,t){return t||e}(e,t.payload);case Fe.UPDATE_DATABASE_SIZES:return Object(u.a)(Object(u.a)({},e),{updateDatabaseSizes:!0});case Fe.SET_DEVICE:return function(e,t){return Object(u.a)(Object(u.a)({},e),{device:t})}(e,t.payload);case Fe.SET_DATABASE_SIZES:return function(e,t){return Object(u.a)(Object(u.a)({},e),{databaseSizes:t,updateDatabaseSizes:!1})}(e,t.payload);case Fe.CHANGE:return Object(u.a)(Object(u.a)({},e),t.payload);default:return e}}var tt=n("pLZG"),nt=n("lJxs"),it=n("IzEk"),ot=function(e){return e.CONNECTING="connecting",e.CONNECTED="connected",e.DISCONNECTING="disconnecting",e.DISCONNECTED="disconnected",e.TRANSFER="transfer",e}({}),ct=function(e){return e.CONNECT="[Connect] Connect",e.DISCONNECT="[Connect] Disconnect",e.SET_STATUS="[Connect] Set status",e.REQUEST="[Connect] Request",e.RESPONSE="[Connect] Response",e.ERROR="[Connect] Error",e}({}),rt=function(){return function(){this.type=ct.CONNECT}}(),at=function(){return function(){this.type=ct.DISCONNECT}}(),st=function(){return function(e){this.payload=e,this.type=ct.SET_STATUS}}(),ut=function(){return function(e){this.payload=e,this.type=ct.REQUEST}}(),pt=function(){return function(e){this.payload=e,this.type=ct.RESPONSE}}(),lt=function(){return function(e){this.payload=e,this.type=ct.ERROR}}(),bt={status:ot.DISCONNECTED},dt=function(e){return e.connect.status};function ft(e,t){switch(void 0===e&&(e=bt),t.type){case ct.CONNECT:return Object(u.a)(Object(u.a)({},e),{status:ot.CONNECTING});case ct.DISCONNECT:return Object(u.a)(Object(u.a)({},e),{status:ot.DISCONNECTING});case ct.SET_STATUS:return Object(u.a)(Object(u.a)({},e),{status:t.payload});case ct.REQUEST:return Object(u.a)({},e);case ct.ERROR:return Object(u.a)(Object(u.a)({},e),{status:ot.DISCONNECTED});default:return e}}var mt=function(e){return e.INIT="[Dashboard] Init",e.UPDATE_TIME="[Dashboard] Update time",e.UPDATE_TEMP="[Dashboard] Update temp",e.UPDATE_STATUS="[Dashboard] Update status",e.SYNC_TIME="[Dashboard] Sync time",e}({}),ht=function(){return function(){this.type=mt.INIT}}(),gt=function(){return function(e){this.payload=e,this.type=mt.UPDATE_TIME}}(),yt=function(){return function(e){this.payload=e,this.type=mt.UPDATE_TEMP}}(),Ot=function(){return function(e){this.payload=e,this.type=mt.UPDATE_STATUS}}(),vt=function(){return function(){this.type=mt.SYNC_TIME}}(),St={time:{minute:0,second:0,hour:0,wday:0,day:0,month:0,year:0},temp:0,minTemp:-99,maxTemp:99,status:{state:0,cmdState:0,valve:0,flow:0,volume:0,totalVolume:0,mix:0,doseId:0,valveId:0}},Tt=function(e){return e.dashboard.time},Ct=function(e){return e.dashboard.temp},Et=function(e){return e.dashboard.minTemp},jt=function(e){return e.dashboard.maxTemp},At=function(e){return e.dashboard.status};function wt(e,t){switch(void 0===e&&(e=St),t.type){case mt.UPDATE_TIME:return function(e,t){return Object(u.a)(Object(u.a)({},e),{time:t})}(e,t.payload);case mt.UPDATE_TEMP:return function(e,t){return Object(u.a)(Object(u.a)({},e),{temp:t,minTemp:Math.min(t,e.minTemp),maxTemp:Math.max(t,e.maxTemp)})}(e,t.payload);case mt.UPDATE_STATUS:return function(e,t){return Object(u.a)(Object(u.a)({},e),{status:t})}(e,t.payload);default:return e}}var It=function(e){return e[e.fertigate=0]="fertigate",e[e.irrigate=1]="irrigate",e[e.wash=2]="wash",e[e.pumpIn=3]="pumpIn",e[e.compote=4]="compote",e[e.washCompote=5]="washCompote",e[e.mix=6]="mix",e[e.mixDose=7]="mixDose",e[e.dose=8]="dose",e[e.getProgram=9]="getProgram",e[e.setProgram=10]="setProgram",e[e.getCompoteDaily=11]="getCompoteDaily",e[e.setCompoteDaily=12]="setCompoteDaily",e[e.getSchedule=13]="getSchedule",e[e.setSchedule=14]="setSchedule",e[e.getTimer=15]="getTimer",e[e.setTimer=16]="setTimer",e[e.getPump=17]="getPump",e[e.setPump=18]="setPump",e[e.getMixer=19]="getMixer",e[e.setMixer=20]="setMixer",e[e.getDose=21]="getDose",e[e.setDose=22]="setDose",e[e.getLevelSensor=23]="getLevelSensor",e[e.setLevelSensor=24]="setLevelSensor",e[e.getPin=25]="getPin",e[e.setPin=26]="setPin",e[e.getTime=27]="getTime",e[e.setTime=28]="setTime",e[e.getTemp=29]="getTemp",e[e.getStatus=30]="getStatus",e[e.getStatePump=31]="getStatePump",e[e.setStatePump=32]="setStatePump",e[e.getStateValve=33]="getStateValve",e[e.setStateValve=34]="setStateValve",e[e.getStateMixer=35]="getStateMixer",e[e.setStateMixer=36]="setStateMixer",e[e.getStateDose=37]="getStateDose",e[e.setStateDose=38]="setStateDose",e[e.getStateDoseMixer=39]="getStateDoseMixer",e[e.setStateDoseMixer=40]="setStateDoseMixer",e[e.resetError=41]="resetError",e}({}),Dt=function(e){return e[e.commandSuccess=0]="commandSuccess",e[e.log=1]="log",e[e.error=2]="error",e[e.status=3]="status",e[e.program=4]="program",e[e.compoteDaily=5]="compoteDaily",e[e.schedule=6]="schedule",e[e.timer=7]="timer",e[e.pump=8]="pump",e[e.mixer=9]="mixer",e[e.dose=10]="dose",e[e.levelSensor=11]="levelSensor",e[e.pin=12]="pin",e[e.time=13]="time",e[e.temp=14]="temp",e[e.statePump=15]="statePump",e[e.stateValve=16]="stateValve",e[e.stateMixer=17]="stateMixer",e[e.stateDose=18]="stateDose",e[e.stateDoseMixer=19]="stateDoseMixer",e}({}),_t=function(e){return e[e.idle=0]="idle",e[e.fertigate=1]="fertigate",e[e.pumpIn=2]="pumpIn",e[e.irrigate=3]="irrigate",e[e.wash=4]="wash",e[e.compote=5]="compote",e[e.washCompote=6]="washCompote",e[e.mixer=7]="mixer",e[e.dose=8]="dose",e[e.doseMixer=9]="doseMixer",e[e.error=255]="error",e}({}),xt=function(e){return e[e.pumpIn=0]="pumpIn",e[e.mixDose=1]="mixDose",e[e.dose=2]="dose",e[e.mix=3]="mix",e[e.irrigate=4]="irrigate",e[e.irrigateFinish=5]="irrigateFinish",e[e.washPumpIn=6]="washPumpIn",e[e.washMix=7]="washMix",e[e.wash=8]="wash",e[e.done=9]="done",e}({}),kt=function(e){return e[e.pumpIn=1]="pumpIn",e[e.dose=2]="dose",e[e.pumpOut=3]="pumpOut",e[e.pumpOutLast=4]="pumpOutLast",e[e.sensorOut=5]="sensorOut",e[e.io=6]="io",e[e.badCmdState=7]="badCmdState",e[e.lowWaterLevel=8]="lowWaterLevel",e[e.highWaterLevel=9]="highWaterLevel",e}({}),Rt=function(e){return e.INIT="[Log] Init",e.ADD="[Log] Add",e.RESET_FILTER="[Log] Reset filter",e.SET_FILTER="[Log] Set filter",e.TOGGLE_FILTER="[Log] Toggle filter",e.TOGGLE_EXPAND_FILTER="[Log] Toggle expand filter",e}({}),Nt=function(){return function(){this.type=Rt.INIT}}(),Pt=function(){return function(e){this.payload=e,this.type=Rt.ADD}}(),Mt=function(){return function(){this.type=Rt.RESET_FILTER}}(),Bt=function(){return function(e){this.payload=e,this.type=Rt.SET_FILTER}}(),Lt=function(){return function(e){this.payload=e,this.type=Rt.TOGGLE_FILTER}}(),Ft=function(){return function(e){this.payload=e,this.type=Rt.TOGGLE_EXPAND_FILTER}}(),Ut=function(e){return e[e.connect=0]="connect",e[e.disconnect=1]="disconnect",e[e.response=2]="response",e[e.request=3]="request",e[e.error=4]="error",e}({}),$t={items:[],filteredItems:[],filter:zt(),hasFilter:!1},Gt=function(e){return e.log.filter},Ht=function(e){return e.log.hasFilter},Vt=function(e){return e.log.filteredItems};function Kt(e,t){switch(void 0===e&&(e=$t),t.type){case Rt.ADD:return function(e,t){var n=Object(u.f)([t],e.items),i=Yt(t,e.filter)?Object(u.f)([t],e.filteredItems):e.filteredItems;return n.length>1e4&&n.pop()===i[i.length-1]&&i.pop(),Object(u.a)(Object(u.a)({},e),{items:n,filteredItems:i})}(e,t.payload);case Rt.RESET_FILTER:return function(e){var t=zt();return Object(u.a)(Object(u.a)({},e),{filter:t,hasFilter:!1,filteredItems:Wt(e.items,t)})}(e);case Rt.SET_FILTER:return function(e,t){return Object(u.a)(Object(u.a)({},e),{filter:t,hasFilter:qt(t),filteredItems:Wt(e.items,t)})}(e,t.payload);case Rt.TOGGLE_FILTER:return function(e,t){var n=e.filter.slice(0),i=n.findIndex(function(e){return e===t}),o=!t.selected,c=t.level;n[i]=Object(u.a)(Object(u.a)({},t),{selected:o});for(var r=i+1;r<n.length&&!((a=n[r]).level<=c);r++)n[r]=Object(u.a)(Object(u.a)({},a),{selected:o});if(c)for(r=i-1;r>=0&&c;r--){var a;if(!((a=n[r]).level>=c)){var s=n[r+1].selected;if(null!==s)for(var p=r+2;p<n.length&&!(n[p].level<c);p++)if(s!==n[p].selected){s=null;break}a.selected!==s&&(n[r]=Object(u.a)(Object(u.a)({},a),{selected:s})),c--}}return Object(u.a)(Object(u.a)({},e),{filter:n,hasFilter:qt(n),filteredItems:Wt(e.items,n)})}(e,t.payload);case Rt.TOGGLE_EXPAND_FILTER:return function(e,t){var n=e.filter.slice(0),i=n.findIndex(function(e){return e===t}),o=!t.expanded,c=t.level+1;n[i]=Object(u.a)(Object(u.a)({},t),{expanded:o});for(var r=i+1;r<n.length;r++){var a=n[r];if(a.level<c)break;n[r]=Object(u.a)(Object(u.a)({},a),{visible:o,expanded:o})}return Object(u.a)(Object(u.a)({},e),{filter:n,hasFilter:qt(n),filteredItems:Wt(e.items,n)})}(e,t.payload);default:return e}}function Wt(e,t){return e.filter(function(e){return Yt(e,t)})}function Yt(e,t){var n=t.find(function(t){return t.type===e.type&&t.subType===e.subType});return!n||n.selected}function Xt(e,t,n,i){return Object(u.f)([{level:e,title:t,selected:!0,expandable:!0,expanded:!0,visible:!0,type:i}],Object.keys(n).filter(function(e){return isNaN(+e)}).map(function(t){return{level:e+1,title:(o=t,(o.slice(0,1).toUpperCase()+o.slice(1)).split(/(?=[A-Z])/).join(" ")),selected:!0,expandable:!1,expanded:!0,visible:!0,type:i,subType:n[t]};var o}))}function zt(){return Object(u.f)([{level:0,title:"Bluetooth",selected:!0,expandable:!0,expanded:!0,visible:!0,type:Ut.connect},{level:1,title:"Connect",selected:!0,expandable:!1,expanded:!0,visible:!0,type:Ut.connect},{level:1,title:"Disconnect",selected:!0,expandable:!1,expanded:!0,visible:!0,type:Ut.disconnect}],Xt(1,"Device Request",It,Ut.request),Xt(1,"Device Response",Dt,Ut.response),Xt(0,"Errors",kt,Ut.error))}function qt(e){return!e.every(function(e){return e.selected})}var Jt=function(e){return e.INIT="[AccessControl] Init",e.ADD="[AccessControl] Add",e.UPDATE="[AccessControl] Update",e}({}),Qt=function(){return function(){this.type=Jt.INIT}}(),Zt=function(){return function(e){this.payload=e,this.type=Jt.ADD}}(),en=function(){return function(e){this.payload=e,this.type=Jt.UPDATE}}(),tn={items:[]},nn=function(e){return e.accessControl.items},on=function(e){return e.accessControl.items[0]};function cn(e,t){switch(void 0===e&&(e=tn),t.type){case Jt.ADD:return function(e,t){var n,i;return!e.items.length||t.key-e.items[0].value.lastKey>6e4?(n={key:t.key,value:{lastKey:t.key}},i=Object(u.f)([n],e.items),Object(u.a)(Object(u.a)({},e),{items:i})):(n=Object(u.a)(Object(u.a)({},e.items[0]),{value:{lastKey:t.key}}),(i=e.items.slice(0))[0]=n,Object(u.a)(Object(u.a)({},e),{items:i}))}(e,t.payload);case Jt.UPDATE:return Object(u.a)(Object(u.a)({},e),{items:t.payload});default:return e}}var rn=n("/t3+"),an=n("ofXK"),sn=n("XhcP"),un=n("MutI"),pn=n("bTqV"),ln=n("NFeN"),bn=function(){function e(){this.btStatusConnect=new Map([[ot.CONNECTED,"bluetooth-connect"],[ot.CONNECTING,"bluetooth-transfer"],[ot.DISCONNECTED,"bluetooth-off"],[ot.DISCONNECTING,"bluetooth-transfer"],[ot.TRANSFER,"bluetooth-transfer"]])}return e.prototype.transform=function(e,t){return this.btStatusConnect.get(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"btStatusIcon",type:e,pure:!0}),e}();function dn(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",8),i.ac("click",function(){return i.sc(n),i.ec(),i.qc(11).toggle()}),i.Ob(1,"mat-icon",9),i.Sb()}}function fn(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",8),i.ac("click",function(){return i.sc(n),i.ec().onBack()}),i.Ob(1,"mat-icon",10),i.Sb()}}function mn(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",8),i.ac("click",function(){return i.sc(n),i.ec().onAdd()}),i.Ob(1,"mat-icon",11),i.Sb()}}function hn(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",8),i.ac("click",function(){return i.sc(n),i.ec().onSync()}),i.Ob(1,"mat-icon",12),i.Sb()}}function gn(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",13),i.Tb(1,"mat-icon",14),i.ac("click",function(){return i.sc(n),i.ec().onBt()}),i.fc(2,"btStatusIcon"),i.Sb(),i.Sb()}if(2&e){var o=i.ec();i.Bb(1),i.kc("svgIcon",i.gc(2,1,o.btStatus))}}function yn(e,t){if(1&e&&i.Ob(0,"mat-icon",17),2&e){var n=i.ec().$implicit;i.kc("svgIcon",n.icon)}}function On(e,t){if(1&e){var n=i.Ub();i.Tb(0,"a",15),i.ac("click",function(){return i.sc(n),i.ec(),i.qc(11).toggle()}),i.Ac(1,yn,1,1,"mat-icon",16),i.Cc(2),i.Sb()}if(2&e){var o=t.$implicit;i.kc("routerLink",o.route),i.Bb(1),i.kc("ngIf",o.icon),i.Bb(1),i.Ec(" \xa0 ",o.title," ")}}var vn=["*"],Sn=function(){function e(){this.back=new i.n,this.add=new i.n,this.sync=new i.n,this.bt=new i.n,this.links=[{route:["/"],title:"Dashboard",icon:"view-dashboard"},{route:["/","settings"],title:"Settings",icon:"cog-outline"},{route:["/","monitor"],title:"Monitor",icon:"chart-bar"},{route:["/","calibrate"],title:"Calibrate",icon:"gauge"},{route:["/","manual-control"],title:"Manual control",icon:"cursor-pointer"},{route:["/","access-control"],title:"Access control",icon:"webcam"},{route:["/","log"],title:"Log",icon:"format-list-bulleted"},{route:["/","config"],title:"Config",icon:"cellphone-settings"},{route:["/","test"],title:"Test",icon:"cursor-pointer"},{route:["/","dev"],title:"Development",icon:"dev-to"}]}return Object.defineProperty(e.prototype,"showMenu",{get:function(){return this.options&&this.options.actions&&this.options.actions.includes("menu")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showAdd",{get:function(){return this.options&&this.options.actions&&this.options.actions.includes("add")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showBack",{get:function(){return this.options&&this.options.actions&&this.options.actions.includes("back")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showSync",{get:function(){return this.options&&this.options.actions&&this.options.actions.includes("sync")&&this.syncStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showBt",{get:function(){return this.options&&this.options.actions&&this.options.actions.includes("bt")},enumerable:!1,configurable:!0}),e.prototype.onBack=function(){this.back.next()},e.prototype.onAdd=function(){this.add.next()},e.prototype.onSync=function(){this.sync.next()},e.prototype.onBt=function(){this.bt.next()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-page"]],inputs:{options:"options",title:"title",btStatus:"btStatus",syncStatus:"syncStatus"},outputs:{back:"back",add:"add",sync:"sync",bt:"bt"},ngContentSelectors:vn,decls:16,vars:7,consts:[[1,"d-flex","flex-column","app-content"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"flex-fill","text-center"],["mat-icon-button","",4,"ngIf"],[1,"flex-fill",3,"backdropClick"],["mode","over"],["sidenav",""],["mat-list-item","",3,"routerLink","click",4,"ngFor","ngForOf"],["mat-icon-button","",3,"click"],["svgIcon","menu"],["svgIcon","arrow-left"],["svgIcon","plus-circle-outline"],["svgIcon","sync"],["mat-icon-button",""],[3,"svgIcon","click"],["mat-list-item","",3,"routerLink","click"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(e,t){if(1&e){var n=i.Ub();i.jc(),i.Tb(0,"div",0),i.Tb(1,"mat-toolbar"),i.Ac(2,dn,2,0,"button",1),i.Ac(3,fn,2,0,"button",1),i.Tb(4,"span",2),i.Cc(5),i.Sb(),i.Ac(6,mn,2,0,"button",1),i.Ac(7,hn,2,0,"button",1),i.Ac(8,gn,3,3,"button",3),i.Sb(),i.Tb(9,"mat-sidenav-container",4),i.ac("backdropClick",function(){return i.sc(n),i.qc(11).close()}),i.Tb(10,"mat-sidenav",5,6),i.Tb(12,"mat-nav-list"),i.Ac(13,On,3,3,"a",7),i.Sb(),i.Sb(),i.Tb(14,"mat-sidenav-content"),i.ic(15),i.Sb(),i.Sb(),i.Sb()}2&e&&(i.Bb(2),i.kc("ngIf",t.showMenu),i.Bb(1),i.kc("ngIf",t.showBack),i.Bb(2),i.Dc(null==t.options?null:t.options.title),i.Bb(1),i.kc("ngIf",t.showAdd),i.Bb(1),i.kc("ngIf",t.showSync),i.Bb(1),i.kc("ngIf",t.showBt),i.Bb(5),i.kc("ngForOf",t.links))},directives:[rn.a,an.m,sn.b,sn.a,un.d,an.l,sn.c,pn.a,ln.a,un.b,r.d],pipes:[bn],styles:[".app-content[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}"],changeDetection:0}),e}(),Tn=function(){function e(e,t,n){this.store=e,this.router=t,this.activatedRoute=n,this.pageOptions$=this.router.events.pipe(Object(tt.a)(function(e){return e instanceof r.b})).pipe(Object(nt.a)(function(e){return e.snapshot.data})),this.btStatus$=this.store.pipe(Object(p.h)(dt)),this.sync$=this.store.pipe(Object(p.h)(Re)),this.store.dispatch(new I),this.store.dispatch(new Ue),this.store.dispatch(new ht),this.store.dispatch(new Nt),this.store.dispatch(new Qt)}return e.prototype.onBack=function(){var e=this.getRoute().snapshot.pathFromRoot;e.pop();var t=e.map(function(e){return e.url}).reduce(function(e,t){return Object(u.f)(e,t)},[]),n=Object(u.f)(["/"],t.map(function(e){return e.path}));this.router.navigate(n)},e.prototype.onAdd=function(){switch(this.getRoute().routeConfig.path){case"compote":this.store.dispatch(new _);break;case"program":this.store.dispatch(new B)}},e.prototype.onBt=function(){var e=this;this.store.pipe(Object(p.h)(dt)).pipe(Object(it.a)(1)).subscribe(function(t){t===ot.DISCONNECTED?e.store.dispatch(new rt):t===ot.CONNECTED&&e.store.dispatch(new at)})},e.prototype.onSync=function(){this.store.dispatch(new be)},e.prototype.getRoute=function(){for(var e=this.activatedRoute.firstChild,t=e;t;)t.firstChild?e=t=t.firstChild:t=null;return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(r.c),i.Nb(r.a))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-root"]],decls:5,vars:9,consts:[[3,"options","btStatus","syncStatus","back","add","bt","sync"]],template:function(e,t){1&e&&(i.Tb(0,"app-page",0),i.ac("back",function(){return t.onBack()})("add",function(){return t.onAdd()})("bt",function(){return t.onBt()})("sync",function(){return t.onSync()}),i.fc(1,"async"),i.fc(2,"async"),i.fc(3,"async"),i.Ob(4,"router-outlet"),i.Sb()),2&e&&i.kc("options",i.gc(1,3,t.pageOptions$))("btStatus",i.gc(2,5,t.btStatus$))("syncStatus",i.gc(3,7,t.sync$))},directives:[Sn,r.f],pipes:[an.b],styles:[""]}),e}(),Cn=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,r.e,pn.b,ln.b,rn.b,sn.d,un.c]]}),e}(),En=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c]]}),e}(),jn=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,ln.b,pn.b]]}),e}(),An=n("XNiG"),wn=n("JYkB"),In=["chart"],Dn=function(){function e(){}return e.prototype.ngAfterViewInit=function(){this.chart=new wn.SmoothieChart({millisPerPixel:5e3,responsive:!0,grid:{verticalSections:3,millisPerLine:6e4,sharpLines:!0}}),this.series=new wn.TimeSeries,this.chart.addTimeSeries(this.series,{strokeStyle:"rgba(0, 255, 0, 1)",fillStyle:"rgba(0, 255, 0, 0.2)",lineWidth:1}),this.chart.streamTo(this.chartCanvas.nativeElement,5e3)},e.prototype.add=function(e){this.series.append((new Date).getTime(),e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-time-chart"]],viewQuery:function(e,t){var n;1&e&&i.wc(In,!0),2&e&&i.pc(n=i.bc())&&(t.chartCanvas=n.first)},decls:2,vars:0,consts:[["chart",""]],template:function(e,t){1&e&&i.Ob(0,"canvas",null,0)},styles:["canvas[_ngcontent-%COMP%]{width:100%;height:70px}"]}),e}(),_n=n("9jGm"),xn=n("1G5W"),kn=n("Wp6s");function Rn(e,t){1&e&&i.Pb(0)}function Nn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Rn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(12);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function Pn(e,t){1&e&&i.Pb(0)}function Mn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Pn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(18);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function Bn(e,t){1&e&&i.Pb(0)}function Ln(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Bn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(20);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function Fn(e,t){1&e&&i.Pb(0)}function Un(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Fn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(16);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function $n(e,t){1&e&&i.Pb(0)}function Gn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,$n,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(14);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function Hn(e,t){1&e&&i.Pb(0)}function Vn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Hn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(14);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function Kn(e,t){1&e&&i.Pb(0)}function Wn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Kn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(12);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function Yn(e,t){1&e&&i.Pb(0)}function Xn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Yn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(16);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function zn(e,t){1&e&&i.Pb(0)}function qn(e,t){if(1&e&&(i.Rb(0),i.Ac(1,zn,1,0,"ng-container",8),i.Qb()),2&e){i.ec(2);var n=i.qc(14);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function Jn(e,t){1&e&&(i.Rb(0),i.Cc(1," Unknown state "),i.Qb())}function Qn(e,t){if(1&e&&(i.Rb(0),i.Rb(1,0),i.Ac(2,Nn,2,1,"ng-container",1),i.Ac(3,Mn,2,1,"ng-container",1),i.Ac(4,Ln,2,1,"ng-container",1),i.Ac(5,Un,2,1,"ng-container",1),i.Ac(6,Gn,2,1,"ng-container",1),i.Ac(7,Vn,2,1,"ng-container",1),i.Ac(8,Wn,2,1,"ng-container",1),i.Ac(9,Xn,2,1,"ng-container",1),i.Ac(10,qn,2,1,"ng-container",1),i.Ac(11,Jn,2,0,"ng-container",2),i.Qb(),i.Qb()),2&e){var n=i.ec();i.Bb(1),i.kc("ngSwitch",n.status.cmdState),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.pumpIn),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.mixDose),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.dose),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.mix),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.irrigate),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.irrigateFinish),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.washPumpIn),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.washMix),i.Bb(1),i.kc("ngSwitchCase",n.FertigateState.wash)}}function Zn(e,t){1&e&&i.Pb(0)}function ei(e,t){if(1&e&&(i.Rb(0),i.Ac(1,Zn,1,0,"ng-container",8),i.Qb()),2&e){i.ec();var n=i.qc(14);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function ti(e,t){1&e&&i.Pb(0)}function ni(e,t){if(1&e&&(i.Rb(0),i.Ac(1,ti,1,0,"ng-container",8),i.Qb()),2&e){i.ec();var n=i.qc(14);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function ii(e,t){1&e&&i.Pb(0)}function oi(e,t){if(1&e&&(i.Rb(0),i.Ac(1,ii,1,0,"ng-container",8),i.Qb()),2&e){i.ec();var n=i.qc(12);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function ci(e,t){1&e&&i.Pb(0)}function ri(e,t){if(1&e&&(i.Rb(0),i.Ac(1,ci,1,0,"ng-container",8),i.Qb()),2&e){i.ec();var n=i.qc(16);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function ai(e,t){1&e&&i.Pb(0)}function si(e,t){if(1&e&&(i.Rb(0),i.Ac(1,ai,1,0,"ng-container",8),i.Qb()),2&e){i.ec();var n=i.qc(20);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function ui(e,t){1&e&&i.Pb(0)}function pi(e,t){if(1&e&&(i.Rb(0),i.Ac(1,ui,1,0,"ng-container",8),i.Qb()),2&e){i.ec();var n=i.qc(16);i.Bb(1),i.kc("ngTemplateOutlet",n)}}function li(e,t){1&e&&(i.Rb(0),i.Cc(1," Idle "),i.Qb())}function bi(e,t){if(1&e){var n=i.Ub();i.Rb(0),i.Cc(1," Error state "),i.Tb(2,"button",9),i.ac("click",function(){return i.sc(n),i.ec().onReset()}),i.Cc(3,"Reset error"),i.Sb(),i.Qb()}}function di(e,t){1&e&&(i.Rb(0),i.Cc(1," Unknown state "),i.Qb())}function fi(e,t){if(1&e&&(i.Tb(0,"div",10),i.Tb(1,"div",11),i.Ob(2,"mat-icon",12),i.Cc(3," Pump in "),i.Sb(),i.Sb(),i.Tb(4,"div",10),i.Tb(5,"div",13),i.Cc(6," Flow "),i.Sb(),i.Tb(7,"div",14),i.Cc(8),i.fc(9,"number"),i.Sb(),i.Sb(),i.Tb(10,"div",10),i.Tb(11,"div",13),i.Cc(12," Total volume "),i.Sb(),i.Tb(13,"div",14),i.Cc(14),i.fc(15,"number"),i.Sb(),i.Sb()),2&e){var n=i.ec();i.Bb(8),i.Ec(" ",i.hc(9,2,n.status.flow,"1.0-0")," mL/minute "),i.Bb(6),i.Ec(" ",i.hc(15,5,n.status.totalVolume,"1.0-0")," mL ")}}function mi(e,t){if(1&e&&(i.Tb(0,"div",10),i.Tb(1,"div",11),i.Ob(2,"mat-icon",15),i.Cc(3," Pump out "),i.Sb(),i.Sb(),i.Tb(4,"div",10),i.Tb(5,"div",13),i.Cc(6," Flow "),i.Sb(),i.Tb(7,"div",14),i.Cc(8),i.Sb(),i.Sb(),i.Tb(9,"div",10),i.Tb(10,"div",13),i.Cc(11," Flow "),i.Sb(),i.Tb(12,"div",14),i.Cc(13),i.fc(14,"number"),i.Sb(),i.Sb(),i.Tb(15,"div",10),i.Tb(16,"div",13),i.Cc(17," Total volume "),i.Sb(),i.Tb(18,"div",14),i.Cc(19),i.fc(20,"number"),i.Sb(),i.Sb()),2&e){var n=i.ec();i.Bb(8),i.Ec(" ",n.status.valveId+1," "),i.Bb(5),i.Ec(" ",i.hc(14,3,n.status.flow,"1.0-0")," mL/minute "),i.Bb(6),i.Ec(" ",i.hc(20,6,n.status.totalVolume,"1.0-0")," mL ")}}function hi(e,t){if(1&e&&(i.Tb(0,"div",10),i.Tb(1,"div",11),i.Ob(2,"mat-icon",12),i.Cc(3," Mix "),i.Sb(),i.Sb(),i.Tb(4,"div",10),i.Tb(5,"div",13),i.Cc(6," ETA "),i.Sb(),i.Tb(7,"div",14),i.Cc(8),i.Sb(),i.Sb()),2&e){var n=i.ec();i.Bb(8),i.Ec(" ",n.status.mix," seconds ")}}function gi(e,t){if(1&e&&(i.Tb(0,"div",10),i.Tb(1,"div",11),i.Ob(2,"mat-icon",12),i.Cc(3," Mix dose "),i.Sb(),i.Sb(),i.Tb(4,"div",10),i.Tb(5,"div",13),i.Cc(6," ETA "),i.Sb(),i.Tb(7,"div",14),i.Cc(8),i.Sb(),i.Sb()),2&e){var n=i.ec();i.Bb(8),i.Ec(" ",n.status.mix," seconds ")}}function yi(e,t){if(1&e&&(i.Tb(0,"div",10),i.Tb(1,"div",11),i.Ob(2,"mat-icon",12),i.Cc(3," Dose "),i.Sb(),i.Sb(),i.Tb(4,"div",10),i.Tb(5,"div",13),i.Cc(6," Doze # "),i.Sb(),i.Tb(7,"div",14),i.Cc(8),i.Sb(),i.Sb()),2&e){var n=i.ec();i.Bb(8),i.Ec(" ",n.status.doseId," ")}}var Oi=function(){function e(e){this.store=e,this.DeviceState=_t,this.FertigateState=xt}return e.prototype.onReset=function(){this.store.dispatch(new ut({type:It.resetError,payload:{fake:0}}))},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-status"]],inputs:{status:"status"},decls:21,vars:10,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["pumpInTemplate",""],["pumpOutTemplate",""],["mixTemplate",""],["mixDoseTemplate",""],["doseTemplate",""],[4,"ngTemplateOutlet"],["type","button","mat-button","",3,"click"],[1,"row"],[1,"col-12"],["svgIcon","water-pump"],[1,"col-6","text-right"],[1,"col-6","text-left"],["svgIcon","fountain"]],template:function(e,t){1&e&&(i.Rb(0,0),i.Ac(1,Qn,12,10,"ng-container",1),i.Ac(2,ei,2,1,"ng-container",1),i.Ac(3,ni,2,1,"ng-container",1),i.Ac(4,oi,2,1,"ng-container",1),i.Ac(5,ri,2,1,"ng-container",1),i.Ac(6,si,2,1,"ng-container",1),i.Ac(7,pi,2,1,"ng-container",1),i.Ac(8,li,2,0,"ng-container",1),i.Ac(9,bi,4,0,"ng-container",1),i.Ac(10,di,2,0,"ng-container",2),i.Qb(),i.Ac(11,fi,16,8,"ng-template",null,3,i.Bc),i.Ac(13,mi,21,9,"ng-template",null,4,i.Bc),i.Ac(15,hi,9,1,"ng-template",null,5,i.Bc),i.Ac(17,gi,9,1,"ng-template",null,6,i.Bc),i.Ac(19,yi,9,1,"ng-template",null,7,i.Bc)),2&e&&(i.kc("ngSwitch",t.status.state),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.fertigate),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.irrigate),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.wash),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.pumpIn),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.mixer),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.dose),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.doseMixer),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.idle),i.Bb(1),i.kc("ngSwitchCase",t.DeviceState.error))},directives:[an.n,an.o,an.p,an.q,pn.a,ln.a],pipes:[an.f],styles:[""],changeDetection:0}),e}(),vi=function(){function e(){}return e.prototype.transform=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return 1970+e.year+"-"+("0"+e.month).slice(-2)+"-"+("0"+e.day).slice(-2)+" "+("0"+e.hour).slice(-2)+":"+("0"+e.minute).slice(-2)+":"+("0"+e.second).slice(-2)},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"dateTime",type:e,pure:!0}),e}(),Si=["chart"],Ti=[{path:"dashboard",component:function(){function e(e,t){var n=this;this.store=e,this.actions=t,this.destroy$=new An.a,this.time$=this.store.pipe(Object(p.h)(Tt)),this.temp$=this.store.pipe(Object(p.h)(Ct)),this.minTemp$=this.store.pipe(Object(p.h)(Et)),this.maxTemp$=this.store.pipe(Object(p.h)(jt)),this.status$=this.store.pipe(Object(p.h)(At)),this.actions.pipe(Object(_n.d)(mt.UPDATE_TEMP)).pipe(Object(xn.a)(this.destroy$)).subscribe(function(e){n.chart&&n.chart.add(e.payload)})}return e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.onSyncTime=function(){this.store.dispatch(new vt)},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(_n.a))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-dashboard"]],viewQuery:function(e,t){var n;1&e&&i.wc(Si,!0),2&e&&i.pc(n=i.bc())&&(t.chart=n.first)},decls:26,vars:26,consts:[[1,"d-flex","flex-wrap"],[1,"w-100","m-1"],[1,"w-100","h-100","d-flex","align-items-center"],["svgIcon","clock-outline"],["mat-icon-button","",3,"click"],["svgIcon","sync"],[1,"w-100"],["svgIcon","thermometer"],["chart",""],[1,"w-100",3,"status"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"mat-card",1),i.Tb(2,"mat-card-content",2),i.Ob(3,"mat-icon",3),i.Cc(4),i.fc(5,"dateTime"),i.fc(6,"async"),i.Tb(7,"button",4),i.ac("click",function(){return t.onSyncTime()}),i.Ob(8,"mat-icon",5),i.Sb(),i.Sb(),i.Sb(),i.Tb(9,"mat-card",1),i.Tb(10,"mat-card-content",6),i.Tb(11,"div"),i.Ob(12,"mat-icon",7),i.Cc(13),i.fc(14,"number"),i.fc(15,"async"),i.fc(16,"number"),i.fc(17,"async"),i.fc(18,"number"),i.fc(19,"async"),i.Sb(),i.Ob(20,"app-time-chart",null,8),i.Sb(),i.Sb(),i.Tb(22,"mat-card",1),i.Tb(23,"mat-card-content",2),i.Ob(24,"app-status",9),i.fc(25,"async"),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(4),i.Ec(" \xa0 Time ",i.gc(5,5,i.gc(6,7,t.time$))," \xa0 "),i.Bb(9),i.Gc(" Temperature\xa0",i.hc(14,9,i.gc(15,12,t.temp$),"1.2-2"),"\u2103 Min\xa0",i.hc(16,14,i.gc(17,17,t.minTemp$),"1.2-2"),"\u2103 Max\xa0",i.hc(18,19,i.gc(19,22,t.maxTemp$),"1.2-2"),"\u2103 "),i.Bb(11),i.kc("status",i.gc(25,24,t.status$)))},directives:[kn.a,kn.b,ln.a,pn.a,Dn,Oi],pipes:[vi,an.b,an.f],styles:["app-time-chart[_ngcontent-%COMP%]{max-width:330px;display:block}"],changeDetection:0}),e}(),data:{title:"Dashboard",actions:["menu","bt","sync"]}}],Ci=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(Ti)],r.e]}),e}(),Ei=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c]]}),e}(),ji=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ci,ln.b,pn.b,kn.c,Cn,En,jn,Ei]]}),e}(),Ai=n("kmnG"),wi=n("qFsG"),Ii=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ai.d,wi.c]]}),e}(),Di=n("7EHt"),_i=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ai.d,wi.c,pn.b,Di.b,Ii]]}),e}(),xi=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Di.b,pn.b,ln.b,_i]]}),e}(),ki=n("d3UM"),Ri=n("FKr1"),Ni=n("iadO"),Pi=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ai.d,ki.b,Ri.l,wi.c,Ni.c,Ri.j]]}),e}(),Mi=n("GyhO"),Bi=n("LRne"),Li=n("EY2u"),Fi=n("Cfvw"),Ui=n("HDdC"),$i=n("eIep"),Gi=n("Kj3r"),Hi=n("vkgz"),Vi=n("5+tZ"),Ki=n("zp1y"),Wi="settings",Yi="config",Xi="version",zi=function(){function e(){localStorage.getItem(Xi)!==e.version&&(localStorage.clear(),localStorage.setItem(Xi,e.version))}return e.prototype.loadSettings=function(){console.log("load settings");var e=localStorage.getItem(Wi);if(e)return JSON.parse(e)},e.prototype.saveSettings=function(e){console.log("save settings"),localStorage.setItem(Wi,JSON.stringify(e))},e.prototype.loadConfig=function(){console.log("load config");var e=localStorage.getItem(Yi);if(e)return JSON.parse(e)},e.prototype.saveConfig=function(e){console.log("save config"),localStorage.setItem(Yi,JSON.stringify(e))},e.version="12",e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}(),qi=function(){function e(e,t,n){this.actions$=e,this.store=t,this.storage=n}return e.prototype.init=function(){var e=this;return this.actions$.pipe(Object(_n.d)(w.INIT)).pipe(Object($i.a)(function(){return Object(Mi.a)(Object(Bi.a)(new D(e.storage.loadSettings())),e.store.pipe(Object(p.h)(he)).pipe(Object(Gi.a)(300)).pipe(Object(Hi.a)(function(t){return e.storage.saveSettings(t)})).pipe(Object(Vi.a)(function(){return Li.a})))}))},e.prototype.saveSettings=function(){var e=this;return this.actions$.pipe(Object(_n.d)(w.RESTORE)).pipe(Object(Ki.a)(this.store.pipe(Object(p.h)(he)))).pipe(Object($i.a)(function(t){var n=t[1],i=n.settings,o=n.pinAssignment;return Object(Mi.a)(e.saveItems(i.program,It.setProgram),Mi.a.apply(void 0,i.compote.map(function(e,t){return Object(Fi.a)(e.daily.map(function(e,n){return new ut({type:It.setCompoteDaily,payload:{index:t,dailyIndex:n,value:e}})}))})),e.saveItems(i.dose,It.setDose),e.saveItems(i.timer,It.setTimer),e.saveItems(i.levelSensor,It.setLevelSensor),e.saveItems(i.mixer,It.setMixer),e.saveItems(i.pump,It.setPump),e.saveItems(i.schedule,It.setSchedule),e.savePins(o.beeper,j.beeper),e.savePins(o.button,j.button),e.savePins(o.display,j.display),e.savePins(o.dose,j.dose),e.savePins(o.doseMixer,j.doseMixer),e.savePins(o.flowSensor,j.flowSensor),e.savePins(o.levelSensor,j.levelSensor),e.savePins(o.mixer,j.mixer),e.savePins(o.pump,j.pump),e.savePins(o.rtc,j.rtc),e.savePins(o.valve,j.valve))}))},e.prototype.onChangePump=function(){return this.actions$.pipe(Object(_n.d)(w.CHANGE_PUMP)).pipe(Object(Gi.a)(1e3)).pipe(Object($i.a)(function(e){var t=e.payload;return Object(Bi.a)(new ut({type:It.setPump,payload:t}))}))},e.prototype.loadPump=function(){return this.actions$.pipe(Object(_n.d)(w.LOAD_PUMP)).pipe(Object($i.a)(function(){return Object(Fi.a)(Object(u.f)(new Array(2).fill(0).map(function(e,t){return new ut({type:It.getPump,payload:{index:t}})})))}))},e.prototype.onChangeMixer=function(){return this.actions$.pipe(Object(_n.d)(w.CHANGE_MIXER)).pipe(Object(Gi.a)(1e3)).pipe(Object($i.a)(function(e){var t=e.payload;return Object(Bi.a)(new ut({type:It.setMixer,payload:t}))}))},e.prototype.loadMixer=function(){return this.actions$.pipe(Object(_n.d)(w.LOAD_MIXER)).pipe(Object($i.a)(function(){return Object(Fi.a)(Object(u.f)(new Array(1).fill(0).map(function(e,t){return new ut({type:It.getMixer,payload:{index:t}})})))}))},e.prototype.onChangeDose=function(){return this.actions$.pipe(Object(_n.d)(w.CHANGE_DOSE)).pipe(Object(Gi.a)(1e3)).pipe(Object($i.a)(function(e){var t=e.payload;return Object(Bi.a)(new ut({type:It.setDose,payload:t}))}))},e.prototype.loadDose=function(){return this.actions$.pipe(Object(_n.d)(w.LOAD_DOSE)).pipe(Object($i.a)(function(){return Object(Fi.a)(Object(u.f)(new Array(4).fill(0).map(function(e,t){return new ut({type:It.getDose,payload:{index:t}})})))}))},e.prototype.onChangeProgram=function(){return this.actions$.pipe(Object(_n.d)(w.CHANGE_PROGRAM)).pipe(Object(Gi.a)(1e3)).pipe(Object($i.a)(function(e){var t=e.payload;return Object(Bi.a)(new ut({type:It.setProgram,payload:t}))}))},e.prototype.loadProgram=function(){return this.actions$.pipe(Object(_n.d)(w.LOAD_PROGRAM)).pipe(Object($i.a)(function(){return Object(Fi.a)(Object(u.f)(new Array(4).fill(0).map(function(e,t){return new ut({type:It.getProgram,payload:{index:t}})})))}))},e.prototype.onChangeCompote=function(){return this.actions$.pipe(Object(_n.d)(w.CHANGE_COMPOTE_DAILY)).pipe(Object(Gi.a)(1e3)).pipe(Object($i.a)(function(e){var t=e.payload;return Object(Bi.a)(new ut({type:It.setCompoteDaily,payload:t}))}))},e.prototype.loadCompote=function(){return this.actions$.pipe(Object(_n.d)(w.LOAD_COMPOTE)).pipe(Object($i.a)(function(){return Object(Fi.a)(Object(u.f)([].concat.apply([],new Array(2).fill(0).map(function(e,t){return new Array(14).fill(0).map(function(e,n){return new ut({type:It.getCompoteDaily,payload:{index:t,dailyIndex:n}})})}))))}))},e.prototype.onChangeTimer=function(){return this.actions$.pipe(Object(_n.d)(w.CHANGE_TIMER)).pipe(Object(Gi.a)(1e3)).pipe(Object($i.a)(function(e){var t=e.payload;return Object(Bi.a)(new ut({type:It.setTimer,payload:t}))}))},e.prototype.loadTimer=function(){return this.actions$.pipe(Object(_n.d)(w.LOAD_TIMER)).pipe(Object($i.a)(function(){return Object(Fi.a)(Object(u.f)(new Array(8).fill(0).map(function(e,t){return new ut({type:It.getTimer,payload:{index:t}})})))}))},e.prototype.onChangeSchedule=function(){return this.actions$.pipe(Object(_n.d)(w.CHANGE_SCHEDULE)).pipe(Object(Gi.a)(1e3)).pipe(Object($i.a)(function(e){var t=e.payload;return Object(Bi.a)(new ut({type:It.setSchedule,payload:t}))}))},e.prototype.loadSchedule=function(){return this.actions$.pipe(Object(_n.d)(w.LOAD_SCHEDULE)).pipe(Object($i.a)(function(){return Object(Fi.a)(Object(u.f)(new Array(4).fill(0).map(function(e,t){return new ut({type:It.getSchedule,payload:{index:t}})})))}))},e.prototype.onChangePin=function(){return this.actions$.pipe(Object(_n.d)(w.CHANGE_PIN_ASSIGNMENT)).pipe(Object($i.a)(function(e){var t=e.payload;return Object(Bi.a)(new ut({type:It.setPin,payload:{type:t.type,index:t.index,value:t.value}}))}))},e.prototype.loadPinAssignment=function(){var e=this;return this.actions$.pipe(Object(_n.d)(w.LOAD_PIN_ASSIGNMENT)).pipe(Object($i.a)(function(){return Object(Fi.a)(Object(u.f)(e.getPinRequest(2,j.pump),e.getPinRequest(l,j.valve),e.getPinRequest(4,j.dose),e.getPinRequest(4,j.doseMixer),e.getPinRequest(2,j.flowSensor),e.getPinRequest(2,j.levelSensor),e.getPinRequest(1,j.mixer),e.getPinRequest(1,j.beeper)))}))},e.prototype.getPinRequest=function(e,t){return new Array(e).fill(0).map(function(e,n){return new ut({type:It.getPin,payload:{index:n,type:t}})})},e.prototype.saveItems=function(e,t){return e.length?Object(Fi.a)(e.map(function(e,n){return new ut({type:t,payload:{index:n,value:e}})})):Li.a},e.prototype.savePins=function(e,t){return e.length?Object(Fi.a)(e.map(function(e,n){return new ut({type:It.setPin,payload:{type:t,index:n,value:e}})})):Li.a},e.\u0275fac=function(t){return new(t||e)(i.Xb(_n.a),i.Xb(p.b),i.Xb(zi))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"init",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"saveSettings",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"onChangePump",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"loadPump",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"onChangeMixer",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"loadMixer",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"onChangeDose",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"loadDose",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"onChangeProgram",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"loadProgram",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"onChangeCompote",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"loadCompote",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"onChangeTimer",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"loadTimer",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"onChangeSchedule",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"loadSchedule",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"onChangePin",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"loadPinAssignment",null),e}(),Ji=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,p.d.forFeature("settings",Pe),_n.c.forFeature([qi])]]}),e}(),Qi=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Di.b,pn.b,ln.b,Ji,Pi]]}),e}(),Zi=n("1jcm"),eo=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ai.d,wi.c,Zi.b]]}),e}(),to=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Di.b,pn.b,ln.b,eo]]}),e}(),no=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ai.d,wi.c,Zi.b]]}),e}(),io=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Di.b,pn.b,ln.b,no]]}),e}(),oo=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ai.d,wi.c,ki.b,Ri.l]]}),e}(),co=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ai.d,wi.c,Zi.b,ki.b,oo]]}),e}(),ro=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Di.b,pn.b,ln.b,co]]}),e}(),ao=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ai.d,wi.c,Zi.b,oo]]}),e}(),so=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Di.b,pn.b,ln.b,ao]]}),e}(),uo=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ai.d,wi.c]]}),e}(),po=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Di.b,pn.b,ln.b,uo]]}),e}(),lo=n("wZkO"),bo=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ai.d,ki.b]]}),e}(),fo=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ai.d,ki.b,Ri.l,wi.c,lo.c,Di.b,En,bo]]}),e}();function mo(e,t){if(1&e&&i.Ob(0,"mat-icon",3),2&e){var n=i.ec().$implicit;i.kc("svgIcon",n.icon)}}function ho(e,t){if(1&e&&(i.Tb(0,"a",1),i.Ac(1,mo,1,1,"mat-icon",2),i.Cc(2),i.Sb()),2&e){var n=t.$implicit;i.kc("routerLink",n.route),i.Bb(1),i.kc("ngIf",n.icon),i.Bb(1),i.Ec(" \xa0 ",n.title," ")}}var go=function(){function e(){this.links=[{route:["/","settings","program"],title:"Program",icon:"cogs"},{route:["/","settings","compote"],title:"Compote",icon:"cup-water"},{route:["/","settings","timer"],title:"Timer",icon:"alarm"},{route:["/","settings","schedule"],title:"Schedule",icon:"clock-outline"},{route:["/","settings","pump"],title:"Pump",icon:"water-pump"},{route:["/","settings","dose"],title:"Dose",icon:"eyedropper"},{route:["/","settings","level-sensor"],title:"Level sensor",icon:"hydraulic-oil-level"},{route:["/","settings","mixer"],title:"Mixer",icon:"pinwheel"},{route:["/","settings","pin-assignment"],title:"Pin Assignment",icon:"chip"},{route:["/","settings","backup"],title:"Backup & restore",icon:"backup-restore"}]}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-settings"]],decls:2,vars:1,consts:[["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(e,t){1&e&&(i.Tb(0,"mat-nav-list"),i.Ac(1,ho,3,3,"a",0),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",t.links))},directives:[un.d,an.l,un.b,r.d,an.m,ln.a],styles:[""],changeDetection:0}),e}();function yo(e,t){if(1&e){var n=i.Ub();i.Rb(0),i.Tb(1,"mat-form-field"),i.Tb(2,"input",5),i.ac("input",function(e){i.sc(n);var o=t.index;return i.ec().onDoseChange(o,+e.target.value)}),i.Sb(),i.Sb(),i.Qb()}if(2&e){var o=t.$implicit,c=t.index,r=i.ec();i.Bb(2),i.kc("placeholder",(o||c+1)+" Volume (0.1 mL)")("value",r.compoteDaily.dose[c])}}var Oo=function(){function e(){this.compoteDailyChange=new i.n}return e.prototype.onChange=function(e){this.compoteDailyChange.next(Object(u.a)(Object(u.a)({},this.compoteDaily),e))},e.prototype.onDoseChange=function(e,t){var n=this.compoteDaily.dose.slice(0);n[e]=t,this.onChange({dose:n})},e.prototype.trackByIndex=function(e){return e},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-compote-daily"]],inputs:{compoteDaily:"compoteDaily",soils:"soils"},outputs:{compoteDailyChange:"compoteDailyChange"},decls:9,vars:6,consts:[["matInput","","type","number","placeholder","Days",3,"value","input"],["matInput","","type","number","placeholder","Light schedule",3,"value","input"],["matInput","","type","number","placeholder","Volume (mL)",3,"value","input"],["matInput","","type","number","placeholder","Washing Volume (mL)",3,"value","input"],[4,"ngFor","ngForOf","ngForTrackBy"],["matInput","","type","number",3,"placeholder","value","input"]],template:function(e,t){1&e&&(i.Tb(0,"mat-form-field"),i.Tb(1,"input",0),i.ac("input",function(e){return t.onChange({days:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(2,"mat-form-field"),i.Tb(3,"input",1),i.ac("input",function(e){return t.onChange({schedule:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(4,"mat-form-field"),i.Tb(5,"input",2),i.ac("input",function(e){return t.onChange({volume:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(6,"mat-form-field"),i.Tb(7,"input",3),i.ac("input",function(e){return t.onChange({washVolume:+e.target.value})}),i.Sb(),i.Sb(),i.Ac(8,yo,3,2,"ng-container",4)),2&e&&(i.Bb(1),i.kc("value",t.compoteDaily.days),i.Bb(2),i.kc("value",t.compoteDaily.schedule),i.Bb(2),i.kc("value",t.compoteDaily.volume),i.Bb(2),i.kc("value",t.compoteDaily.washVolume),i.Bb(1),i.kc("ngForOf",t.soils)("ngForTrackBy",t.trackByIndex))},directives:[Ai.b,wi.b,an.l],styles:[""],changeDetection:0}),e}();function vo(e,t){if(1&e&&(i.Tb(0,"span",3),i.Cc(1),i.Sb()),2&e){var n=t.$implicit;i.Bb(1),i.Dc(n)}}function So(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-compote-daily",6),i.ac("compoteDailyChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onDailyChange(t,e)}),i.Sb()}if(2&e){var o=i.ec().$implicit,c=i.ec();i.kc("compoteDaily",o)("soils",c.soils)}}function To(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.Tb(6,"span",3),i.Cc(7),i.Sb(),i.Ac(8,vo,2,1,"span",4),i.Sb(),i.Sb(),i.Ac(9,So,1,2,"ng-template",5),i.Sb()),2&e){var n=t.$implicit,o=t.index,c=i.ec();i.Bb(3),i.Ec(" #",o+1," "),i.Bb(2),i.Ec(" ",n.volume," "),i.Bb(2),i.Dc(n.washVolume),i.Bb(1),i.kc("ngForOf",n.dose)("ngForTrackBy",c.trackByIndex)}}var Co=function(){function e(){this.compoteChange=new i.n,this.compoteDailyChange=new i.n,this.nameChange=new i.n,this.add=new i.n}return e.prototype.onChange=function(e){this.compoteChange.next(Object(u.a)(Object(u.a)({},this.compote),e))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.prototype.onDailyChange=function(e,t){this.compoteDailyChange.next({index:e,value:t})},e.prototype.onAdd=function(){this.add.emit()},e.prototype.trackByIndex=function(e){return e},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-compote"]],inputs:{compote:"compote",name:"name",soils:"soils"},outputs:{compoteChange:"compoteChange",compoteDailyChange:"compoteDailyChange",nameChange:"nameChange",add:"add"},decls:7,vars:3,consts:[["matInput","","type","text","placeholder","Name",3,"value","input"],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-button","",3,"click"],[1,"ml-1"],["class","ml-1",4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"compoteDaily","soils","compoteDailyChange"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Tb(1,"mat-form-field"),i.Tb(2,"input",0),i.ac("input",function(e){return t.onNameChange(e.target.value)}),i.Sb(),i.Sb(),i.Tb(3,"mat-accordion"),i.Ac(4,To,10,5,"mat-expansion-panel",1),i.Sb(),i.Tb(5,"button",2),i.ac("click",function(){return t.onAdd()}),i.Cc(6,"Add"),i.Sb(),i.Sb()),2&e&&(i.Bb(2),i.kc("value",t.name),i.Bb(2),i.kc("ngForOf",t.compote.daily)("ngForTrackBy",t.trackByIndex))},directives:[Ai.b,wi.b,Di.a,an.l,pn.a,Di.c,Di.f,Di.g,Di.e,Di.d,Oo],styles:[""],changeDetection:0}),e}();function Eo(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-compote",2),i.ac("compoteDailyChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onDailyChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)})("add",function(){i.sc(n);var e=i.ec().index;return i.ec().onAddDaily(e)}),i.fc(1,"async"),i.fc(2,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("compote",c)("name",i.gc(1,3,a.names$)[r])("soils",i.gc(2,5,a.soils$))}}function jo(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,Eo,3,7,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var Ao=function(){function e(e){this.store=e,this.compotes$=this.store.pipe(Object(p.h)(ye)),this.soils$=this.store.pipe(Object(p.h)(ke("dose"))),this.names$=this.store.pipe(Object(p.h)(ke("compote")))}return e.prototype.ngOnInit=function(){this.store.dispatch(new R)},e.prototype.onNameChange=function(e,t){this.store.dispatch(new le({key:"compote",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new x({index:e,value:t}))},e.prototype.onDailyChange=function(e,t){this.store.dispatch(new P({index:e,dailyIndex:t.index,value:t.value}))},e.prototype.onRemove=function(e){this.store.dispatch(new k(e))},e.prototype.onAddDaily=function(e){this.store.dispatch(new N(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-compote-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"compote","name","soils","compoteDailyChange","nameChange","add"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,jo,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.compotes$))("ngForTrackBy",t.trackByIndex))},directives:[Di.a,an.l,Di.c,Di.f,Di.g,Di.e,Di.d,Co],pipes:[an.b],styles:[""],changeDetection:0}),e}(),wo=function(){function e(){}return e.prototype.transform=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return f(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"dateDay",type:e,pure:!0}),e}(),Io=function(){function e(){}return e.prototype.transform=function(e){for(var t=[],n=0;n<e.length;n++)for(var i=e[n],o=0;o<8;o++)1&i&&t.push(8*n+o+1),i>>=1;return t},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"bits",type:e,pure:!0}),e}();function Do(e,t){if(1&e&&(i.Tb(0,"mat-option",7),i.Cc(1),i.Sb()),2&e){var n=t.$implicit,o=t.index;i.kc("value",o),i.Bb(1),i.Ec(" ",n||o+1," ")}}function _o(e,t){if(1&e&&(i.Tb(0,"mat-option",7),i.Cc(1),i.Sb()),2&e){var n=t.$implicit;i.kc("value",n),i.Bb(1),i.Ec(" ",n," ")}}var xo=function(){function e(){this.programChange=new i.n,this.nameChange=new i.n}return e.prototype.onChange=function(e){this.programChange.next(Object(u.a)(Object(u.a)({},this.program),e))},e.prototype.onChangeDate=function(e){this.programChange.next(Object(u.a)(Object(u.a)({},this.program),{start:d(e)}))},e.prototype.onChangeValves=function(e){for(var t=new Array(Math.ceil(3)).fill(0),n=0,i=e;n<i.length;n++){var o=i[n]-1;t[Math.trunc(o/8)]|=1<<o%8}this.programChange.next(Object(u.a)(Object(u.a)({},this.program),{valves:t}))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-program"]],inputs:{program:"program",name:"name",compotes:"compotes",valves:"valves"},outputs:{programChange:"programChange",nameChange:"nameChange"},decls:15,vars:12,consts:[["matInput","","placeholder","Name",3,"value","input"],["placeholder","Compote",3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Start",3,"matDatepicker","value","dateChange"],["matSuffix","",3,"for"],["startDatepicker",""],["placeholder","Valves","multiple","",3,"value","selectionChange"],[3,"value"]],template:function(e,t){if(1&e&&(i.Tb(0,"mat-form-field"),i.Tb(1,"input",0),i.ac("input",function(e){return t.onNameChange(e.target.value)}),i.Sb(),i.Sb(),i.Tb(2,"mat-form-field"),i.Tb(3,"mat-select",1),i.ac("selectionChange",function(e){return t.onChange({compote:e.value})}),i.Ac(4,Do,2,2,"mat-option",2),i.Sb(),i.Sb(),i.Tb(5,"mat-form-field"),i.Tb(6,"input",3),i.ac("dateChange",function(e){return t.onChangeDate(e.value)}),i.fc(7,"dateDay"),i.Sb(),i.Ob(8,"mat-datepicker-toggle",4),i.Ob(9,"mat-datepicker",null,5),i.Sb(),i.Tb(11,"mat-form-field"),i.Tb(12,"mat-select",6),i.ac("selectionChange",function(e){return t.onChangeValves(e.value)}),i.fc(13,"bits"),i.Ac(14,_o,2,2,"mat-option",2),i.Sb(),i.Sb()),2&e){var n=i.qc(10);i.Bb(1),i.kc("value",t.name),i.Bb(2),i.kc("value",t.program.compote),i.Bb(1),i.kc("ngForOf",t.compotes),i.Bb(2),i.kc("matDatepicker",n)("value",i.gc(7,8,t.program.start)),i.Bb(2),i.kc("for",n),i.Bb(4),i.kc("value",i.gc(13,10,t.program.valves)),i.Bb(2),i.kc("ngForOf",t.valves)}},directives:[Ai.b,wi.b,ki.a,an.l,Ni.b,Ni.d,Ai.f,Ni.a,Ri.k],pipes:[wo,Io],styles:[""],changeDetection:0}),e}();function ko(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-program",2),i.ac("programChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)}),i.fc(1,"async"),i.fc(2,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("program",c)("name",i.gc(1,4,a.names$)[r])("compotes",i.gc(2,6,a.compotes$))("valves",a.valves)}}function Ro(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,ko,3,8,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var No=function(){function e(e){this.store=e,this.destroy$=new An.a,this.programs$=this.store.pipe(Object(p.h)(ge)),this.compotes$=this.store.pipe(Object(p.h)(ke("compote"))),this.names$=this.store.pipe(Object(p.h)(ke("program"))),this.valves=new Array(l);for(var t=0;t<l;t++)this.valves[t]=t+1}return e.prototype.ngOnInit=function(){this.store.dispatch(new $)},e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.onNameChange=function(e,t){this.store.dispatch(new le({key:"program",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new L({index:e,value:t}))},e.prototype.onRemove=function(e){this.store.dispatch(new F(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-program-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"program","name","compotes","valves","programChange","nameChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,Ro,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.programs$))("ngForTrackBy",t.trackByIndex))},directives:[Di.a,an.l,Di.c,Di.f,Di.g,Di.e,Di.d,xo],pipes:[an.b],styles:[""],changeDetection:0}),e}(),Po=function(){function e(){this.pumpChange=new i.n,this.nameChange=new i.n}return e.prototype.onChange=function(e){this.pumpChange.next(Object(u.a)(Object(u.a)({},this.pump),e))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-pump"]],inputs:{pump:"pump",name:"name"},outputs:{pumpChange:"pumpChange",nameChange:"nameChange"},decls:13,vars:6,consts:[["matInput","","type","text","placeholder","Name",3,"value","input"],["matInput","","type","number","placeholder","Min flow",3,"value","input"],["matInput","","type","number","placeholder","Starting Time",3,"value","input"],[1,"col-12",3,"checked","change"],["matInput","","type","number","placeholder","PWM Flow",3,"value","input"],["matInput","","type","number","placeholder","Rate",3,"value","input"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Tb(1,"mat-form-field"),i.Tb(2,"input",0),i.ac("input",function(e){return t.onNameChange(e.target.value)}),i.Sb(),i.Sb(),i.Tb(3,"mat-form-field"),i.Tb(4,"input",1),i.ac("input",function(e){return t.onChange({minFlow:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(5,"mat-form-field"),i.Tb(6,"input",2),i.ac("input",function(e){return t.onChange({startingTime:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(7,"mat-slide-toggle",3),i.ac("change",function(e){return t.onChange({pwm:+e.checked})}),i.Cc(8," PWM "),i.Sb(),i.Tb(9,"mat-form-field"),i.Tb(10,"input",4),i.ac("input",function(e){return t.onChange({pwmFlow:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(11,"mat-form-field"),i.Tb(12,"input",5),i.ac("input",function(e){return t.onChange({rate:+e.target.value})}),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(2),i.kc("value",t.name),i.Bb(2),i.kc("value",t.pump.minFlow),i.Bb(2),i.kc("value",t.pump.startingTime),i.Bb(1),i.kc("checked",!!t.pump.pwm),i.Bb(3),i.kc("value",t.pump.pwmFlow),i.Bb(2),i.kc("value",t.pump.rate))},directives:[Ai.b,wi.b,Zi.a],styles:[""],changeDetection:0}),e}();function Mo(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pump",2),i.ac("pumpChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("pump",c)("name",i.gc(1,2,a.names$)[r])}}function Bo(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,Mo,2,4,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var Lo=function(){function e(e){this.store=e,this.pumps$=this.store.pipe(Object(p.h)(Se)),this.names$=this.store.pipe(Object(p.h)(ke("pump")))}return e.prototype.ngOnInit=function(){this.store.dispatch(new K)},e.prototype.onNameChange=function(e,t){this.store.dispatch(new le({key:"pump",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new G({index:e,value:t}))},e.prototype.onRemove=function(e){this.store.dispatch(new H(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-pump-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"pump","name","pumpChange","nameChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,Bo,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.pumps$))("ngForTrackBy",t.trackByIndex))},directives:[Di.a,an.l,Di.c,Di.f,Di.g,Di.e,Di.d,Po],pipes:[an.b],styles:[""],changeDetection:0}),e}(),Fo=function(){function e(){this.doseChange=new i.n,this.nameChange=new i.n}return e.prototype.onChange=function(e){this.doseChange.next(Object(u.a)(Object(u.a)({},this.dose),e))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-dose"]],inputs:{dose:"dose",name:"name"},outputs:{doseChange:"doseChange",nameChange:"nameChange"},decls:11,vars:5,consts:[[1,"col-12"],["matInput","","type","text","placeholder","Name",3,"value","input"],["matInput","","type","number","placeholder","Rate (0.1 mL / ms)",3,"value","input"],["matInput","","type","number","placeholder","Seconds",3,"value","input"],[1,"col-12",3,"checked","change"],["matInput","","type","number","placeholder","PWM Sensor",3,"value","input"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Tb(1,"mat-form-field",0),i.Tb(2,"input",1),i.ac("input",function(e){return t.onNameChange(e.target.value)}),i.Sb(),i.Sb(),i.Tb(3,"mat-form-field",0),i.Tb(4,"input",2),i.ac("input",function(e){return t.onChange({rate:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(5,"mat-form-field",0),i.Tb(6,"input",3),i.ac("input",function(e){return t.onChange({seconds:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(7,"mat-slide-toggle",4),i.ac("change",function(e){return t.onChange({pwm:+e.checked})}),i.Cc(8," PWM "),i.Sb(),i.Tb(9,"mat-form-field"),i.Tb(10,"input",5),i.ac("input",function(e){return t.onChange({pwmSensor:+e.target.value})}),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(2),i.kc("value",t.name),i.Bb(2),i.kc("value",t.dose.rate),i.Bb(2),i.kc("value",t.dose.seconds),i.Bb(1),i.kc("checked",!!t.dose.pwm),i.Bb(3),i.kc("value",t.dose.pwmSensor))},directives:[Ai.b,wi.b,Zi.a],styles:[""],changeDetection:0}),e}();function Uo(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-dose",2),i.ac("doseChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("dose",c)("name",i.gc(1,2,a.names$)[r])}}function $o(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,Uo,2,4,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var Go=function(){function e(e){this.store=e,this.doses$=this.store.pipe(Object(p.h)(Ce)),this.names$=this.store.pipe(Object(p.h)(ke("dose")))}return e.prototype.ngOnInit=function(){this.store.dispatch(new z)},e.prototype.onNameChange=function(e,t){this.store.dispatch(new le({key:"dose",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new W({index:e,value:t}))},e.prototype.onRemove=function(e){this.store.dispatch(new Y(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-dose-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"dose","name","doseChange","nameChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,$o,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.doses$))("ngForTrackBy",t.trackByIndex))},directives:[Di.a,an.l,Di.c,Di.f,Di.g,Di.e,Di.d,Fo],pipes:[an.b],styles:[""],changeDetection:0}),e}();function Ho(e,t){if(1&e&&(i.Tb(0,"mat-option",3),i.Cc(1),i.Sb()),2&e){var n=t.$implicit;i.kc("value",n),i.Bb(1),i.Dc(n)}}function Vo(e,t){if(1&e&&(i.Tb(0,"mat-option",3),i.Cc(1),i.Sb()),2&e){var n=t.$implicit;i.kc("value",n),i.Bb(1),i.Dc(n)}}var Ko=function(){function e(){this.timeChange=new i.n,this.hours=new Array(24).fill(0).map(function(e,t){return t}),this.minutes=new Array(60).fill(0).map(function(e,t){return t})}return e.prototype.onChange=function(e){this.timeChange.next(Object(u.a)(Object(u.a)({},this.time),e))},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-day-time"]],inputs:{time:"time"},outputs:{timeChange:"timeChange"},decls:6,vars:4,consts:[["placeholder","Hour",3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Minute",3,"value","selectionChange"],[3,"value"]],template:function(e,t){1&e&&(i.Tb(0,"mat-form-field"),i.Tb(1,"mat-select",0),i.ac("selectionChange",function(e){return t.onChange({hour:e.value})}),i.Ac(2,Ho,2,2,"mat-option",1),i.Sb(),i.Sb(),i.Tb(3,"mat-form-field"),i.Tb(4,"mat-select",2),i.ac("selectionChange",function(e){return t.onChange({minute:e.value})}),i.Ac(5,Vo,2,2,"mat-option",1),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.kc("value",t.time.hour),i.Bb(1),i.kc("ngForOf",t.hours),i.Bb(2),i.kc("value",t.time.minute),i.Bb(1),i.kc("ngForOf",t.minutes))},directives:[Ai.b,ki.a,an.l,Ri.k],styles:[""],changeDetection:0}),e}(),Wo=function(){function e(){this.scheduleChange=new i.n,this.nameChange=new i.n}return e.prototype.onChange=function(e){this.scheduleChange.next(Object(u.a)(Object(u.a)({},this.schedule),e))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-schedule"]],inputs:{schedule:"schedule",name:"name"},outputs:{scheduleChange:"scheduleChange",nameChange:"nameChange"},decls:5,vars:3,consts:[[1,"row"],[1,"col-12",3,"checked","change"],[1,"col-12",3,"time","timeChange"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"mat-slide-toggle",1),i.ac("change",function(e){return t.onChange({enable:+e.checked})}),i.Cc(2," Enable "),i.Sb(),i.Tb(3,"app-day-time",2),i.ac("timeChange",function(e){return t.onChange({startTime:e})}),i.Sb(),i.Tb(4,"app-day-time",2),i.ac("timeChange",function(e){return t.onChange({endTime:e})}),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.kc("checked",!!t.schedule.enable),i.Bb(2),i.kc("time",t.schedule.startTime),i.Bb(1),i.kc("time",t.schedule.endTime))},directives:[Zi.a,Ko],styles:[""],changeDetection:0}),e}();function Yo(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-schedule",2),i.ac("scheduleChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("schedule",c)("name",i.gc(1,2,a.names$)[r])}}function Xo(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,Yo,2,4,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var zo=function(){function e(e){this.store=e,this.schedules$=this.store.pipe(Object(p.h)(ve)),this.names$=this.store.pipe(Object(p.h)(ke("schedule")))}return e.prototype.ngOnInit=function(){this.store.dispatch(new ie)},e.prototype.onNameChange=function(e,t){this.store.dispatch(new le({key:"schedule",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new ee({index:e,value:t}))},e.prototype.onRemove=function(e){this.store.dispatch(new te(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-schedule-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"schedule","name","scheduleChange","nameChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,Xo,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.schedules$))("ngForTrackBy",t.trackByIndex))},directives:[Di.a,an.l,Di.c,Di.f,Di.g,Di.e,Di.d,Wo],pipes:[an.b],styles:[""],changeDetection:0}),e}();function qo(e,t){if(1&e&&(i.Tb(0,"mat-option",5),i.Cc(1),i.Sb()),2&e){var n=t.$implicit,o=t.index;i.kc("value",o),i.Bb(1),i.Ec(" ",n||o+1," ")}}var Jo=function(){function e(){this.timerChange=new i.n,this.nameChange=new i.n}return e.prototype.onChange=function(e){this.timerChange.next(Object(u.a)(Object(u.a)({},this.timer),e))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-timer"]],inputs:{timer:"timer",name:"name",programs:"programs"},outputs:{timerChange:"timerChange",nameChange:"nameChange"},decls:7,vars:4,consts:[[1,"col-12",3,"checked","change"],[1,"col-12",3,"time","timeChange"],[1,"col-12"],["placeholder","Program",3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Tb(1,"mat-slide-toggle",0),i.ac("change",function(e){return t.onChange({enable:+e.checked})}),i.Cc(2," Enable "),i.Sb(),i.Tb(3,"app-day-time",1),i.ac("timeChange",function(e){return t.onChange({time:e})}),i.Sb(),i.Tb(4,"mat-form-field",2),i.Tb(5,"mat-select",3),i.ac("selectionChange",function(e){return t.onChange({program:e.value})}),i.Ac(6,qo,2,2,"mat-option",4),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.kc("checked",!!t.timer.enable),i.Bb(2),i.kc("time",t.timer.time),i.Bb(2),i.kc("value",t.timer.program),i.Bb(1),i.kc("ngForOf",t.programs))},directives:[Zi.a,Ko,Ai.b,ki.a,an.l,Ri.k],styles:[""],changeDetection:0}),e}();function Qo(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-timer",2),i.ac("timerChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)}),i.fc(1,"async"),i.fc(2,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("timer",c)("name",i.gc(1,3,a.names$)[r])("programs",i.gc(2,5,a.programs$))}}function Zo(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,Qo,3,7,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var ec=function(){function e(e){this.store=e,this.timers$=this.store.pipe(Object(p.h)(Oe)),this.names$=this.store.pipe(Object(p.h)(ke("timer"))),this.programs$=this.store.pipe(Object(p.h)(ke("program")))}return e.prototype.ngOnInit=function(){this.store.dispatch(new Z)},e.prototype.onNameChange=function(e,t){this.store.dispatch(new le({key:"timer",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new q({index:e,value:t}))},e.prototype.onRemove=function(e){this.store.dispatch(new J(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-timer-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"timer","name","programs","timerChange","nameChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,Zo,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.timers$))("ngForTrackBy",t.trackByIndex))},directives:[Di.a,an.l,Di.c,Di.f,Di.g,Di.e,Di.d,Jo],pipes:[an.b],styles:[""],changeDetection:0}),e}(),tc=function(){function e(){this.mixerChange=new i.n,this.nameChange=new i.n}return e.prototype.onChange=function(e){this.mixerChange.next(Object(u.a)(Object(u.a)({},this.mixer),e))},e.prototype.onNameChange=function(e){this.nameChange.next(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-mixer"]],inputs:{mixer:"mixer",name:"name"},outputs:{mixerChange:"mixerChange",nameChange:"nameChange"},decls:7,vars:3,consts:[["matInput","","type","text","placeholder","Name",3,"value","input"],["matInput","","type","number","placeholder","Seconds",3,"value","input"],["matInput","","type","number","placeholder","Wash seconds",3,"value","input"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Tb(1,"mat-form-field"),i.Tb(2,"input",0),i.ac("input",function(e){return t.onNameChange(e.target.value)}),i.Sb(),i.Sb(),i.Tb(3,"mat-form-field"),i.Tb(4,"input",1),i.ac("input",function(e){return t.onChange({seconds:+e.target.value})}),i.Sb(),i.Sb(),i.Tb(5,"mat-form-field"),i.Tb(6,"input",2),i.ac("input",function(e){return t.onChange({washSeconds:+e.target.value})}),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(2),i.kc("value",t.name),i.Bb(2),i.kc("value",t.mixer.seconds),i.Bb(2),i.kc("value",t.mixer.washSeconds))},directives:[Ai.b,wi.b],styles:[""],changeDetection:0}),e}();function nc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-mixer",2),i.ac("mixerChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onChange(t,e)})("nameChange",function(e){i.sc(n);var t=i.ec().index;return i.ec().onNameChange(t,e)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec(),c=o.$implicit,r=o.index,a=i.ec();i.kc("mixer",c)("name",i.gc(1,2,a.names$)[r])}}function ic(e,t){if(1&e&&(i.Tb(0,"mat-expansion-panel"),i.Tb(1,"mat-expansion-panel-header"),i.Tb(2,"mat-panel-title"),i.Cc(3),i.Sb(),i.Tb(4,"mat-panel-description"),i.Cc(5),i.fc(6,"async"),i.Sb(),i.Sb(),i.Ac(7,nc,2,4,"ng-template",1),i.Sb()),2&e){var n=t.index,o=i.ec();i.Bb(3),i.Ec(" #",n+1," "),i.Bb(2),i.Ec(" ",i.gc(6,2,o.names$)[n]," ")}}var oc=function(){function e(e){this.store=e,this.mixers$=this.store.pipe(Object(p.h)(Te)),this.names$=this.store.pipe(Object(p.h)(ke("mixer")))}return e.prototype.ngOnInit=function(){this.store.dispatch(new ae)},e.prototype.onNameChange=function(e,t){this.store.dispatch(new le({key:"mixer",index:e,value:t}))},e.prototype.onChange=function(e,t){this.store.dispatch(new oe({index:e,value:t}))},e.prototype.onRemove=function(e){this.store.dispatch(new ce(e))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-mixer-list"]],decls:3,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["matExpansionPanelContent",""],[3,"mixer","name","mixerChange","nameChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Ac(1,ic,8,4,"mat-expansion-panel",0),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",i.gc(2,2,t.mixers$))("ngForTrackBy",t.trackByIndex))},directives:[Di.a,an.l,Di.c,Di.f,Di.g,Di.e,Di.d,tc],pipes:[an.b],styles:[""],changeDetection:0}),e}(),cc={mega2560:{pins:{0:{mode:"rx"},1:{mode:"tx"},2:{pwm:!0,int:0},3:{pwm:!0,int:1},4:{pwm:!0},5:{pwm:!0},6:{pwm:!0},7:{pwm:!0},8:{pwm:!0},9:{pwm:!0},10:{pwm:!0},11:{pwm:!0},12:{pwm:!0},13:{pwm:!0},14:{mode:"tx3"},15:{mode:"rx3"},16:{mode:"tx2"},17:{mode:"rx2"},18:{mode:"tx1",int:5},19:{mode:"rx1",int:4},20:{mode:"sda",int:3},21:{mode:"scl",int:2},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{},36:{},37:{},38:{},39:{},40:{},41:{},42:{},43:{},44:{pwm:!0},45:{pwm:!0},46:{pwm:!0},47:{},48:{},49:{},50:{mode:"miso"},51:{mode:"mosi"},52:{mode:"sck"},53:{mode:"ss"},54:{analog:!0},55:{analog:!0},56:{analog:!0},57:{analog:!0},58:{analog:!0},59:{analog:!0},60:{analog:!0},61:{analog:!0},62:{analog:!0},63:{analog:!0},64:{analog:!0},65:{analog:!0},66:{analog:!0},67:{analog:!0},68:{analog:!0},69:{analog:!0}}}};function rc(e,t){if(1&e&&(i.Tb(0,"mat-option",6),i.Tb(1,"div",7),i.Cc(2),i.Sb(),i.Sb()),2&e){var n=t.$implicit;i.kc("value",n),i.Bb(2),i.Ec(" ",n," ")}}function ac(e,t){if(1&e){var n=i.Ub();i.Tb(0,"mat-form-field",3),i.Tb(1,"mat-select",4),i.ac("selectionChange",function(e){i.sc(n);var o=t.index;return i.ec().onChange(o,e.value)}),i.Ac(2,rc,3,2,"mat-option",5),i.Sb(),i.Sb()}if(2&e){var o=t.$implicit,c=t.index,r=i.ec();i.Bb(1),i.lc("placeholder","Pin ",r.title," #",c,""),i.kc("value",o),i.Bb(1),i.kc("ngForOf",r.allPins)("ngForTrackBy",r.trackByValue)}}var sc=function(){function e(){this.pinChange=new i.n}return e.prototype.onChange=function(e,t){this.pinChange.next({index:e,value:t})},e.prototype.trackByValue=function(e,t){return t},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-pin-select"]],inputs:{pins:"pins",allPins:"allPins",title:"title"},outputs:{pinChange:"pinChange"},decls:3,vars:2,consts:[[1,"container-fluid"],[1,"row"],["class","col-12",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-12"],[3,"placeholder","value","selectionChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"pl-4"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"div",1),i.Ac(2,ac,3,5,"mat-form-field",2),i.Sb(),i.Sb()),2&e&&(i.Bb(2),i.kc("ngForOf",t.pins)("ngForTrackBy",t.trackByValue))},directives:[an.l,Ai.b,ki.a,Ri.k],styles:[""],changeDetection:0}),e}();function uc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",5),i.ac("pinChange",function(e){i.sc(n);var t=i.ec();return t.onChange(t.devicePinType.pump,e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinPumps$))("allPins",o.pins)}}function pc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",6),i.ac("pinChange",function(e){i.sc(n);var t=i.ec();return t.onChange(t.devicePinType.flowSensor,e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinFlowSensors$))("allPins",o.pins)}}function lc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",7),i.ac("pinChange",function(e){i.sc(n);var t=i.ec();return t.onChange(t.devicePinType.mixer,e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinMixers$))("allPins",o.pins)}}function bc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",8),i.ac("pinChange",function(e){i.sc(n);var t=i.ec();return t.onChange(t.devicePinType.dose,e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinDoses$))("allPins",o.pins)}}function dc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",9),i.ac("pinChange",function(e){i.sc(n);var t=i.ec();return t.onChange(t.devicePinType.doseMixer,e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinDoseMixers$))("allPins",o.pins)}}function fc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",10),i.ac("pinChange",function(e){i.sc(n);var t=i.ec();return t.onChange(t.devicePinType.valve,e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinValves$))("allPins",o.pins)}}function mc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",11),i.ac("pinChange",function(e){i.sc(n);var t=i.ec();return t.onChange(t.devicePinType.levelSensor,e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinLevelSensors$))("allPins",o.pins)}}function hc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"app-pin-select",12),i.ac("pinChange",function(e){i.sc(n);var t=i.ec();return t.onChange(t.devicePinType.beeper,e.index,e.value)}),i.fc(1,"async"),i.Sb()}if(2&e){var o=i.ec();i.kc("pins",i.gc(1,2,o.pinBeeper$))("allPins",o.pins)}}var gc=function(){function e(e){this.store=e,this.pins=Object.keys(cc.mega2560.pins).map(function(e){return+e}),this.pins2=Object.keys(cc.mega2560.pins).map(function(e){return{key:+e,value:cc.mega2560.pins[e]}}).sort(function(e,t){return e.key-t.key}),this.devicePinType=j,this.devicePartTypeName=A,this.destroy$=new An.a}return e.prototype.ngOnInit=function(){this.store.dispatch(new se),this.pinPumps$=this.store.pipe(Object(p.h)(Ee)),this.pinFlowSensors$=this.store.pipe(Object(p.h)(je)),this.pinMixers$=this.store.pipe(Object(p.h)(Ae)),this.pinDoses$=this.store.pipe(Object(p.h)(we)),this.pinDoseMixers$=this.store.pipe(Object(p.h)(Ie)),this.pinValves$=this.store.pipe(Object(p.h)(De)),this.pinLevelSensors$=this.store.pipe(Object(p.h)(_e)),this.pinBeeper$=this.store.pipe(Object(p.h)(xe))},e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.onChange=function(e,t,n){this.store.dispatch(new ue({type:e,index:t,value:n}))},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-pin-assignment"]],decls:60,vars:0,consts:[[1,"h-100"],["label","Blocks"],[1,"w-100"],["matExpansionPanelContent",""],["label","Pins"],["title","Pump",3,"pins","allPins","pinChange"],["title","Flow Sensor",3,"pins","allPins","pinChange"],["title","Mixer",3,"pins","allPins","pinChange"],["title","Dose",3,"pins","allPins","pinChange"],["title","Dose Mixer",3,"pins","allPins","pinChange"],["title","Valve",3,"pins","allPins","pinChange"],["title","Level Sensor",3,"pins","allPins","pinChange"],["title","Beeper",3,"pins","allPins","pinChange"]],template:function(e,t){1&e&&(i.Tb(0,"mat-tab-group",0),i.Tb(1,"mat-tab",1),i.Tb(2,"mat-accordion",2),i.Tb(3,"mat-expansion-panel"),i.Tb(4,"mat-expansion-panel-header"),i.Tb(5,"mat-panel-title"),i.Cc(6," Pump "),i.Sb(),i.Tb(7,"mat-panel-description"),i.Cc(8," Pump pin assignment "),i.Sb(),i.Sb(),i.Ac(9,uc,2,4,"ng-template",3),i.Sb(),i.Tb(10,"mat-expansion-panel"),i.Tb(11,"mat-expansion-panel-header"),i.Tb(12,"mat-panel-title"),i.Cc(13," Flow sensor "),i.Sb(),i.Tb(14,"mat-panel-description"),i.Cc(15," Flow sensor pin assignment "),i.Sb(),i.Sb(),i.Ac(16,pc,2,4,"ng-template",3),i.Sb(),i.Tb(17,"mat-expansion-panel"),i.Tb(18,"mat-expansion-panel-header"),i.Tb(19,"mat-panel-title"),i.Cc(20," Mixer "),i.Sb(),i.Tb(21,"mat-panel-description"),i.Cc(22," Mixer pin assignment "),i.Sb(),i.Sb(),i.Ac(23,lc,2,4,"ng-template",3),i.Sb(),i.Tb(24,"mat-expansion-panel"),i.Tb(25,"mat-expansion-panel-header"),i.Tb(26,"mat-panel-title"),i.Cc(27," Dose "),i.Sb(),i.Tb(28,"mat-panel-description"),i.Cc(29," Dose pin assignment "),i.Sb(),i.Sb(),i.Ac(30,bc,2,4,"ng-template",3),i.Sb(),i.Tb(31,"mat-expansion-panel"),i.Tb(32,"mat-expansion-panel-header"),i.Tb(33,"mat-panel-title"),i.Cc(34," Dose Mixer "),i.Sb(),i.Tb(35,"mat-panel-description"),i.Cc(36," Dose Mixer pin assignment "),i.Sb(),i.Sb(),i.Ac(37,dc,2,4,"ng-template",3),i.Sb(),i.Tb(38,"mat-expansion-panel"),i.Tb(39,"mat-expansion-panel-header"),i.Tb(40,"mat-panel-title"),i.Cc(41," Valve "),i.Sb(),i.Tb(42,"mat-panel-description"),i.Cc(43," Valve pin assignment "),i.Sb(),i.Sb(),i.Ac(44,fc,2,4,"ng-template",3),i.Sb(),i.Tb(45,"mat-expansion-panel"),i.Tb(46,"mat-expansion-panel-header"),i.Tb(47,"mat-panel-title"),i.Cc(48," Level sensor "),i.Sb(),i.Tb(49,"mat-panel-description"),i.Cc(50," Level sensor pin assignment "),i.Sb(),i.Sb(),i.Ac(51,mc,2,4,"ng-template",3),i.Sb(),i.Tb(52,"mat-expansion-panel"),i.Tb(53,"mat-expansion-panel-header"),i.Tb(54,"mat-panel-title"),i.Cc(55," Beeper "),i.Sb(),i.Tb(56,"mat-panel-description"),i.Cc(57," Beeper pin assignment "),i.Sb(),i.Sb(),i.Ac(58,hc,2,4,"ng-template",3),i.Sb(),i.Sb(),i.Sb(),i.Ob(59,"mat-tab",4),i.Sb())},directives:[lo.b,lo.a,Di.a,Di.c,Di.f,Di.g,Di.e,Di.d,sc],pipes:[an.b],styles:[""],changeDetection:0}),e}(),yc=n("0IaG"),Oc=function(){function e(e){this.data=e,this.destroy$=new An.a}return e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.\u0275fac=function(t){return new(t||e)(i.Nb(yc.a))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-confirm"]],decls:10,vars:4,consts:[["mat-dialog-title",""],[1,"row","px-0","align-items-center"],[1,"col-12","d-flex","justify-content-end"],["mat-raised-button","","color","accent",3,"mat-dialog-close"],["mat-raised-button","","color","primary",3,"mat-dialog-close"]],template:function(e,t){1&e&&(i.Tb(0,"h2",0),i.Cc(1),i.Sb(),i.Tb(2,"mat-dialog-content"),i.Tb(3,"div",1),i.Cc(4),i.Sb(),i.Sb(),i.Tb(5,"mat-dialog-actions",2),i.Tb(6,"button",3),i.Cc(7,"Yes"),i.Sb(),i.Tb(8,"button",4),i.Cc(9,"Cancel"),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.Dc(t.data.title),i.Bb(3),i.Ec(" ",t.data.text," "),i.Bb(2),i.kc("mat-dialog-close",!0),i.Bb(2),i.kc("mat-dialog-close",!1))},directives:[yc.h,yc.e,yc.c,pn.a,yc.d],encapsulation:2}),e}(),vc=function(){function e(e){this.dialog=e}return e.prototype.confirm=function(e){return this.dialog.open(Oc,{data:e}).afterClosed()},e.\u0275fac=function(t){return new(t||e)(i.Xb(yc.b))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),e}(),Sc=n("3Pt+");function Tc(e,t){if(1&e){var n=i.Ub();i.Tb(0,"mat-list-item"),i.Tb(1,"div",6),i.Tb(2,"div",1),i.Cc(3),i.fc(4,"date"),i.Sb(),i.Tb(5,"button",7),i.ac("click",function(){i.sc(n);var e=t.index;return i.ec().onLoad(e)}),i.Ob(6,"mat-icon",8),i.Sb(),i.Tb(7,"button",9),i.ac("click",function(){i.sc(n);var e=t.index;return i.ec().onRemove(e)}),i.Ob(8,"mat-icon",10),i.Sb(),i.Sb(),i.Sb()}if(2&e){var o=t.$implicit;i.Bb(3),i.Fc(" ",i.hc(4,2,o.date,"YYYY-MM-dd HH:mm")," ",o.name," ")}}var Cc=[{path:"settings",children:[{path:"",component:go,pathMatch:"full",data:{title:"Settings",actions:["menu","bt","sync"]}},{path:"compote",component:Ao,data:{title:"Compote",actions:["back","sync"]}},{path:"program",component:No,data:{title:"Program",actions:["back","sync"]}},{path:"pump",component:Lo,data:{title:"Pump",actions:["back","sync"]}},{path:"dose",component:Go,data:{title:"Dose",actions:["back","sync"]}},{path:"mixer",component:oc,data:{title:"Mixer",actions:["back","sync"]}},{path:"timer",component:ec,data:{title:"Timer",actions:["back","sync"]}},{path:"schedule",component:zo,data:{title:"Schedule",actions:["back","sync"]}},{path:"pin-assignment",component:gc,data:{title:"Pin Assignment",actions:["back","sync"]}},{path:"backup",component:function(){function e(e,t){this.store=e,this.confirmService=t,this.backups$=this.store.pipe(Object(p.h)(Ne))}return e.prototype.onSave=function(){this.store.dispatch(new de({name:this.name}))},e.prototype.onLoad=function(e){this.store.dispatch(new fe(e))},e.prototype.onRemove=function(e){var t=this;this.confirmService.confirm({title:"Remove backup",text:"Are you sure want to remove backup?"}).subscribe(function(n){n&&t.store.dispatch(new me(e))})},e.prototype.trackByIndex=function(e){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(vc))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-backup"]],decls:11,vars:5,consts:[[1,"w-100","mx-2","d-flex"],[1,"flex-fill"],["matInput","",3,"ngModel","ngModelChange"],["type","button","mat-button","",1,"mx-2",3,"click"],["svgIcon","content-save"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"w-100","d-flex"],["type","button","mat-icon-button","",3,"click"],["svgIcon","download-circle-outline"],["type","button","mat-icon-button","","color","warn",3,"click"],["svgIcon","delete-forever-outline"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"mat-form-field",1),i.Tb(2,"mat-label"),i.Cc(3," Name "),i.Sb(),i.Tb(4,"input",2),i.ac("ngModelChange",function(e){return t.name=e}),i.Sb(),i.Sb(),i.Tb(5,"button",3),i.ac("click",function(){return t.onSave()}),i.Ob(6,"mat-icon",4),i.Cc(7," Save "),i.Sb(),i.Sb(),i.Tb(8,"mat-list"),i.Ac(9,Tc,9,5,"mat-list-item",5),i.fc(10,"async"),i.Sb()),2&e&&(i.Bb(4),i.kc("ngModel",t.name),i.Bb(5),i.kc("ngForOf",i.gc(10,3,t.backups$))("ngForTrackBy",t.trackByIndex))},directives:[Ai.b,Ai.e,wi.b,Sc.c,Sc.k,Sc.n,pn.a,ln.a,un.a,an.l,un.b],pipes:[an.b,an.e],styles:[""],changeDetection:0}),e}(),data:{title:"Backup",actions:["back","sync"]}}]}],Ec=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(Cc)],r.e]}),e}(),jc=function(){function e(e){this.data=e,this.destroy$=new An.a}return e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.\u0275fac=function(t){return new(t||e)(i.Nb(yc.a))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-alert"]],decls:8,vars:3,consts:[["mat-dialog-title",""],[1,"row","px-0","align-items-center"],[1,"col-12","d-flex","justify-content-end"],["mat-raised-button","","color","accent",3,"mat-dialog-close"]],template:function(e,t){1&e&&(i.Tb(0,"h2",0),i.Cc(1),i.Sb(),i.Tb(2,"mat-dialog-content"),i.Tb(3,"div",1),i.Cc(4),i.Sb(),i.Sb(),i.Tb(5,"mat-dialog-actions",2),i.Tb(6,"button",3),i.Cc(7,"Ok"),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.Dc(t.data.title),i.Bb(3),i.Ec(" ",t.data.text," "),i.Bb(2),i.kc("mat-dialog-close",!0))},directives:[yc.h,yc.e,yc.c,pn.a,yc.d],encapsulation:2}),e}(),Ac=function(){function e(e){this.dialog=e}return e.prototype.alert=function(e){return this.dialog.open(jc,{data:e}).afterClosed()},e.\u0275fac=function(t){return new(t||e)(i.Xb(yc.b))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),e}(),wc=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[Ac],imports:[[an.c,yc.f,pn.b,ln.b]]}),e}(),Ic=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[vc],imports:[[an.c,yc.f,pn.b,ln.b]]}),e}(),Dc=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Sc.g,pn.b,ln.b,Ai.d,un.c,wi.c,wc,Ic]]}),e}(),_c=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ec,un.c,ln.b,Cn,xi,Qi,to,io,ro,so,po,fo,Dc]]}),e}(),xc=new i.r("DEVICE_CONNECT"),kc=function(e){return e[e.beginMessage=128]="beginMessage",e[e.endMessage=192]="endMessage",e[e.payloadMask=127]="payloadMask",e[e.cmdMask=64]="cmdMask",e[e.cmdPayloadMask=63]="cmdPayloadMask",e[e.mask=128]="mask",e}({});function Rc(e){for(var t=Math.floor(7*e.byteLength/8),n=new Uint8Array(t),i=0,o=0,c=0,r=0;r<e.byteLength;r++)i+=e[r]<<o,(o+=7)<8||(n[c]=255&i,c+=1,o-=8,i>>=8);return n}function Nc(e){for(var t=8*e.length,n=0,i=252,o=0;t--;)n--||(n=7,i^=e[o++]),i=255&(i<<1^(128&i?156:0));return i>>2&63}function Pc(e,t){if(!e)return 0;var n="string"==typeof e?t[e]:e;return Object.keys(n).reduce(function(e,i){var o=n[i],c="string"==typeof o?{type:"object",itemMeta:t[o]}:o;switch(c.type){case"list":return e+c.length*Pc(c.itemMeta,t);case"object":return e+Pc(c.itemMeta,t);case"uint8":return e+1;case"uint16":return e+2;case"uint32":return e+4;case"uint8[]":return e+1*c.length;case"uint16[]":return e+2*c.length;case"uint32[]":return e+4*c.length;case"string":return e+1*c.length}},0)}var Mc=function(){function e(e,t,n){this.meta=e,this.struct=t,this.mapper=n}return e.prototype.serialize=function(e){var t=this,n=e.type,i=e.payload,o=this.meta[this.mapper[n]],c=Pc(o,this.struct),r=new ArrayBuffer(c),a=new DataView(r),s=0,u=function(e,n){"string"==typeof n&&(n=t.struct[n]),Object.keys(n).forEach(function(i){var o=n[i],c=e[i];switch("string"==typeof o&&(o={type:"object",itemMeta:t.struct[o]}),o.type){case"list":return void c.forEach(function(e){return u(e,o.itemMeta)});case"object":return void u(c,o.itemMeta);case"uint8":return a.setUint8(s,c),void(s+=1);case"uint16":return a.setUint16(s,c,!0),void(s+=2);case"uint32":return a.setUint32(s,c,!0),void(s+=4);case"uint8[]":return void c.forEach(function(e){a.setUint8(s,e),s+=1});case"uint16[]":return void c.forEach(function(e){a.setUint16(s,e,!0),s+=2});case"uint32[]":return void c.forEach(function(e){a.setUint32(s,e,!0),s+=4});case"string":return}})};u(i,o);var p=function(e){for(var t=Math.ceil(8*e.byteLength/7),n=new Uint8Array(t),i=0;i<t;i++){var o=Math.floor(7*i/8),c=e[o]+((e[o+1]||0)<<8);n[i]=c=c>>(8-i%8)%8&kc.payloadMask}return n}(new Uint8Array(r)),l=new ArrayBuffer(p.byteLength+2),b=new DataView(l);b.setUint8(0,n|kc.beginMessage),new Uint8Array(l).set(p,1);var d=Nc(new Uint8Array(r));return b.setUint8(l.byteLength-1,d|kc.endMessage),l},e}(),Bc=function(){function e(e,t,n,i){this.meta=e,this.struct=t,this.mapper=n,this.store=i,this.mapRaw=this.mapRaw.bind(this)}return e.prototype.deserialize=function(e,t){var n=this,i=0,o=new DataView(t),c=function(e){var t="string"==typeof e?n.struct[e]:e,r={};return Object.keys(t).forEach(function(e){var a,s=t[e],u="string"==typeof s?{type:"object",itemMeta:n.struct[s]}:s;switch(u.type){case"list":a=new Array(u.length);for(var p=0;p<u.length;p++)a[p]=c(u.itemMeta);break;case"object":a=c(u.itemMeta);break;case"uint8":a=o.getUint8(i),i+=1;break;case"uint16":a=o.getUint16(i,!0),i+=2;break;case"uint32":a=o.getUint32(i,!0),i+=4;break;case"uint8[]":for(a=new Array(u.length),p=0;p<u.length;p++)a[p]=o.getUint8(i),i+=1;break;case"uint16[]":for(a=new Array(u.length),p=0;p<u.length;p++)a[p]=o.getUint16(i,!0),i+=2;break;case"uint32[]":for(a=new Array(u.length),p=0;p<u.length;p++)a[p]=o.getUint32(i,!0),i+=4;break;case"string":throw new Error("not implemented")}r[e]=a}),r};return{type:e,payload:c(this.meta[this.mapper[e]])}},e.prototype.mapRaw=function(e){var t,n=this;return e.pipe((void 0===t&&(t=256),function(e){return new Ui.a(function(i){var o=null,c=new Uint8Array(t),r=0;return e.subscribe({next:function(e){for(var t=new Uint8Array(e),a=t.length,s=0;s<a;s++){var u=t[s];if(u&kc.mask){var p=u&kc.cmdPayloadMask;if(u&kc.cmdMask){if(null===o){n.store.dispatch(new Pt({time:new Date,icon:"alert-circle-outline",text:"received end marked, but type is not defined",type:Ut.error}));continue}var l=Rc(c.slice(0,r)),b=Pc(n.meta[n.mapper[o]],n.struct);if(l.byteLength!==b){n.store.dispatch(new Pt({time:new Date,icon:"alert-circle-outline",text:"received bad length "+l.byteLength+" expected "+b,type:Ut.error})),o=null,r=0;continue}var d=Nc(l);if(d!==p){n.store.dispatch(new Pt({time:new Date,icon:"alert-circle-outline",text:"received bad crc "+p+" expected "+d,type:Ut.error})),o=null,r=0;continue}i.next({type:o,raw:l.buffer}),o=null,r=0;continue}null!==o&&n.store.dispatch(new Pt({time:new Date,icon:"alert-circle-outline",text:"received begin marked, but previous message is not complete",type:Ut.error})),o=p,r=0}else null!==o?(c[r]=u,r+=1):n.store.dispatch(new Pt({time:new Date,icon:"alert-circle-outline",text:"received body, but type is not defined",type:Ut.error}))}},error:function(e){i.error(e)},complete:function(){i.complete()}})})})).pipe(Object(nt.a)(function(e){return n.deserialize(e.type,e.raw)}))},e}(),Lc={fertigate:{programId:{type:"uint8"}},irrigate:{programId:{type:"uint8"}},wash:{programId:{type:"uint8"}},pumpIn:{programId:{type:"uint8"}},compote:{programId:{type:"uint8"}},washCompote:{programId:{type:"uint8"}},mix:{mixerId:{type:"uint8"}},mixDose:{mixerId:{type:"uint8"}},dose:{programId:{type:"uint8"},doseId:{type:"uint8"}},getProgram:{index:{type:"uint8"}},setProgram:{index:{type:"uint8"},value:"program"},getCompoteDaily:{index:{type:"uint8"},dailyIndex:{type:"uint8"}},setCompoteDaily:{index:{type:"uint8"},dailyIndex:{type:"uint8"},value:"compoteDaily"},getSchedule:{index:{type:"uint8"}},setSchedule:{index:{type:"uint8"},value:"schedule"},getTimer:{index:{type:"uint8"}},setTimer:{index:{type:"uint8"},value:"timer"},getPump:{index:{type:"uint8"}},setPump:{index:{type:"uint8"},value:"pump"},getMixer:{index:{type:"uint8"}},setMixer:{index:{type:"uint8"},value:"mixer"},getDose:{index:{type:"uint8"}},setDose:{index:{type:"uint8"},value:"dose"},getLevelSensor:{index:{type:"uint8"}},setLevelSensor:{index:{type:"uint8"},value:"levelSensor"},getPin:{type:{type:"uint8"},index:{type:"uint8"}},setPin:{type:{type:"uint8"},index:{type:"uint8"},value:{type:"uint8"}},getTime:"empty",setTime:"dateTime",getTemp:"empty",getStatus:"empty",getStatePump:{index:{type:"uint8"}},setStatePump:{index:{type:"uint8"},value:{type:"uint8"}},getStateValve:{index:{type:"uint8"}},setStateValve:{index:{type:"uint8"},value:{type:"uint8"}},getStateMixer:{index:{type:"uint8"}},setStateMixer:{index:{type:"uint8"},value:{type:"uint8"}},getStateDose:{index:{type:"uint8"}},setStateDose:{index:{type:"uint8"},value:{type:"uint8"}},getStateDoseMixer:{index:{type:"uint8"}},setStateDoseMixer:{index:{type:"uint8"},value:{type:"uint8"}},resetError:{fake:{type:"uint8"}}},Fc={empty:{fake:{type:"uint8"}},dayTime:{hour:{type:"uint8"},minute:{type:"uint8"},second:{type:"uint8"}},dateDay:{wday:{type:"uint8"},day:{type:"uint8"},month:{type:"uint8"},year:{type:"uint8"}},program:{valves:{type:"uint8[]",length:Math.ceil(3)},compote:{type:"uint8"},start:"dateDay"},compoteDaily:{days:{type:"uint8"},schedule:{type:"uint8"},volume:{type:"uint16"},washVolume:{type:"uint16"},dose:{type:"uint16[]",length:4}},compote:{daily:{type:"list",length:14,itemMeta:"compoteDaily"}},schedule:{enable:{type:"uint8"},deviceId:{type:"uint8"},startTime:"dayTime",endTime:"dayTime"},timer:{enable:{type:"uint8"},program:{type:"uint8"},weekDays:{type:"uint8"},time:"dayTime"},pump:{minFlow:{type:"uint16"},startingTime:{type:"uint16"},pwmFlow:{type:"uint16"},pwm:{type:"uint8"},rate:{type:"uint16"}},levelSensor:{enable:{type:"uint8"},seconds:{type:"uint8"}},mixer:{seconds:{type:"uint16"},washSeconds:{type:"uint16"},pwmSensor:{type:"uint16"},pwm:{type:"uint8"}},dose:{rate:{type:"uint32"},seconds:{type:"uint16"},pwmSensor:{type:"uint16"},pwm:{type:"uint8"}},dateTime:{second:{type:"uint8"},minute:{type:"uint8"},hour:{type:"uint8"},wday:{type:"uint8"},day:{type:"uint8"},month:{type:"uint8"},year:{type:"uint8"}},deviceStatus:{state:{type:"uint8"},cmdState:{type:"uint8"},valve:{type:"uint8"},flow:{type:"uint16"},volume:{type:"uint16"},totalVolume:{type:"uint16"},mix:{type:"uint16"},doseId:{type:"uint8"},valveId:{type:"uint8"}},settings:{program:{type:"list",length:4,itemMeta:"program"},compote:{type:"list",length:2,itemMeta:"compote"},schedule:{type:"list",length:4,itemMeta:"schedule"},timer:{type:"list",length:8,itemMeta:"timer"},pump:{type:"list",length:2,itemMeta:"pump"},levelSensor:{type:"list",length:2,itemMeta:"levelSensor"},mixer:{type:"list",length:1,itemMeta:"mixer"},dose:{type:"list",length:4,itemMeta:"dose"}},pinAssignment:{pump:{type:"uint8[]",length:2},flowSensor:{type:"uint8[]",length:2},levelSensor:{type:"uint8[]",length:2},mixer:{type:"uint8[]",length:1},dose:{type:"uint8[]",length:4},doseMixer:{type:"uint8[]",length:4},valve:{type:"uint8[]",length:l},beeper:{type:"uint8[]",length:1}}},Uc={commandSuccess:{code:{type:"uint8"}},log:{code:{type:"uint8"}},status:"deviceStatus",error:{code:{type:"uint8"}},program:{index:{type:"uint8"},value:"program"},compoteDaily:{index:{type:"uint8"},dailyIndex:{type:"uint8"},value:"compoteDaily"},schedule:{index:{type:"uint8"},value:"schedule"},timer:{index:{type:"uint8"},value:"timer"},pump:{index:{type:"uint8"},value:"pump"},mixer:{index:{type:"uint8"},value:"mixer"},dose:{index:{type:"uint8"},value:"dose"},levelSensor:{index:{type:"uint8"},value:"levelSensor"},pin:{type:{type:"uint8"},index:{type:"uint8"},value:{type:"uint8"}},time:"dateTime",temp:{value:{type:"uint16"}},statePump:{value:{type:"uint8"}},stateValve:{value:{type:"uint8"}},stateMixer:{value:{type:"uint8"}},stateDose:{value:{type:"uint8"}},stateDoseMixer:{value:{type:"uint8"}}},$c=function(){function e(e,t){this.deviceConnect=e,this.store=t,this.requestSerializer=new Mc(Lc,Fc,It),this.responseDeserializer=new Bc(Uc,Fc,Dt,t),this.response$=this.deviceConnect.response$.pipe(this.responseDeserializer.mapRaw).pipe(Object(nt.a)(function(e){return e.type===Dt.temp?{type:Dt.temp,payload:{value:.1*Math.round(2.5*e.payload.value)}}:e}))}return e.prototype.discover=function(e){return this.deviceConnect.discover(e)},e.prototype.connect=function(e){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(t){switch(t.label){case 0:return[4,this.deviceConnect.connect(e)];case 1:return t.sent(),[2]}})})},e.prototype.disconnect=function(){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(e){switch(e.label){case 0:return[4,this.deviceConnect.disconnect()];case 1:return e.sent(),[2]}})})},e.prototype.send=function(e){return Object(u.b)(this,void 0,void 0,function(){var t;return Object(u.d)(this,function(n){switch(n.label){case 0:return t=this.requestSerializer.serialize(e),[4,this.deviceConnect.send(t)];case 1:return n.sent(),[2]}})})},e.\u0275fac=function(t){return new(t||e)(i.Xb(xc),i.Xb(p.b))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Gc=function(){function e(){this.enabled=!0,this.responseSubject=new An.a,"serial"in navigator||(console.warn("Your browser does not support Serial API"),this.enabled=!1),this.response$=this.responseSubject.asObservable()}return e.prototype.discover=function(e){return Object(u.b)(this,void 0,void 0,function(){var t,n;return Object(u.d)(this,function(i){switch(i.label){case 0:return console.log("[Serial::Info] Requesting devices with options %o",e),[4,navigator.serial.getPorts()];case 1:return t=i.sent(),console.log(t),[4,navigator.serial.requestPort()];case 2:return n=i.sent(),console.log(n),console.log(n.getInfo()),this.port=n,[2,[{id:"id",name:"name",type:"serial",port:n}]]}})})},e.prototype.connect=function(e){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(e){switch(e.label){case 0:return console.log("open serial port"),[4,this.port.open({baudrate:9600,baudRate:9600})];case 1:return e.sent(),console.log("serial port is opened"),[2]}})})},e.prototype.disconnect=function(){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(e){return[2]})})},e.prototype.send=function(e){return Object(u.b)(this,void 0,void 0,function(){var t;return Object(u.d)(this,function(n){switch(n.label){case 0:return console.log("serial port write"),[4,(t=this.port.writable.getWriter()).write(e)];case 1:return n.sent(),t.releaseLock(),[2]}})})},e.prototype.read=function(){return Object(u.b)(this,void 0,void 0,function(){var e,t,n,i;return Object(u.d)(this,function(o){switch(o.label){case 0:o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.port.readable.getReader().read()];case 2:return e=o.sent(),n=e.done,(t=e.value)&&this.responseSubject.next(t),n?(console.log("[readLoop] DONE",n),this.port.readable.getReader().releaseLock(),[3,5]):[3,4];case 3:return i=o.sent(),console.log(i),[3,4];case 4:return[3,0];case 5:return[2]}})})},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}(),Hc=n("QibW"),Vc=n("Xa2L"),Kc=function(e){return e.ACCESS_CHECKIN_PROPERTIES="android.permission.ACCESS_CHECKIN_PROPERTIES",e.ACCESS_COARSE_LOCATION="android.permission.ACCESS_COARSE_LOCATION",e.ACCESS_FINE_LOCATION="android.permission.ACCESS_FINE_LOCATION",e.ACCESS_LOCATION_EXTRA_COMMANDS="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS",e.ACCESS_MOCK_LOCATION="android.permission.ACCESS_MOCK_LOCATION",e.ACCESS_NETWORK_STATE="android.permission.ACCESS_NETWORK_STATE",e.ACCESS_SURFACE_FLINGER="android.permission.ACCESS_SURFACE_FLINGER",e.ACCESS_WIFI_STATE="android.permission.ACCESS_WIFI_STATE",e.ACCOUNT_MANAGER="android.permission.ACCOUNT_MANAGER",e.ADD_VOICEMAIL="com.android.voicemail.permission.ADD_VOICEMAIL",e.AUTHENTICATE_ACCOUNTS="android.permission.AUTHENTICATE_ACCOUNTS",e.BATTERY_STATS="android.permission.BATTERY_STATS",e.BIND_ACCESSIBILITY_SERVICE="android.permission.BIND_ACCESSIBILITY_SERVICE",e.BIND_APPWIDGET="android.permission.BIND_APPWIDGET",e.BIND_CARRIER_MESSAGING_SERVICE="android.permission.BIND_CARRIER_MESSAGING_SERVICE",e.BIND_DEVICE_ADMIN="android.permission.BIND_DEVICE_ADMIN",e.BIND_DREAM_SERVICE="android.permission.BIND_DREAM_SERVICE",e.BIND_INPUT_METHOD="android.permission.BIND_INPUT_METHOD",e.BIND_NFC_SERVICE="android.permission.BIND_NFC_SERVICE",e.BIND_NOTIFICATION_LISTENER_SERVICE="android.permission.BIND_NOTIFICATION_LISTENER_SERVICE",e.BIND_PRINT_SERVICE="android.permission.BIND_PRINT_SERVICE",e.BIND_REMOTEVIEWS="android.permission.BIND_REMOTEVIEWS",e.BIND_TEXT_SERVICE="android.permission.BIND_TEXT_SERVICE",e.BIND_TV_INPUT="android.permission.BIND_TV_INPUT",e.BIND_VOICE_INTERACTION="android.permission.BIND_VOICE_INTERACTION",e.BIND_VPN_SERVICE="android.permission.BIND_VPN_SERVICE",e.BIND_WALLPAPER="android.permission.BIND_WALLPAPER",e.BLUETOOTH="android.permission.BLUETOOTH",e.BLUETOOTH_ADMIN="android.permission.BLUETOOTH_ADMIN",e.BLUETOOTH_PRIVILEGED="android.permission.BLUETOOTH_PRIVILEGED",e.BODY_SENSORS="android.permission.BODY_SENSORS",e.BRICK="android.permission.BRICK",e.BROADCAST_PACKAGE_REMOVED="android.permission.BROADCAST_PACKAGE_REMOVED",e.BROADCAST_SMS="android.permission.BROADCAST_SMS",e.BROADCAST_STICKY="android.permission.BROADCAST_STICKY",e.BROADCAST_WAP_PUSH="android.permission.BROADCAST_WAP_PUSH",e.CALL_PHONE="android.permission.CALL_PHONE",e.CALL_PRIVILEGED="android.permission.CALL_PRIVILEGED",e.CAMERA="android.permission.CAMERA",e.CAPTURE_AUDIO_OUTPUT="android.permission.CAPTURE_AUDIO_OUTPUT",e.CAPTURE_SECURE_VIDEO_OUTPUT="android.permission.CAPTURE_SECURE_VIDEO_OUTPUT",e.CAPTURE_VIDEO_OUTPUT="android.permission.CAPTURE_VIDEO_OUTPUT",e.CHANGE_COMPONENT_ENABLED_STATE="android.permission.CHANGE_COMPONENT_ENABLED_STATE",e.CHANGE_CONFIGURATION="android.permission.CHANGE_CONFIGURATION",e.CHANGE_NETWORK_STATE="android.permission.CHANGE_NETWORK_STATE",e.CHANGE_WIFI_MULTICAST_STATE="android.permission.CHANGE_WIFI_MULTICAST_STATE",e.CHANGE_WIFI_STATE="android.permission.CHANGE_WIFI_STATE",e.CLEAR_APP_CACHE="android.permission.CLEAR_APP_CACHE",e.CLEAR_APP_USER_DATA="android.permission.CLEAR_APP_USER_DATA",e.CONTROL_LOCATION_UPDATES="android.permission.CONTROL_LOCATION_UPDATES",e.DELETE_CACHE_FILES="android.permission.DELETE_CACHE_FILES",e.DELETE_PACKAGES="android.permission.DELETE_PACKAGES",e.DEVICE_POWER="android.permission.DEVICE_POWER",e.DIAGNOSTIC="android.permission.DIAGNOSTIC",e.DISABLE_KEYGUARD="android.permission.DISABLE_KEYGUARD",e.DUMP="android.permission.DUMP",e.EXPAND_STATUS_BAR="android.permission.EXPAND_STATUS_BAR",e.FACTORY_TEST="android.permission.FACTORY_TEST",e.FLASHLIGHT="android.permission.FLASHLIGHT",e.FORCE_BACK="android.permission.FORCE_BACK",e.GET_ACCOUNTS="android.permission.GET_ACCOUNTS",e.GET_PACKAGE_SIZE="android.permission.GET_PACKAGE_SIZE",e.GET_TASKS="android.permission.GET_TASKS",e.GET_TOP_ACTIVITY_INFO="android.permission.GET_TOP_ACTIVITY_INFO",e.GLOBAL_SEARCH="android.permission.GLOBAL_SEARCH",e.HARDWARE_TEST="android.permission.HARDWARE_TEST",e.INJECT_EVENTS="android.permission.INJECT_EVENTS",e.INSTALL_LOCATION_PROVIDER="android.permission.INSTALL_LOCATION_PROVIDER",e.INSTALL_PACKAGES="android.permission.INSTALL_PACKAGES",e.INSTALL_SHORTCUT="com.android.launcher.permission.INSTALL_SHORTCUT",e.INTERNAL_SYSTEM_WINDOW="android.permission.INTERNAL_SYSTEM_WINDOW",e.INTERNET="android.permission.INTERNET",e.KILL_BACKGROUND_PROCESSES="android.permission.KILL_BACKGROUND_PROCESSES",e.LOCATION_HARDWARE="android.permission.LOCATION_HARDWARE",e.MANAGE_ACCOUNTS="android.permission.MANAGE_ACCOUNTS",e.MANAGE_APP_TOKENS="android.permission.MANAGE_APP_TOKENS",e.MANAGE_DOCUMENTS="android.permission.MANAGE_DOCUMENTS",e.MASTER_CLEAR="android.permission.MASTER_CLEAR",e.MEDIA_CONTENT_CONTROL="android.permission.MEDIA_CONTENT_CONTROL",e.MODIFY_AUDIO_SETTINGS="android.permission.MODIFY_AUDIO_SETTINGS",e.MODIFY_PHONE_STATE="android.permission.MODIFY_PHONE_STATE",e.MOUNT_FORMAT_FILESYSTEMS="android.permission.MOUNT_FORMAT_FILESYSTEMS",e.MOUNT_UNMOUNT_FILESYSTEMS="android.permission.MOUNT_UNMOUNT_FILESYSTEMS",e.NFC="android.permission.NFC",e.PERSISTENT_ACTIVITY="android.permission.PERSISTENT_ACTIVITY",e.PROCESS_OUTGOING_CALLS="android.permission.PROCESS_OUTGOING_CALLS",e.READ_CALENDAR="android.permission.READ_CALENDAR",e.READ_CALL_LOG="android.permission.READ_CALL_LOG",e.READ_CONTACTS="android.permission.READ_CONTACTS",e.READ_EXTERNAL_STORAGE="android.permission.READ_EXTERNAL_STORAGE",e.READ_FRAME_BUFFER="android.permission.READ_FRAME_BUFFER",e.READ_HISTORY_BOOKMARKS="com.android.browser.permission.READ_HISTORY_BOOKMARKS",e.READ_INPUT_STATE="android.permission.READ_INPUT_STATE",e.READ_LOGS="android.permission.READ_LOGS",e.READ_PHONE_STATE="android.permission.READ_PHONE_STATE",e.READ_PROFILE="android.permission.READ_PROFILE",e.READ_SMS="android.permission.READ_SMS",e.READ_SOCIAL_STREAM="android.permission.READ_SOCIAL_STREAM",e.READ_SYNC_SETTINGS="android.permission.READ_SYNC_SETTINGS",e.READ_SYNC_STATS="android.permission.READ_SYNC_STATS",e.READ_USER_DICTIONARY="android.permission.READ_USER_DICTIONARY",e.READ_VOICEMAIL="com.android.voicemail.permission.READ_VOICEMAIL",e.REBOOT="android.permission.REBOOT",e.RECEIVE_BOOT_COMPLETED="android.permission.RECEIVE_BOOT_COMPLETED",e.RECEIVE_MMS="android.permission.RECEIVE_MMS",e.RECEIVE_SMS="android.permission.RECEIVE_SMS",e.RECEIVE_WAP_PUSH="android.permission.RECEIVE_WAP_PUSH",e.RECORD_AUDIO="android.permission.RECORD_AUDIO",e.REORDER_TASKS="android.permission.REORDER_TASKS",e.RESTART_PACKAGES="android.permission.RESTART_PACKAGES",e.SEND_RESPOND_VIA_MESSAGE="android.permission.SEND_RESPOND_VIA_MESSAGE",e.SEND_SMS="android.permission.SEND_SMS",e.SET_ACTIVITY_WATCHER="android.permission.SET_ACTIVITY_WATCHER",e.SET_ALARM="com.android.alarm.permission.SET_ALARM",e.SET_ALWAYS_FINISH="android.permission.SET_ALWAYS_FINISH",e.SET_ANIMATION_SCALE="android.permission.SET_ANIMATION_SCALE",e.SET_DEBUG_APP="android.permission.SET_DEBUG_APP",e.SET_ORIENTATION="android.permission.SET_ORIENTATION",e.SET_POINTER_SPEED="android.permission.SET_POINTER_SPEED",e.SET_PREFERRED_APPLICATIONS="android.permission.SET_PREFERRED_APPLICATIONS",e.SET_PROCESS_LIMIT="android.permission.SET_PROCESS_LIMIT",e.SET_TIME="android.permission.SET_TIME",e.SET_TIME_ZONE="android.permission.SET_TIME_ZONE",e.SET_WALLPAPER="android.permission.SET_WALLPAPER",e.SET_WALLPAPER_HINTS="android.permission.SET_WALLPAPER_HINTS",e.SIGNAL_PERSISTENT_PROCESSES="android.permission.SIGNAL_PERSISTENT_PROCESSES",e.STATUS_BAR="android.permission.STATUS_BAR",e.SUBSCRIBED_FEEDS_READ="android.permission.SUBSCRIBED_FEEDS_READ",e.SUBSCRIBED_FEEDS_WRITE="android.permission.SUBSCRIBED_FEEDS_WRITE",e.SYSTEM_ALERT_WINDOW="android.permission.SYSTEM_ALERT_WINDOW",e.TRANSMIT_IR="android.permission.TRANSMIT_IR",e.UNINSTALL_SHORTCUT="com.android.launcher.permission.UNINSTALL_SHORTCUT",e.UPDATE_DEVICE_STATS="android.permission.UPDATE_DEVICE_STATS",e.USE_CREDENTIALS="android.permission.USE_CREDENTIALS",e.USE_SIP="android.permission.USE_SIP",e.VIBRATE="android.permission.VIBRATE",e.WAKE_LOCK="android.permission.WAKE_LOCK",e.WRITE_APN_SETTINGS="android.permission.WRITE_APN_SETTINGS",e.WRITE_CALENDAR="android.permission.WRITE_CALENDAR",e.WRITE_CALL_LOG="android.permission.WRITE_CALL_LOG",e.WRITE_CONTACTS="android.permission.WRITE_CONTACTS",e.WRITE_EXTERNAL_STORAGE="android.permission.WRITE_EXTERNAL_STORAGE",e.WRITE_GSERVICES="android.permission.WRITE_GSERVICES",e.WRITE_HISTORY_BOOKMARKS="com.android.browser.permission.WRITE_HISTORY_BOOKMARKS",e.WRITE_PROFILE="android.permission.WRITE_PROFILE",e.WRITE_SECURE_SETTINGS="android.permission.WRITE_SECURE_SETTINGS",e.WRITE_SETTINGS="android.permission.WRITE_SETTINGS",e.WRITE_SMS="android.permission.WRITE_SMS",e.WRITE_SOCIAL_STREAM="android.permission.WRITE_SOCIAL_STREAM",e.WRITE_SYNC_SETTINGS="android.permission.WRITE_SYNC_SETTINGS",e.WRITE_USER_DICTIONARY="android.permission.WRITE_USER_DICTIONARY",e.WRITE_VOICEMAIL="com.android.voicemail.permission.WRITE_VOICEMAIL",e}({}),Wc=function(){function e(){this.plugin=window.cordova.plugins.permissions}return e.prototype.checkPermission=function(e){var t=this;return new Promise(function(n,i){t.plugin.hasPermission(e,function(t){n(t[e])},i)})},e.prototype.requestPermission=function(e){var t=this;return new Promise(function(n,i){t.plugin.requestPermission(e,function(e){n(e.hasPermission)},i)})},e.prototype.requestPermissions=function(e){return null},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),Yc=function(){function e(e){var t=this;this.permission=e,this.responseSubject=new An.a,console.log(window.plugins,window.cordova,window.cordova.plugins),this.plugin=bluetoothSerial,this.response$=this.responseSubject.asObservable(),this.subscribeRawData=function(e){t.responseSubject.next(e)}}return e.prototype.discover=function(e){return Object(u.b)(this,void 0,void 0,function(){var e=this;return Object(u.d)(this,function(t){switch(t.label){case 0:return console.log("discover$"),[4,this.permission.requestPermission(Kc.BLUETOOTH)];case 1:if(!t.sent())throw new Error("deny");return console.log(Kc.BLUETOOTH,"OK"),[4,new Promise(function(t,n){return e.plugin.list(function(e){console.log("discover",JSON.stringify(e)),t(e)},function(e){console.log("discover",JSON.stringify(e)),n(e)})})];case 2:return[2,t.sent()]}})})},e.prototype.connect=function(e){return Object(u.b)(this,void 0,void 0,function(){var t=this;return Object(u.d)(this,function(n){switch(n.label){case 0:return console.log("connect$",e),[4,new Promise(function(n,i){return t.plugin.connectInsecure(e.address,function(e){console.log("connect",JSON.stringify(e)),n()},function(e){console.log("connect",JSON.stringify(e)),i(e)})})];case 1:return n.sent(),this.plugin.subscribeRawData(this.subscribeRawData),[2]}})})},e.prototype.disconnect=function(){return Object(u.b)(this,void 0,void 0,function(){var e=this;return Object(u.d)(this,function(t){switch(t.label){case 0:return console.log("disconnect$"),[4,new Promise(function(t,n){return e.plugin.unsubscribeRawData(function(e){console.log("unsubscribe",JSON.stringify(e)),t()},function(e){console.log("unsubscribe",JSON.stringify(e)),n(e)})})];case 1:return t.sent(),[4,new Promise(function(t,n){return e.plugin.disconnect(function(e){console.log("disconnect",JSON.stringify(e)),t()},function(e){console.log("disconnect",JSON.stringify(e)),n(e)})})];case 2:return t.sent(),[2]}})})},e.prototype.send=function(e){var t=this;return new Promise(function(n,i){return t.plugin.write(e,function(e){console.log("send success",JSON.stringify(e)),n()},function(e){console.log("send error",JSON.stringify(e)),i(e)})})},e.\u0275fac=function(t){return new(t||e)(i.Xb(Wc))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Xc=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[Wc,{provide:xc,useClass:Yc}]}),e}(),zc=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[Object(u.f)([Xc])]}),e}(),qc=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[$c],imports:[[an.c,zc]]}),e}(),Jc=n("R1ws"),Qc=n("tk/3"),Zc=n("DKVz"),er=function(e){return e.INIT="[Monitor] Init",e.UPDATE_TEMP="[Monitor] Update temp",e.UPDATE_FLOW="[Monitor] Update flow",e}({}),tr=function(){return function(){this.type=er.INIT}}(),nr=function(){return function(e){this.payload=e,this.type=er.UPDATE_TEMP}}(),ir=function(){return function(e){this.payload=e,this.type=er.UPDATE_FLOW}}(),or={temp:{xData:[],yData:[]},flow:{xData:[],yData:[]}},cr=function(e){return e.monitor.temp},rr=function(e){return e.monitor.flow};function ar(e,t){switch(void 0===e&&(e=or),t.type){case er.UPDATE_TEMP:return function(e,t){return Object(u.a)(Object(u.a)({},e),{temp:t})}(e,t.payload);case er.UPDATE_FLOW:return function(e,t){return Object(u.a)(Object(u.a)({},e),{flow:t})}(e,t.payload);default:return e}}var sr=[{path:"monitor",component:function(){function e(e){var t=this;this.store=e,this.tempOptions$=this.store.pipe(Object(p.h)(cr)).pipe(Object(nt.a)(function(e){return t.getTempOptions(e)})),this.flowOptions$=this.store.pipe(Object(p.h)(rr)).pipe(Object(nt.a)(function(e){return t.getFlowOptions(e)}))}return e.prototype.ngOnInit=function(){this.store.dispatch(new tr)},e.prototype.getTempOptions=function(e){return{color:["#1edb13"],title:{show:!0,text:"Temperature \u2103"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataZoom:{show:!0,realtime:!0,zoomLock:!0,start:80,end:100},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:e.xData,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"Counters",type:"line",barWidth:"60%",data:e.yData}]}},e.prototype.getFlowOptions=function(e){return{color:["#3398DB"],title:{show:!0,text:"Flow mL/min"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataZoom:{show:!0,realtime:!0,zoomLock:!0,start:80,end:100},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:e.xData,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"mL/min",type:"line",barWidth:"60%",data:e.yData}]}},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-monitor"]],decls:4,vars:6,consts:[["echarts","",1,"temp-chart",3,"options"]],template:function(e,t){1&e&&(i.Ob(0,"div",0),i.fc(1,"async"),i.Ob(2,"div",0),i.fc(3,"async")),2&e&&(i.kc("options",i.gc(1,2,t.tempOptions$)),i.Bb(2),i.kc("options",i.gc(3,4,t.flowOptions$)))},directives:[Zc.b],pipes:[an.b],styles:[".temp-chart[_ngcontent-%COMP%]{height:300px}"],changeDetection:0}),e}(),data:{title:"Monitor",actions:["menu","bt","sync"]}}],ur=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(sr)],r.e]}),e}(),pr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,ur,Cn,Zc.a]]}),e}(),lr=n("Jho9"),br=n("bSwM"),dr=n("8yBR"),fr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,ln.b,pn.b,br.b,yc.f,dr.a]]}),e}(),mr=n("vxfF"),hr=n("SxV6");function gr(e,t){if(1&e){var n=i.Ub();i.Tb(0,"div"),i.Tb(1,"button",6),i.ac("click",function(){i.sc(n);var e=t.$implicit;return i.ec().onExpand(e)}),i.Ob(2,"mat-icon",7),i.Sb(),i.Tb(3,"mat-checkbox",8),i.ac("change",function(){i.sc(n);var e=t.$implicit;return i.ec().onSelect(e)}),i.Cc(4),i.Sb(),i.Sb()}if(2&e){var o=t.$implicit;i.Db("app-tree-padding-"+o.level),i.Fb("d-none",!o.visible),i.Bb(1),i.Fb("invisible",!o.expandable),i.Cb("aria-label","toggle "+o.title),i.Bb(1),i.kc("svgIcon",o.expanded?"chevron-down":"chevron-right"),i.Bb(1),i.kc("checked",o.selected)("indeterminate",null===o.selected),i.Bb(1),i.Ec(" ",o.title," ")}}var yr=function(){function e(e,t){var n=this;this.store=e,this.dialogRef=t,this.filter$=this.store.pipe(Object(p.h)(Gt)),this.store.pipe(Object(p.h)(Gt),Object(hr.a)()).subscribe(function(e){return n.initialFilter=e})}return e.prototype.onSelect=function(e){this.store.dispatch(new Lt(e))},e.prototype.onExpand=function(e){this.store.dispatch(new Ft(e))},e.prototype.onReset=function(){this.store.dispatch(new Mt)},e.prototype.onApply=function(){this.dialogRef.close()},e.prototype.onCancel=function(){var e=this;this.dialogRef.close(),setTimeout(function(){return e.store.dispatch(new Bt(e.initialFilter))})},e.prototype.trackBy=function(e){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(yc.g))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-log-filter"]],decls:12,vars:4,consts:[["mat-dialog-title",""],[1,"pb-2"],[3,"class","d-none",4,"ngFor","ngForOf","ngForTrackBy"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",3,"click"],["mat-button","",3,"click"],["mat-icon-button","",3,"click"],[1,"mat-icon-rtl-mirror",3,"svgIcon"],[1,"align-middle",3,"checked","indeterminate","change"]],template:function(e,t){1&e&&(i.Tb(0,"h1",0),i.Cc(1,"Log filter"),i.Sb(),i.Tb(2,"mat-dialog-content",1),i.Ac(3,gr,5,11,"div",2),i.fc(4,"async"),i.Sb(),i.Tb(5,"div",3),i.Tb(6,"button",4),i.ac("click",function(){return t.onCancel()}),i.Cc(7,"Cancel"),i.Sb(),i.Tb(8,"button",5),i.ac("click",function(){return t.onReset()}),i.Cc(9,"Reset"),i.Sb(),i.Tb(10,"button",5),i.ac("click",function(){return t.onApply()}),i.Cc(11,"Apply"),i.Sb(),i.Sb()),2&e&&(i.Bb(3),i.kc("ngForOf",i.gc(4,2,t.filter$))("ngForTrackBy",t.trackBy))},directives:[yc.h,yc.e,an.l,yc.c,pn.a,ln.a,br.a],pipes:[an.b],styles:["[_nghost-%COMP%]     .mat-checkbox-layout{margin-bottom:0}.app-tree-padding-0[_ngcontent-%COMP%]{padding-left:0}.app-tree-padding-1[_ngcontent-%COMP%]{padding-left:1em}.app-tree-padding-2[_ngcontent-%COMP%]{padding-left:2em}"],changeDetection:0}),e}();function Or(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",5),i.ac("click",function(){return i.sc(n),i.ec().onFilterReset()}),i.Ob(1,"mat-icon",6),i.Sb()}}function vr(e,t){if(1&e&&(i.Tb(0,"div"),i.Cc(1),i.fc(2,"date"),i.Ob(3,"mat-icon",7),i.Cc(4),i.Sb()),2&e){var n=t.$implicit;i.Bb(1),i.Ec(" ",i.hc(2,3,n.time,"HH:mm:ss")," "),i.Bb(2),i.kc("svgIcon",n.icon),i.Bb(1),i.Ec(" ",n.text," ")}}var Sr=[{path:"log",component:function(){function e(e,t,n){this.store=e,this.actions=t,this.dialog=n,this.destroy$=new An.a}return e.prototype.ngOnInit=function(){this.log$=this.store.pipe(Object(p.h)(Vt)),this.hasFilter$=this.store.pipe(Object(p.h)(Ht))},e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.onFilter=function(){var e=this;this.dialog.open(yr).afterClosed().subscribe(function(t){t&&e.store.dispatch(new Bt(t))})},e.prototype.onFilterReset=function(){this.store.dispatch(new Mt)},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(_n.a),i.Nb(yc.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-log"]],decls:9,vars:6,consts:[["mat-button","",1,"mt-1",3,"click"],["svgIcon","filter-outline",1,"align-middle"],["mat-icon-button","",3,"click",4,"ngIf"],["itemSize","24",1,"flex-fill"],[4,"cdkVirtualFor","cdkVirtualForOf"],["mat-icon-button","",3,"click"],["svgIcon","close-circle-outline"],[3,"svgIcon"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Tb(1,"button",0),i.ac("click",function(){return t.onFilter()}),i.Ob(2,"mat-icon",1),i.Cc(3," Filters... "),i.Sb(),i.Ac(4,Or,2,0,"button",2),i.fc(5,"async"),i.Sb(),i.Tb(6,"cdk-virtual-scroll-viewport",3),i.Ac(7,vr,5,6,"div",4),i.fc(8,"async"),i.Sb()),2&e&&(i.Bb(4),i.kc("ngIf",i.gc(5,2,t.hasFilter$)),i.Bb(3),i.kc("cdkVirtualForOf",i.gc(8,4,t.log$)))},directives:[pn.a,ln.a,an.m,mr.e,mr.a,mr.d],pipes:[an.b,an.e],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0}"],changeDetection:0}),e}(),data:{title:"Log",actions:["menu","bt","sync"]}}],Tr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(Sr)],r.e]}),e}(),Cr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Tr,Cn,ln.b,pn.b,mr.g,fr]]}),e}(),Er=n("XqQ8"),jr=n("P0+2"),Ar=function(){function e(){}return e.prototype.init=function(){return Object(u.b)(this,void 0,void 0,function(){var e;return Object(u.d)(this,function(t){switch(t.label){case 0:return e=this,[4,Object(jr.a)("grow-control-db4",1,{upgrade:function(e){e.createObjectStore("temp"),e.createObjectStore("flow"),e.createObjectStore("accessControlCamshot"),e.createObjectStore("accessControlEpisode")}})];case 1:return e.db=t.sent(),[2]}})})},e.prototype.logTemp=function(e){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(t){switch(t.label){case 0:return[4,this.db.put("temp",e,(new Date).toISOString())];case 1:return t.sent(),[2]}})})},e.prototype.getTemp=function(){return Object(u.b)(this,void 0,void 0,function(){var e;return Object(u.d)(this,function(t){switch(t.label){case 0:return e={},[4,this.db.getAllKeys("temp")];case 1:return e.xData=t.sent(),[4,this.db.getAll("temp")];case 2:return[2,(e.yData=t.sent(),e)]}})})},e.prototype.logFlow=function(e){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(t){switch(t.label){case 0:return[4,this.db.put("flow",e,(new Date).toISOString())];case 1:return t.sent(),[2]}})})},e.prototype.getFlow=function(){return Object(u.b)(this,void 0,void 0,function(){var e;return Object(u.d)(this,function(t){switch(t.label){case 0:return e={},[4,this.db.getAllKeys("flow")];case 1:return e.xData=t.sent(),[4,this.db.getAll("flow")];case 2:return[2,(e.yData=t.sent(),e)]}})})},e.prototype.logAccessControl=function(e,t){return Object(u.b)(this,void 0,void 0,function(){var n;return Object(u.d)(this,function(i){switch(i.label){case 0:return(n=this.db.transaction(["accessControlCamshot","accessControlEpisode"],"readwrite")).objectStore("accessControlEpisode").put({lastKey:t.key},e),n.objectStore("accessControlCamshot").put(t.value,t.key),[4,n.done];case 1:return i.sent(),[2]}})})},e.prototype.getAccessControlEpisode=function(){return Object(u.b)(this,void 0,void 0,function(){var e,t;return Object(u.d)(this,function(n){switch(n.label){case 0:return[4,this.db.getAllKeys("accessControlEpisode")];case 1:return e=n.sent(),[4,this.db.getAll("accessControlEpisode")];case 2:return t=n.sent(),[2,e.map(function(e,n){return{key:e,value:t[n]}}).sort(function(e,t){return t.key-e.key})]}})})},e.prototype.getAccessControlEpisodeKeys=function(e){return Object(u.b)(this,void 0,void 0,function(){var t,n,i;return Object(u.d)(this,function(o){switch(o.label){case 0:return t=IDBKeyRange.bound(e.key,e.value.lastKey),[4,this.db.transaction(["accessControlCamshot"],"readonly").objectStore("accessControlCamshot").openCursor(t)];case 1:n=o.sent(),i=[],o.label=2;case 2:return n?(i.push(n.key),[4,n.continue()]):[3,4];case 3:return n=o.sent(),[3,2];case 4:return[2,i]}})})},e.prototype.getAccessControlCamshot=function(e){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(t){switch(t.label){case 0:return[4,this.db.get("accessControlCamshot",e)];case 1:return[2,t.sent()]}})})},e.prototype.getAccessControlCamshotNext=function(e){return Object(u.b)(this,void 0,void 0,function(){var t,n;return Object(u.d)(this,function(i){switch(i.label){case 0:return t=IDBKeyRange.lowerBound(e,!0),[4,this.db.transaction(["accessControlCamshot"],"readonly").objectStore("accessControlCamshot").openCursor(t)];case 1:return[2,{key:(n=i.sent()).key,value:n.value}]}})})},e.prototype.getAccessControlCamshotPrev=function(e){return Object(u.b)(this,void 0,void 0,function(){var t,n;return Object(u.d)(this,function(i){switch(i.label){case 0:return t=IDBKeyRange.upperBound(e,!0),[4,this.db.transaction(["accessControlCamshot"],"readonly").objectStore("accessControlCamshot").openCursor(t)];case 1:return[2,{key:(n=i.sent()).key,value:n.value}]}})})},e.prototype.clear=function(e){return Object(u.b)(this,void 0,void 0,function(){var t=this;return Object(u.d)(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(e){return t.db.clear(e)}))];case 1:return n.sent(),[2]}})})},e.prototype.getTableSize=function(e){return Object(u.b)(this,void 0,void 0,function(){var t,n,i;return Object(u.d)(this,function(o){switch(o.label){case 0:return t=0,n=0,[4,this.db.transaction(e).store.openCursor()];case 1:i=o.sent(),o.label=2;case 2:return i?(t+=JSON.stringify(i.value).length,t+=JSON.stringify(i.key).length,n++,[4,i.continue()]):[3,4];case 3:return i=o.sent(),[3,2];case 4:return[2,{name:e,size:t,count:n}]}})})},e.prototype.getDatabaseSize=function(){return Object(u.b)(this,void 0,void 0,function(){var e,t,n,i=this;return Object(u.d)(this,function(o){switch(o.label){case 0:return e=Array.from(this.db.objectStoreNames),[4,Promise.all(e.map(function(e){return i.getTableSize(e)}))];case 1:return t=o.sent(),(n=t).push({name:"total",size:t.reduce(function(e,t){return e+t.size},0),count:t.reduce(function(e,t){return e+t.count},0)}),[2,n]}})})},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}(),wr=function(){function e(e,t,n,i){this.actions$=e,this.store=t,this.storage=n,this.db=i}return e.prototype.init=function(){var e=this;return this.actions$.pipe(Object(_n.d)(Fe.INIT)).pipe(Object($i.a)(function(){return Object(Mi.a)(Object(Bi.a)(new $e(e.storage.loadConfig())),e.store.pipe(Object(p.h)(Xe)).pipe(Object(Gi.a)(300)).pipe(Object(Hi.a)(function(t){return e.storage.saveConfig(t)})).pipe(Object(Vi.a)(function(){return Li.a})))}))},e.prototype.updateSize=function(){var e=this;return this.actions$.pipe(Object(_n.d)(Fe.UPDATE_DATABASE_SIZES)).pipe(Object(Er.a)(function(){return Object(Fi.a)(e.db.getDatabaseSize())})).pipe(Object(nt.a)(function(e){return new Ve(e)}))},e.prototype.clear=function(){var e=this;return this.actions$.pipe(Object(_n.d)(Fe.CLEAR_DATABASE),Object(Er.a)(function(t){return Object(Fi.a)(e.db.clear(t.payload)).pipe(Object(nt.a)(function(){return t.payload}))}),Object(Ki.a)(this.store.pipe(Object(p.h)(qe))),Object(nt.a)(function(e){var t=e[0];return new Ve(e[1].map(function(e){return t.includes(e.name)?{name:e.name,size:0,count:0}:e}))}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(_n.a),i.Xb(p.b),i.Xb(zi),i.Xb(Ar))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"init",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"updateSize",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"clear",null),e}(),Ir=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,p.d.forFeature("config",et),_n.c.forFeature([wr])]]}),e}(),Dr=function(){function e(){}return e.prototype.transform=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(t={})[Symbol.iterator]=function(){var t;return Object(u.d)(this,function(n){switch(n.label){case 0:t=0,n.label=1;case 1:return t<e?[4,t]:[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}})},t},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"times",type:e,pure:!0}),e}();function _r(e,t){if(1&e&&(i.Tb(0,"mat-radio-button",7),i.Cc(1),i.Sb()),2&e){var n=t.$implicit;i.kc("value",n),i.Bb(1),i.Ec(" ",n+1," ")}}var xr=function(){function e(e,t){this.dialogRef=e,this.data=t,this.count=t.count,this.index=0}return e.prototype.onCancel=function(){this.dialogRef.close()},e.prototype.onSelect=function(){this.dialogRef.close(this.index)},e.prototype.onChange=function(e){this.index=e},e.\u0275fac=function(t){return new(t||e)(i.Nb(yc.g),i.Nb(yc.a))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-select-index"]],inputs:{count:"count",index:"index"},decls:11,vars:5,consts:[["mat-dialog-title",""],[1,"pt-2"],[3,"value","change"],["class","mr-3",3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["cdkFocusInitial","","mat-button","",3,"click"],["mat-button","",3,"click"],[1,"mr-3",3,"value"]],template:function(e,t){1&e&&(i.Tb(0,"h1",0),i.Cc(1),i.Sb(),i.Tb(2,"mat-dialog-content",1),i.Tb(3,"mat-radio-group",2),i.ac("change",function(e){return t.onChange(e.value)}),i.Ac(4,_r,2,2,"mat-radio-button",3),i.fc(5,"times"),i.Sb(),i.Sb(),i.Tb(6,"div",4),i.Tb(7,"button",5),i.ac("click",function(){return t.onCancel()}),i.Cc(8,"Cancel"),i.Sb(),i.Tb(9,"button",6),i.ac("click",function(){return t.onSelect()}),i.Cc(10,"Select"),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.Dc(t.data.title||"Select index number"),i.Bb(2),i.kc("value",t.index),i.Bb(1),i.kc("ngForOf",i.gc(5,3,t.count)))},directives:[yc.h,yc.e,Hc.b,an.l,yc.c,pn.a,Hc.a],pipes:[Dr],styles:[".mat-dialog-content[_ngcontent-%COMP%]{min-height:4em}"],changeDetection:0}),e}(),kr=function(){function e(e){this.dialog=e}return e.prototype.select=function(e){return this.dialog.open(xr,{data:e}).afterClosed()},e.\u0275fac=function(t){return new(t||e)(i.Xb(yc.b))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),e}(),Rr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[kr],imports:[[an.c,yc.f,pn.b,Hc.c,Vc.b,En]]}),e}(),Nr=n("3E0/"),Pr=n("2Vo4"),Mr=function(){function e(e,t){this.store=e,this.actions=t,this.enableSubject=new Pr.a(!1)}return e.prototype.init=function(){var e=this;this.actions.pipe(Object(_n.d)(ct.REQUEST)).pipe(Object(Ki.a)(this.enableSubject.asObservable())).pipe(Object(tt.a)(function(e){return e[1]})).pipe(Object(nt.a)(function(e){return e[0].payload})).pipe(Object(Vi.a)(function(e){return e.type===It.getTemp?Object(Bi.a)(new pt({type:Dt.temp,payload:{value:50*Math.random()}})).pipe(Object(Nr.a)(1e3)):e.type===It.getStatus?Object(Bi.a)(new pt({type:Dt.status,payload:{state:_t.fertigate,cmdState:xt.irrigate,valve:0,flow:1200*Math.random(),volume:0,totalVolume:0,mix:0,doseId:0,valveId:0}})).pipe(Object(Nr.a)(1e3)):Li.a})).subscribe(function(t){e.store.dispatch(t)})},e.prototype.enable=function(e){this.enableSubject.next(e)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this.enableSubject.value},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(i.Xb(p.b),i.Xb(_n.a))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Br=function(){function e(){this.constraints={qvga:{width:{exact:320},height:{exact:240}},vga:{width:{exact:640},height:{exact:480}}},this.onInactive=function(){console.error("media loss")}}return e.prototype.start=function(e,t){return Object(u.b)(this,void 0,void 0,function(){var n,i,o,c;return Object(u.d)(this,function(r){switch(r.label){case 0:n=this.constraints[e],(i=document.getElementById(t))||((i=document.createElement("video")).width=n.width.exact,i.height=n.height.exact),this.video=i,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,navigator.mediaDevices.getUserMedia({video:n,audio:!1})];case 2:return o=r.sent(),i.srcObject=o,i.play(),this.video=i,this.stream=o,[4,new Promise(function(e){var t=function(){i.removeEventListener("canplay",t),e()};i.addEventListener("canplay",t,!1)})];case 3:return r.sent(),console.log("camera ready"),[3,5];case 4:return c=r.sent(),console.error("Camera Error: "+c.name+" "+c.message),[3,5];case 5:return[2]}})})},e.prototype.stop=function(){this.video&&(this.video.pause(),this.video.srcObject=null),this.stream&&this.stream.getVideoTracks()[0].stop()},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}(),Lr=new i.r("OpenCV config object token"),Fr=function(){function e(e,t){this.zone=t,this.cvState=new Pr.a({ready:!1,error:!1,loading:!0,state:"loading"}),e||(e={}),this.configModule=this.generateConfigModule(e),this.loadOpenCv()}return e.prototype.loadOpenCv=function(){var e=this;this.cvState.next(this.newState("loading")),window.Module=this.configModule;var t=document.createElement("script");t.setAttribute("async",""),t.setAttribute("type","text/javascript"),t.addEventListener("error",function(){var t=new Error("Failed to load "+e.configModule.scriptUrl);e.cvState.next(e.newState("error")),e.cvState.error(t)},{passive:!0}),t.src=this.configModule.scriptUrl;var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):document.head.appendChild(t)},e.prototype.newState=function(e){var t={ready:!1,loading:!1,error:!1,state:""};return Object.keys(t).forEach(function(n){"state"!==n&&(n===e?(t[n]=!0,t.state=n):t[n]=!1)}),t},e.prototype.generateConfigModule=function(e){var t=this;return{scriptUrl:e.openCVDirPath?e.openCVDirPath+"/opencv.js":"/assets/opencv/opencv.js",wasmBinaryFile:"opencv_js.wasm",usingWasm:!1,onRuntimeInitialized:function(){t.zone.run(function(){console.log("openCV Ready"),t.cvState.next(t.newState("ready"))})}}},e.\u0275fac=function(t){return new(t||e)(i.Xb(Lr),i.Xb(i.A))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Ur=function(){function e(){this.frameSubject=new An.a,this.frame$=this.frameSubject.asObservable()}return e.prototype.start=function(){this.frameDelta=new cv.Mat,this.M=cv.Mat.ones(5,5,cv.CV_8U),this.ksize=new cv.Size(3,3),this.anchor=new cv.Point(-1,-1),this.contours=new cv.MatVector,this.hierarchy=new cv.Mat},e.prototype.process=function(e,t){cv.absdiff(e,t,this.frameDelta),cv.threshold(this.frameDelta,this.frameDelta,25,255,cv.THRESH_BINARY),cv.erode(this.frameDelta,this.frameDelta,this.M,this.anchor,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue()),cv.dilate(this.frameDelta,this.frameDelta,this.M,this.anchor,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue()),cv.findContours(this.frameDelta,this.contours,this.hierarchy,cv.RETR_CCOMP,cv.CHAIN_APPROX_SIMPLE);for(var n=0;n<this.contours.size();n++)if(!(cv.contourArea(this.contours.get(n),!1)<500))return!0;return this.frameSubject.next(this.frameDelta),!1},e.prototype.preprocess=function(e,t){cv.cvtColor(e,t,cv.COLOR_RGBA2GRAY,0),cv.GaussianBlur(t,t,this.ksize,0,0,cv.BORDER_DEFAULT)},e.prototype.stop=function(){this.frameDelta.delete(),this.M.delete(),this.contours.delete(),this.hierarchy.delete()},e}(),$r=function(){function e(e,t){this.camera=e,this.openCv=t,this.strategy=new Ur,this.started=!1,this.frameSubject=new An.a,this.stateSubject=new Pr.a("idle"),this.frame$=this.frameSubject.asObservable(),this.state$=this.stateSubject.asObservable()}return e.prototype.start=function(e){return Object(u.b)(this,void 0,void 0,function(){var t;return Object(u.d)(this,function(n){switch(n.label){case 0:return this.started?[2]:(this.started=!0,this.stateSubject.next("start"),this.config=e,t=this.camera.constraints.vga,[4,this.camera.start("vga","videoInput")]);case 1:return n.sent(),this.openCv.cvState.value.ready?[3,3]:[4,this.openCv.cvState.pipe(Object(tt.a)(function(e){return e.ready}),Object(hr.a)()).toPromise()];case 2:n.sent(),n.label=3;case 3:return this.video=this.camera.video,this.capture=new cv.VideoCapture(this.video),this.source=new cv.Mat(t.height.exact,t.width.exact,cv.CV_8UC4),this.prevFrame=new cv.Mat,this.currentFrame=new cv.Mat,this.strategy.start(),this.getFrame(this.currentFrame),this.stateSubject.next("idle"),[2]}})})},e.prototype.stop=function(){return Object(u.b)(this,void 0,void 0,function(){return Object(u.d)(this,function(e){return this.started?(this.started=!1,this.stateSubject.next("stop"),this.source.delete(),this.prevFrame.delete(),this.currentFrame.delete(),this.strategy.stop(),this.camera.stop(),this.stateSubject.next("idle"),[2]):[2]})})},e.prototype.process=function(){return Object(u.b)(this,void 0,void 0,function(){var e;return Object(u.d)(this,function(t){this.stateSubject.next("process");try{if(!this.camera.stream)return[2,!1];if(this.prevFrame=(e=[this.currentFrame,this.prevFrame])[0],this.currentFrame=e[1],this.getFrame(this.currentFrame),this.strategy.process(this.prevFrame,this.currentFrame))return[2,!0]}catch(n){console.error(n)}finally{this.stateSubject.next("idle")}return[2,!1]})})},e.prototype.getImage=function(){var e=document.createElement("canvas");return e.width=640,e.height=480,cv.imshow(e,this.source),e.toDataURL("image/jpeg")},e.prototype.getFrame=function(e){this.capture.read(this.source),this.strategy.preprocess(this.source,e),this.frameSubject.next(this.source)},e.\u0275fac=function(t){return new(t||e)(i.Xb(Br),i.Xb(Fr))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Gr=function(){function e(e){this.accessControlService=e,this.destroy$=new An.a}return e.prototype.ngOnInit=function(){this.accessControlService.frame$.pipe(Object(xn.a)(this.destroy$)).subscribe(function(e){cv.imshow("canvasInput",e)}),this.accessControlService.strategy.frame$.pipe(Object(xn.a)(this.destroy$)).subscribe(function(e){cv.imshow("canvasOutput",e)})},e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.\u0275fac=function(t){return new(t||e)(i.Nb($r))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-dev-access-control"]],decls:4,vars:0,consts:[["id","canvasInput","width","640","height","480"],["id","canvasOutput","width","640","height","480"]],template:function(e,t){1&e&&(i.Tb(0,"p"),i.Cc(1,"access-control works!"),i.Sb(),i.Ob(2,"canvas",0),i.Ob(3,"canvas",1))},styles:[""]}),e}(),Hr=[{path:"dev",component:function(){function e(e,t,n,i,o){this.store=e,this.connectBt=t,this.selectIndexService=n,this.deviceSimulateService=i,this.serialService=o,this.destroy$=new An.a}return e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.requestStatus=function(){this.store.dispatch(new ut({type:It.getStatus,payload:{fake:0}}))},e.prototype.discover=function(){this.connectBt.discover({discover:!0})},e.prototype.compote=function(){this.store.dispatch(new ut({type:It.compote,payload:{programId:0}}))},e.prototype.mixer=function(){this.store.dispatch(new ut({type:It.mix,payload:{mixerId:0}}))},e.prototype.getProgram=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ut({type:It.getProgram,payload:{index:t}}))})},e.prototype.setProgram=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ut({type:It.setProgram,payload:{index:t,value:h()}}))})},e.prototype.getCompote=function(){var e=this;this.selectIndexService.select({count:2,title:"Select compote"}).pipe(Object(Ki.a)(this.selectIndexService.select({count:14,title:"Select compote daily"}))).subscribe(function(t){var n=t[0],i=t[1];void 0!==n&&void 0!==i&&e.store.dispatch(new ut({type:It.getCompoteDaily,payload:{index:n,dailyIndex:i}}))})},e.prototype.setCompote=function(){var e=this;this.selectIndexService.select({count:2,title:"Select compote"}).pipe(Object(Ki.a)(this.selectIndexService.select({count:14,title:"Select compote daily"}))).subscribe(function(t){var n=t[0],i=t[1];void 0!==n&&void 0!==i&&e.store.dispatch(new ut({type:It.setCompoteDaily,payload:{index:n,dailyIndex:i,value:g()}}))})},e.prototype.getTimer=function(){var e=this;this.selectIndexService.select({count:8,title:"Select timer"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ut({type:It.getTimer,payload:{index:t}}))})},e.prototype.setTimer=function(){var e=this;this.selectIndexService.select({count:8,title:"Select timer"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ut({type:It.setTimer,payload:{index:t,value:{enable:0,program:0,weekDays:0,time:{hour:0,minute:0,second:0}}}}))})},e.prototype.getSchedule=function(){var e=this;this.selectIndexService.select({count:4,title:"Select schedule"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ut({type:It.getSchedule,payload:{index:t}}))})},e.prototype.setSchedule=function(){var e=this;this.selectIndexService.select({count:4,title:"Select schedule"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ut({type:It.setSchedule,payload:{index:t,value:{enable:0,deviceId:0,startTime:{hour:0,minute:0,second:0},endTime:{hour:0,minute:0,second:0}}}}))})},e.prototype.simulate=function(){this.deviceSimulateService.enable(!this.deviceSimulateService.enabled)},e.prototype.serialDiscover=function(){this.serialService.discover()},e.prototype.serialConnect=function(){this.serialService.connect(null)},e.prototype.syncSettings=function(){this.store.dispatch(new be)},e.prototype.resetError=function(){this.store.dispatch(new ut({type:It.resetError,payload:{fake:0}}))},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb($c),i.Nb(kr),i.Nb(Mr),i.Nb(Gc))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-dev"]],decls:35,vars:0,consts:[["mat-button","",3,"click"]],template:function(e,t){1&e&&(i.Tb(0,"button",0),i.ac("click",function(){return t.discover()}),i.Cc(1,"Discover"),i.Sb(),i.Tb(2,"button",0),i.ac("click",function(){return t.requestStatus()}),i.Cc(3,"Status"),i.Sb(),i.Tb(4,"button",0),i.ac("click",function(){return t.compote()}),i.Cc(5,"Compote"),i.Sb(),i.Tb(6,"button",0),i.ac("click",function(){return t.mixer()}),i.Cc(7,"Mixer"),i.Sb(),i.Tb(8,"button",0),i.ac("click",function(){return t.getProgram()}),i.Cc(9,"getProgram"),i.Sb(),i.Tb(10,"button",0),i.ac("click",function(){return t.setProgram()}),i.Cc(11,"setProgram"),i.Sb(),i.Tb(12,"button",0),i.ac("click",function(){return t.getCompote()}),i.Cc(13,"getCompote"),i.Sb(),i.Tb(14,"button",0),i.ac("click",function(){return t.setCompote()}),i.Cc(15,"setCompote"),i.Sb(),i.Tb(16,"button",0),i.ac("click",function(){return t.getTimer()}),i.Cc(17,"getTimer"),i.Sb(),i.Tb(18,"button",0),i.ac("click",function(){return t.setTimer()}),i.Cc(19,"setTimer"),i.Sb(),i.Tb(20,"button",0),i.ac("click",function(){return t.getSchedule()}),i.Cc(21,"getSchedule"),i.Sb(),i.Tb(22,"button",0),i.ac("click",function(){return t.setSchedule()}),i.Cc(23,"setSchedule"),i.Sb(),i.Tb(24,"button",0),i.ac("click",function(){return t.simulate()}),i.Cc(25,"simulate"),i.Sb(),i.Tb(26,"button",0),i.ac("click",function(){return t.serialDiscover()}),i.Cc(27,"serial discover"),i.Sb(),i.Tb(28,"button",0),i.ac("click",function(){return t.serialConnect()}),i.Cc(29,"serial connect"),i.Sb(),i.Tb(30,"button",0),i.ac("click",function(){return t.syncSettings()}),i.Cc(31,"sync"),i.Sb(),i.Tb(32,"button",0),i.ac("click",function(){return t.resetError()}),i.Cc(33,"Reset error"),i.Sb(),i.Ob(34,"app-dev-access-control"))},directives:[Gr],styles:[".mat-list-item[_ngcontent-%COMP%]{height:auto}"],changeDetection:0}),e}(),data:{title:"Development",actions:["menu","bt","sync"]}}],Vr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(Hr)],r.e]}),e}(),Kr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[Fr,{provide:Lr,useValue:{}}],imports:[[an.c]]}),e}(),Wr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[Br]}),e}(),Yr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[$r],imports:[[an.c,Kr,Wr]]}),e}(),Xr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Yr]]}),e}(),zr=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:Object(u.f)([],[{provide:i.d,useFactory:function(e){return function(){return e.init()}},deps:[Mr],multi:!0}]),imports:[[an.c,Vr,Cn,Rr,un.c,ln.b,Xr]]}),e}(),qr=n("JIr8"),Jr=n("bOdf"),Qr=n("4A3s"),Zr=function(){function e(e,t,n){this.actions$=e,this.store=t,this.connectBt=n}return e.prototype.connect=function(){var e=this;return this.actions$.pipe(Object(_n.d)(ct.CONNECT)).pipe(Object(Ki.a)(this.store.pipe(Object(p.h)(ze)))).pipe(Object($i.a)(function(t){var n=t[1];return n?Object(Fi.a)(e.connectBt.connect(n)):Object(Fi.a)(e.connectBt.discover()).pipe(Object($i.a)(function(t){return Object(Fi.a)(e.connectBt.connect(t[0]))}))})).pipe(Object(Vi.a)(function(){return Object(Bi.a)(new st(ot.CONNECTED))})).pipe(Object(qr.a)(function(e){return Object(Bi.a)(new lt(e))}))},e.prototype.disconnect=function(){var e=this;return this.actions$.pipe(Object(_n.d)(ct.DISCONNECT)).pipe(Object($i.a)(function(){return Object(Fi.a)(e.connectBt.disconnect()).pipe(Object(Vi.a)(function(){return Object(Bi.a)(new st(ot.DISCONNECTED))}))})).pipe(Object(qr.a)(function(e){return Object(Bi.a)(new lt(e))}))},e.prototype.request=function(){var e=this;return this.actions$.pipe(Object(_n.d)(ct.REQUEST)).pipe(Object(Ki.a)(this.store.select(dt))).pipe(Object(tt.a)(function(e){var t=e[1];return t===ot.CONNECTED||t===ot.TRANSFER})).pipe(Object(Jr.a)(function(t){var n=t[0];return Object(Mi.a)(Object(Bi.a)(new st(ot.TRANSFER)),Object(Fi.a)(e.connectBt.send(n.payload)).pipe(Object(Qr.a)()),Object(Bi.a)(new st(ot.CONNECTED)))})).pipe(Object(qr.a)(function(e){return Object(Bi.a)(new lt(e))}))},e.prototype.response=function(){return this.connectBt.response$.pipe(Object(nt.a)(function(e){return new pt(e)}))},e.prototype.responseProcess=function(){return this.actions$.pipe(Object(_n.d)(ct.RESPONSE)).pipe(Object($i.a)(function(e){var t=e.payload;switch(t.type){case Dt.pump:return Object(Bi.a)(new V({index:t.payload.index,value:t.payload.value}));case Dt.mixer:return Object(Bi.a)(new re({index:t.payload.index,value:t.payload.value}));case Dt.dose:return Object(Bi.a)(new X({index:t.payload.index,value:t.payload.value}));case Dt.program:return Object(Bi.a)(new U({index:t.payload.index,value:t.payload.value}));case Dt.timer:return Object(Bi.a)(new Q({index:t.payload.index,value:t.payload.value}));case Dt.schedule:return Object(Bi.a)(new ne({index:t.payload.index,value:t.payload.value}));case Dt.compoteDaily:return Object(Bi.a)(new M({index:t.payload.index,dailyIndex:t.payload.dailyIndex,value:t.payload.value}));case Dt.pin:return Object(Bi.a)(new pe({type:t.payload.type,index:t.payload.index,value:t.payload.value}))}return Li.a}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(_n.a),i.Xb(p.b),i.Xb($c))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"connect",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"disconnect",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"request",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"response",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"responseProcess",null),e}(),ea=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,p.d.forFeature("connect",ft),_n.c.forFeature([Zr])]]}),e}(),ta=n("VRyK"),na=n("PqYM"),ia=function(){function e(e,t,n){this.actions$=e,this.store=t,this.db=n}return e.prototype.init=function(){var e=this;return this.actions$.pipe(Object(_n.d)(mt.INIT)).pipe(Object($i.a)(function(){return e.store.pipe(Object(p.h)(Qe))})).pipe(Object($i.a)(function(t){return Object(ta.a)(t.time.enable?Object(na.a)(0,t.time.interval).pipe(Object($i.a)(function(){return e.getTime()})):Li.a,t.temp.enable?Object(na.a)(0,t.temp.interval).pipe(Object($i.a)(function(){return e.getTemp()})):Li.a,t.status.enable?Object(na.a)(0,t.status.interval).pipe(Object($i.a)(function(){return e.getStatus()})):Li.a)}))},e.prototype.updateTemp=function(){var e=this;return this.actions$.pipe(Object(_n.d)(mt.UPDATE_TEMP)).pipe(Object(Vi.a)(function(t){return Object(Fi.a)(e.db.logTemp(t.payload))}))},e.prototype.updateStatus=function(){var e=this;return this.actions$.pipe(Object(_n.d)(mt.UPDATE_STATUS)).pipe(Object(tt.a)(function(e){return e.payload.state===_t.fertigate&&e.payload.cmdState===xt.irrigate})).pipe(Object(Vi.a)(function(t){return Object(Fi.a)(e.db.logFlow(t.payload.flow))}))},e.prototype.syncTime=function(){return this.actions$.pipe(Object(_n.d)(mt.SYNC_TIME)).pipe(Object(nt.a)(function(e){return new ut({type:It.setTime,payload:Object(u.a)({},(t=new Date,{minute:t.getMinutes(),second:t.getSeconds(),hour:t.getHours(),wday:t.getDay(),day:t.getDate(),month:t.getMonth(),year:t.getFullYear()-1970}))});var t}))},e.prototype.getTime=function(){return Object(Mi.a)(Object(Bi.a)(new ut({type:It.getTime,payload:{fake:0}})),this.actions$.pipe(Object(_n.d)(ct.RESPONSE)).pipe(Object(tt.a)(function(e){return e.payload.type===Dt.time})).pipe(Object(it.a)(1)).pipe(Object(nt.a)(function(e){return new gt(e.payload.payload)})))},e.prototype.getTemp=function(){return Object(Mi.a)(Object(Bi.a)(new ut({type:It.getTemp,payload:{fake:0}})),this.actions$.pipe(Object(_n.d)(ct.RESPONSE)).pipe(Object(tt.a)(function(e){return e.payload.type===Dt.temp})).pipe(Object(it.a)(1)).pipe(Object(nt.a)(function(e){return new yt(e.payload.payload.value)})))},e.prototype.getStatus=function(){return Object(Mi.a)(Object(Bi.a)(new ut({type:It.getStatus,payload:{fake:0}})),this.actions$.pipe(Object(_n.d)(ct.RESPONSE)).pipe(Object(tt.a)(function(e){return e.payload.type===Dt.status})).pipe(Object(it.a)(1)).pipe(Object(nt.a)(function(e){return new Ot(e.payload.payload)})))},e.\u0275fac=function(t){return new(t||e)(i.Xb(_n.a),i.Xb(p.b),i.Xb(Ar))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"init",null),Object(u.c)([Object(_n.b)({dispatch:!1}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"updateTemp",null),Object(u.c)([Object(_n.b)({dispatch:!1}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"updateStatus",null),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"syncTime",null),e}(),oa=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,p.d.forFeature("dashboard",wt),_n.c.forFeature([ia])]]}),e}(),ca=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[zi,Ar,{provide:i.d,useFactory:function(e){return function(){return e.init()}},deps:[Ar],multi:!0}],imports:[[an.c]]}),e}(),ra=function(){function e(e,t,n){this.actions$=e,this.store=t,this.db=n}return e.prototype.init=function(){var e=this;return this.actions$.pipe(Object(_n.d)(er.INIT)).pipe(Object($i.a)(function(){return Object(ta.a)(Object(Fi.a)(e.db.getTemp()).pipe(Object(nt.a)(function(e){return new nr(e)})),Object(Fi.a)(e.db.getFlow()).pipe(Object(nt.a)(function(e){return new ir(e)})))}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(_n.a),i.Xb(p.b),i.Xb(Ar))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"init",null),e}(),aa=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,p.d.forFeature("monitor",ar),_n.c.forFeature([ra])]]}),e}(),sa=function(){function e(e,t){this.dialog=e,this.connectService=t}return e.prototype.select=function(){return Object(Fi.a)(this.connectService.discover()).pipe(Object(nt.a)(function(e){return e[0]}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(yc.b),i.Xb(xc))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),ua=n("f0Cb"),pa=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[sa],imports:[[an.c,yc.f,un.c,pn.b,Vc.b,ua.a]]}),e}(),la=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,ln.b,Ai.d,wi.c,Zi.b]]}),e}(),ba=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,la]]}),e}(),da=n("0EQZ"),fa=function(){function e(){}return e.prototype.transform=function(e){var t=1024;if(Math.abs(e)<t)return e+" B";var n=["KB","MB","GB","TB","PB","EB","ZB","YB"],i=-1;do{e/=t,++i}while(Math.abs(e)>=t&&i<n.length-1);return e.toFixed(1)+" "+n[i]},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"memory",type:e,pure:!0}),e}();function ma(e,t){1&e&&(i.Tb(0,"div"),i.Ob(1,"mat-progress-spinner",4),i.Sb())}function ha(e,t){if(1&e){var n=i.Ub();i.Tb(0,"div"),i.Tb(1,"mat-checkbox",6),i.ac("change",function(){i.sc(n);var e=t.$implicit;return i.ec(2).selection.toggle(e.name)}),i.Sb(),i.Cc(2),i.fc(3,"memory"),i.Sb()}if(2&e){var o=t.$implicit,c=i.ec(2);i.Bb(1),i.kc("checked",c.selection.isSelected(o.name)),i.Bb(1),i.Gc(" ",o.name," - ",i.gc(3,4,o.size)," of ",o.count," records ")}}function ga(e,t){if(1&e&&i.Ac(0,ha,4,6,"div",5),2&e){var n=i.ec();i.kc("ngForOf",n.sizes)}}var ya=function(){function e(){this.updateSizes=new i.n,this.clear=new i.n,this.selection=new da.c(!0)}return e.prototype.onClear=function(){this.clear.emit(this.selection.selected),this.selection.clear()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-database-config"]],inputs:{sizes:"sizes",update:"update"},outputs:{updateSizes:"updateSizes",clear:"clear"},decls:8,vars:2,consts:[[4,"ngIf","ngIfElse"],[1,"mt-2"],["mat-button","",3,"click"],["databaseSizes",""],["mode","indeterminate","diameter","58"],[4,"ngFor","ngForOf"],[3,"checked","change"]],template:function(e,t){if(1&e&&(i.Ac(0,ma,2,0,"div",0),i.Tb(1,"div",1),i.Tb(2,"button",2),i.ac("click",function(){return t.updateSizes.emit()}),i.Cc(3,"Update database"),i.Sb(),i.Tb(4,"button",2),i.ac("click",function(){return t.onClear()}),i.Cc(5,"Clear database"),i.Sb(),i.Sb(),i.Ac(6,ga,1,1,"ng-template",null,3,i.Bc)),2&e){var n=i.qc(7);i.kc("ngIf",t.update)("ngIfElse",n)}},directives:[an.m,pn.a,Vc.a,an.l,br.a],pipes:[fa],styles:[""],changeDetection:0}),e}(),Oa=function(){function e(){this.configChange=new i.n}return e.prototype.onChange=function(e){this.configChange.emit(Object(u.a)(Object(u.a)({},this.config),e))},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-device-monitor"]],inputs:{config:"config"},outputs:{configChange:"configChange"},decls:4,vars:2,consts:[[1,"col-12",3,"checked","change"],["matInput","","type","number","placeholder","Interval",3,"value","input"]],template:function(e,t){1&e&&(i.Tb(0,"mat-slide-toggle",0),i.ac("change",function(e){return t.onChange({enable:e.checked})}),i.Cc(1," Enable\n"),i.Sb(),i.Tb(2,"mat-form-field"),i.Tb(3,"input",1),i.ac("input",function(e){return t.onChange({interval:+e.target.value})}),i.Sb(),i.Sb()),2&e&&(i.kc("checked",t.config.enable),i.Bb(3),i.kc("value",t.config.interval))},directives:[Zi.a,Ai.b,wi.b],styles:[""],changeDetection:0}),e}(),va=function(){function e(){this.configChange=new i.n}return e.prototype.onChange=function(e){this.configChange.emit(Object(u.a)(Object(u.a)({},this.config),e))},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-monitor-config"]],inputs:{config:"config"},outputs:{configChange:"configChange"},decls:9,vars:3,consts:[[3,"config","configChange"]],template:function(e,t){1&e&&(i.Tb(0,"div"),i.Cc(1," Time "),i.Tb(2,"app-device-monitor",0),i.ac("configChange",function(e){return t.onChange({time:e})}),i.Sb(),i.Sb(),i.Tb(3,"div"),i.Cc(4," Temp "),i.Tb(5,"app-device-monitor",0),i.ac("configChange",function(e){return t.onChange({temp:e})}),i.Sb(),i.Sb(),i.Tb(6,"div"),i.Cc(7," Status "),i.Tb(8,"app-device-monitor",0),i.ac("configChange",function(e){return t.onChange({status:e})}),i.Sb(),i.Sb()),2&e&&(i.Bb(2),i.kc("config",t.config.time),i.Bb(3),i.kc("config",t.config.temp),i.Bb(3),i.kc("config",t.config.status))},directives:[Oa],styles:[""],changeDetection:0}),e}(),Sa=function(){function e(){this.accessControlChange=new i.n}return e.prototype.onChange=function(e){this.accessControlChange.emit(Object(u.a)(Object(u.a)({},this.accessControl),e))},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-access-control-config"]],inputs:{accessControl:"accessControl"},outputs:{accessControlChange:"accessControlChange"},decls:2,vars:1,consts:[[1,"col-12",3,"checked","change"]],template:function(e,t){1&e&&(i.Tb(0,"mat-slide-toggle",0),i.ac("change",function(e){return t.onChange({enable:e.checked})}),i.Cc(1," Enable\n"),i.Sb()),2&e&&i.kc("checked",t.accessControl.enable)},directives:[Zi.a],styles:[""]}),e}();function Ta(e,t){if(1&e){var n=i.Ub();i.Tb(0,"mat-accordion"),i.Tb(1,"mat-expansion-panel"),i.Tb(2,"mat-expansion-panel-header"),i.Tb(3,"mat-panel-title"),i.Ob(4,"mat-icon",1),i.Cc(5," \xa0Bluetooth "),i.Sb(),i.Tb(6,"mat-panel-description"),i.Cc(7),i.Sb(),i.Sb(),i.Tb(8,"button",2),i.ac("click",function(){return i.sc(n),i.ec().selectDevice()}),i.Cc(9,"Select Device"),i.Sb(),i.Sb(),i.Tb(10,"mat-expansion-panel"),i.Tb(11,"mat-expansion-panel-header"),i.Tb(12,"mat-panel-title"),i.Ob(13,"mat-icon",3),i.Cc(14," \xa0Database "),i.Sb(),i.Sb(),i.Tb(15,"app-database-config",4),i.ac("clear",function(e){return i.sc(n),i.ec().clearDb(e)})("updateSizes",function(){return i.sc(n),i.ec().updateDb()}),i.fc(16,"async"),i.fc(17,"async"),i.Sb(),i.Sb(),i.Tb(18,"mat-expansion-panel"),i.Tb(19,"mat-expansion-panel-header"),i.Tb(20,"mat-panel-title"),i.Ob(21,"mat-icon",5),i.Cc(22," \xa0Monitor "),i.Sb(),i.Sb(),i.Tb(23,"app-monitor-config",6),i.ac("configChange",function(e){return i.sc(n),i.ec().onChange({monitor:e})}),i.fc(24,"async"),i.Sb(),i.Sb(),i.Tb(25,"mat-expansion-panel"),i.Tb(26,"mat-expansion-panel-header"),i.Tb(27,"mat-panel-title"),i.Ob(28,"mat-icon",7),i.Cc(29," \xa0Access control "),i.Sb(),i.Sb(),i.Tb(30,"app-access-control-config",8),i.ac("accessControlChange",function(e){return i.sc(n),i.ec().onChange({accessControl:e})}),i.fc(31,"async"),i.Sb(),i.Sb(),i.Sb()}if(2&e){var o=t.ngIf,c=i.ec();i.Bb(7),i.Ec(" ",null==o.device?null:o.device.name," "),i.Bb(8),i.kc("sizes",i.gc(16,5,c.databaseSizes$))("update",i.gc(17,7,c.updateDatabaseSizes$)),i.Bb(8),i.kc("config",i.gc(24,9,c.monitor$)),i.Bb(7),i.kc("accessControl",i.gc(31,11,c.accessControl$))}}var Ca=[{path:"config",component:function(){function e(e,t){this.store=e,this.connectService=t}return e.prototype.ngOnInit=function(){this.config$=this.store.pipe(Object(p.h)(Xe)),this.updateDatabaseSizes$=this.store.pipe(Object(p.h)(Je)),this.databaseSizes$=this.store.pipe(Object(p.h)(qe)),this.monitor$=this.store.pipe(Object(p.h)(Qe)),this.accessControl$=this.store.pipe(Object(p.h)(Ze)),this.store.dispatch(new Ge)},e.prototype.selectDevice=function(){var e=this;Object(Fi.a)(this.connectService.discover()).subscribe(function(t){(null==t?void 0:t.length)&&e.store.dispatch(new He(t[0]))})},e.prototype.updateDb=function(){this.store.dispatch(new Ge)},e.prototype.clearDb=function(e){this.store.dispatch(new We(e))},e.prototype.onChange=function(e){this.store.dispatch(new Ke(e))},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(xc))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-config"]],decls:2,vars:3,consts:[[4,"ngIf"],["svgIcon","bluetooth"],["mat-button","",3,"click"],["svgIcon","database"],[3,"sizes","update","clear","updateSizes"],["svgIcon","monitor"],[3,"config","configChange"],["svgIcon","webcam"],[3,"accessControl","accessControlChange"]],template:function(e,t){1&e&&(i.Ac(0,Ta,32,13,"mat-accordion",0),i.fc(1,"async")),2&e&&i.kc("ngIf",i.gc(1,1,t.config$))},directives:[an.m,Di.a,Di.c,Di.f,Di.g,ln.a,Di.e,pn.a,ya,va,Sa],pipes:[an.b],styles:[""],changeDetection:0}),e}(),data:{title:"Config",actions:["back","sync"]}}],Ea=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(Ca)],r.e]}),e}(),ja=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Zi.b]]}),e}(),Aa=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,En,br.b,Vc.b,pn.b]]}),e}(),wa=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ea,Di.b,pn.b,ln.b,Vc.b,pa,En,ba,ja,Aa]]}),e}(),Ia=function(){function e(e,t){this.actions$=e,this.store=t}return e.prototype.init=function(){var e=this;return this.actions$.pipe(Object(_n.d)(Rt.INIT)).pipe(Object($i.a)(function(){return Object(ta.a)(e.actions$.pipe(Object(_n.d)(ct.CONNECT)).pipe(Object(nt.a)(function(e){return{time:new Date,icon:"bluetooth",text:"bluetooth connect",type:Ut.connect}})),e.actions$.pipe(Object(_n.d)(ct.DISCONNECT)).pipe(Object(nt.a)(function(e){return{time:new Date,icon:"bluetooth-off",text:"bluetooth disconnect",type:Ut.disconnect}})),e.actions$.pipe(Object(_n.d)(ct.REQUEST)).pipe(Object(nt.a)(function(e){return{time:new Date,icon:"chevron-right",text:(t=e.payload,It[t.type]+" "+JSON.stringify(t.payload)),type:Ut.request,subType:e.payload.type};var t})),e.actions$.pipe(Object(_n.d)(ct.RESPONSE)).pipe(Object(nt.a)(function(e){return{time:new Date,icon:"chevron-left",text:(t=e.payload,Dt[t.type]+" "+JSON.stringify(t)),type:Ut.response,subType:e.payload.type};var t})),e.actions$.pipe(Object(_n.d)(ct.ERROR)).pipe(Object(nt.a)(function(e){return{time:new Date,icon:"alert-circle-outline",text:"connect error",type:Ut.error}}))).pipe(Object(nt.a)(function(e){return new Pt(e)}))}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(_n.a),i.Xb(p.b))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"init",null),e}(),Da=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,p.d.forFeature("log",Kt),_n.c.forFeature([Ia])]]}),e}(),_a=n("xHqg"),xa=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Sc.g,Sc.o,_a.d,pn.b,ln.b,wi.c,Ai.d]]}),e}(),ka=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Sc.g,Sc.o,_a.d,pn.b,ln.b,wi.c,Ai.d]]}),e}();function Ra(e,t){if(1&e&&i.Ob(0,"mat-icon",3),2&e){var n=i.ec().$implicit;i.kc("svgIcon",n.icon)}}function Na(e,t){if(1&e&&(i.Tb(0,"a",1),i.Ac(1,Ra,1,1,"mat-icon",2),i.Cc(2),i.Sb()),2&e){var n=t.$implicit;i.kc("routerLink",n.route),i.Bb(1),i.kc("ngIf",n.icon),i.Bb(1),i.Ec(" \xa0 ",n.title," ")}}var Pa=function(){function e(){this.links=Object(u.f)(new Array(2).fill(0).map(function(e,t){return{route:["/","calibrate","pump",""+t],title:"Pump "+b[t],icon:t===b.in?"water-pump":"fountain"}}),new Array(4).fill(0).map(function(e,t){return{route:["/","calibrate","dose",""+t],title:"Dose "+(t+1),icon:"eyedropper"}}))}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-calibrate"]],decls:2,vars:1,consts:[["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(e,t){1&e&&(i.Tb(0,"mat-nav-list"),i.Ac(1,Na,3,3,"a",0),i.Sb()),2&e&&(i.Bb(1),i.kc("ngForOf",t.links))},directives:[un.d,an.l,un.b,r.d,an.m,ln.a],styles:[""],changeDetection:0}),e}(),Ma=n("B/XX");function Ba(e,t){1&e&&i.Cc(0,"Pump In Flow sensor")}function La(e,t){1&e&&i.Cc(0,"Pumping")}function Fa(e,t){1&e&&i.Cc(0,"Save")}function Ua(e,t){1&e&&i.Cc(0,"Done")}function $a(e,t){1&e&&i.Ob(0,"mat-icon",11)}function Ga(e,t){1&e&&i.Ob(0,"mat-icon",12)}function Ha(e,t){1&e&&i.Cc(0,"Dose rate")}function Va(e,t){1&e&&i.Cc(0,"Pumping")}function Ka(e,t){1&e&&i.Cc(0,"Save")}function Wa(e,t){1&e&&i.Cc(0,"Done")}function Ya(e,t){1&e&&i.Ob(0,"mat-icon",11)}function Xa(e,t){1&e&&i.Ob(0,"mat-icon",12)}var za=[{path:"calibrate",children:[{path:"",component:Pa,pathMatch:"full",data:{title:"Calibrate",actions:["menu","bt","sync"]}},{path:"pump/:id",component:function(){function e(e){this.formBuilder=e}return e.prototype.ngOnInit=function(){this.firstFormGroup=this.formBuilder.group({firstCtrl:[""]}),this.secondFormGroup=this.formBuilder.group({secondCtrl:[""]})},e.\u0275fac=function(t){return new(t||e)(i.Nb(Sc.d))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-calibrate-flow-sensor"]],features:[i.Ab([{provide:Ma.h,useValue:{displayDefaultIndicatorType:!1}}])],decls:34,vars:9,consts:[[3,"linear"],["stepper",""],[3,"stepControl","editable"],[3,"formGroup"],["matStepLabel",""],["matInput","","placeholder","Volume (mL)","formControlName","firstCtrl"],["mat-button","","matStepperNext",""],["mat-button","",3,"click"],[3,"editable"],["matStepperIcon","edit"],["matStepperIcon","done"],["svgIcon","pencil"],["svgIcon","check"]],template:function(e,t){if(1&e){var n=i.Ub();i.Tb(0,"mat-vertical-stepper",0,1),i.Tb(2,"mat-step",2),i.Tb(3,"form",3),i.Ac(4,Ba,1,0,"ng-template",4),i.Tb(5,"mat-form-field"),i.Ob(6,"input",5),i.Sb(),i.Tb(7,"div"),i.Tb(8,"button",6),i.Cc(9,"Start"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(10,"mat-step",2),i.Tb(11,"form",3),i.Ac(12,La,1,0,"ng-template",4),i.Tb(13,"div"),i.Tb(14,"button",7),i.ac("click",function(){return i.sc(n),i.qc(1).reset()}),i.Cc(15,"Cancel"),i.Sb(),i.Tb(16,"button",6),i.Cc(17,"Stop"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(18,"mat-step",8),i.Ac(19,Fa,1,0,"ng-template",4),i.Cc(20," You are going to save new rate value. "),i.Tb(21,"div"),i.Tb(22,"button",7),i.ac("click",function(){return i.sc(n),i.qc(1).reset()}),i.Cc(23,"Cancel"),i.Sb(),i.Tb(24,"button",6),i.Cc(25,"Save"),i.Sb(),i.Sb(),i.Sb(),i.Tb(26,"mat-step",8),i.Ac(27,Ua,1,0,"ng-template",4),i.Cc(28," You are done. "),i.Tb(29,"div"),i.Tb(30,"button",7),i.ac("click",function(){return i.sc(n),i.qc(1).reset()}),i.Cc(31,"Repeat"),i.Sb(),i.Sb(),i.Sb(),i.Ac(32,$a,1,0,"ng-template",9),i.Ac(33,Ga,1,0,"ng-template",10),i.Sb()}2&e&&(i.kc("linear",!0),i.Bb(2),i.kc("stepControl",t.firstFormGroup)("editable",!1),i.Bb(1),i.kc("formGroup",t.firstFormGroup),i.Bb(7),i.kc("stepControl",t.secondFormGroup)("editable",!1),i.Bb(1),i.kc("formGroup",t.secondFormGroup),i.Bb(7),i.kc("editable",!1),i.Bb(8),i.kc("editable",!1))},directives:[_a.f,_a.a,Sc.q,Sc.l,Sc.f,_a.b,Ai.b,wi.b,Sc.c,Sc.k,Sc.e,pn.a,_a.e,_a.c,ln.a],styles:[""],changeDetection:0}),e}(),data:{title:"Calibrate flow sensor",actions:["back","sync"]}},{path:"dose/:id",component:function(){function e(e){this.formBuilder=e}return e.prototype.ngOnInit=function(){this.firstFormGroup=this.formBuilder.group({firstCtrl:[""]}),this.secondFormGroup=this.formBuilder.group({secondCtrl:[""]})},e.\u0275fac=function(t){return new(t||e)(i.Nb(Sc.d))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-calibrate-dose"]],features:[i.Ab([{provide:Ma.h,useValue:{displayDefaultIndicatorType:!1}}])],decls:34,vars:9,consts:[[3,"linear"],["stepper",""],[3,"stepControl","editable"],[3,"formGroup"],["matStepLabel",""],["matInput","","placeholder","Volume (mL)","formControlName","firstCtrl"],["mat-button","","matStepperNext",""],["mat-button","",3,"click"],[3,"editable"],["matStepperIcon","edit"],["matStepperIcon","done"],["svgIcon","pencil"],["svgIcon","check"]],template:function(e,t){if(1&e){var n=i.Ub();i.Tb(0,"mat-vertical-stepper",0,1),i.Tb(2,"mat-step",2),i.Tb(3,"form",3),i.Ac(4,Ha,1,0,"ng-template",4),i.Tb(5,"mat-form-field"),i.Ob(6,"input",5),i.Sb(),i.Tb(7,"div"),i.Tb(8,"button",6),i.Cc(9,"Start"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(10,"mat-step",2),i.Tb(11,"form",3),i.Ac(12,Va,1,0,"ng-template",4),i.Tb(13,"div"),i.Tb(14,"button",7),i.ac("click",function(){return i.sc(n),i.qc(1).reset()}),i.Cc(15,"Cancel"),i.Sb(),i.Tb(16,"button",6),i.Cc(17,"Stop"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(18,"mat-step",8),i.Ac(19,Ka,1,0,"ng-template",4),i.Cc(20," You are going to save new rate value. "),i.Tb(21,"div"),i.Tb(22,"button",7),i.ac("click",function(){return i.sc(n),i.qc(1).reset()}),i.Cc(23,"Cancel"),i.Sb(),i.Tb(24,"button",6),i.Cc(25,"Save"),i.Sb(),i.Sb(),i.Sb(),i.Tb(26,"mat-step",8),i.Ac(27,Wa,1,0,"ng-template",4),i.Cc(28," You are done. "),i.Tb(29,"div"),i.Tb(30,"button",7),i.ac("click",function(){return i.sc(n),i.qc(1).reset()}),i.Cc(31,"Repeat"),i.Sb(),i.Sb(),i.Sb(),i.Ac(32,Ya,1,0,"ng-template",9),i.Ac(33,Xa,1,0,"ng-template",10),i.Sb()}2&e&&(i.kc("linear",!0),i.Bb(2),i.kc("stepControl",t.firstFormGroup)("editable",!1),i.Bb(1),i.kc("formGroup",t.firstFormGroup),i.Bb(7),i.kc("stepControl",t.secondFormGroup)("editable",!1),i.Bb(1),i.kc("formGroup",t.secondFormGroup),i.Bb(7),i.kc("editable",!1),i.Bb(8),i.kc("editable",!1))},directives:[_a.f,_a.a,Sc.q,Sc.l,Sc.f,_a.b,Ai.b,wi.b,Sc.c,Sc.k,Sc.e,pn.a,_a.e,_a.c,ln.a],styles:[""]}),e}(),data:{title:"Calibrate dose",actions:["back","sync"]}}]}],qa=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(za)],r.e]}),e}(),Ja=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,qa,pn.b,ln.b,un.c,ka,xa]]}),e}(),Qa=[{path:"manual-control",component:function(){function e(e,t){this.store=e,this.selectIndexService=t}return e.prototype.onFertigate=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ut({type:It.fertigate,payload:{programId:t}}))})},e.prototype.onPumpIn=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ut({type:It.pumpIn,payload:{programId:t}}))})},e.prototype.onDose=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).pipe(Object($i.a)(function(t){return void 0===t?Li.a:e.selectIndexService.select({count:4,title:"Select dose"}).pipe(Object(nt.a)(function(e){return[t,e]}))})).subscribe(function(t){var n=t[0],i=t[1];void 0!==n&&void 0!==i&&e.store.dispatch(new ut({type:It.dose,payload:{programId:n,doseId:i}}))})},e.prototype.onDoseMix=function(){var e=this;this.selectIndexService.select({count:4,title:"Select dose"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ut({type:It.mixDose,payload:{mixerId:t}}))})},e.prototype.onMix=function(){this.store.dispatch(new ut({type:It.mix,payload:{mixerId:0}}))},e.prototype.onIrrigate=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ut({type:It.irrigate,payload:{programId:t}}))})},e.prototype.onWash=function(){var e=this;this.selectIndexService.select({count:4,title:"Select program"}).subscribe(function(t){void 0!==t&&e.store.dispatch(new ut({type:It.wash,payload:{programId:t}}))})},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b),i.Nb(kr))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-manual-control"]],decls:22,vars:0,consts:[[3,"click"],["svgIcon","fountain"],["svgIcon","water-pump"],["svgIcon","eyedropper"],["svgIcon","pinwheel"]],template:function(e,t){1&e&&(i.Tb(0,"mat-action-list"),i.Tb(1,"mat-list-item",0),i.ac("click",function(){return t.onFertigate()}),i.Ob(2,"mat-icon",1),i.Cc(3," \xa0 Fertigate "),i.Sb(),i.Tb(4,"mat-list-item",0),i.ac("click",function(){return t.onPumpIn()}),i.Ob(5,"mat-icon",2),i.Cc(6," \xa0 Pump In "),i.Sb(),i.Tb(7,"mat-list-item",0),i.ac("click",function(){return t.onDose()}),i.Ob(8,"mat-icon",3),i.Cc(9," \xa0 Dose "),i.Sb(),i.Tb(10,"mat-list-item",0),i.ac("click",function(){return t.onDoseMix()}),i.Ob(11,"mat-icon",4),i.Cc(12," \xa0 Dose mix "),i.Sb(),i.Tb(13,"mat-list-item",0),i.ac("click",function(){return t.onMix()}),i.Ob(14,"mat-icon",4),i.Cc(15," \xa0 Mix "),i.Sb(),i.Tb(16,"mat-list-item",0),i.ac("click",function(){return t.onIrrigate()}),i.Ob(17,"mat-icon",1),i.Cc(18," \xa0 Irrigate "),i.Sb(),i.Tb(19,"mat-list-item",0),i.ac("click",function(){return t.onWash()}),i.Ob(20,"mat-icon",1),i.Cc(21," \xa0 Wash "),i.Sb(),i.Sb())},directives:[un.a,un.b,ln.a],styles:[""]}),e}(),data:{title:"Manual Control",actions:["menu","bt","sync"]}}],Za=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(Qa)],r.e]}),e}(),es=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,un.c,ln.b,Za]]}),e}(),ts=n("JX91"),ns=n("FtGj");function is(e,t){if(1&e&&(i.Tb(0,"div",8),i.Ob(1,"img",9),i.Sb()),2&e){var n=i.ec();i.Bb(1),i.Cb("src",n.camshot.image,i.tc)}}var os=function(){function e(e,t,n,i){var o=this;this.db=e,this.dialogRef=i,this.keySubject=new Pr.a(null),this.keySubject.pipe(Object($i.a)(function(t){return Object(Fi.a)(e.getAccessControlCamshot(t)).pipe(Object(ts.a)(null))})).subscribe(function(e){o.camshot=e,t.markForCheck()}),this.key=n.key}return Object.defineProperty(e.prototype,"key",{get:function(){return this.keySubject.value},set:function(e){this.keySubject.next(e)},enumerable:!1,configurable:!0}),e.prototype.onKeyDown=function(e){switch(e.keyCode){case ns.i:this.onPrev();break;case ns.m:this.onNext()}},e.prototype.onPrev=function(){var e=this;this.db.getAccessControlCamshotPrev(this.key).then(function(t){var n=t.value;e.key=t.key,e.camshot=n})},e.prototype.onNext=function(){var e=this;this.db.getAccessControlCamshotNext(this.key).then(function(t){var n=t.value;e.key=t.key,e.camshot=n})},e.\u0275fac=function(t){return new(t||e)(i.Nb(Ar),i.Nb(i.h),i.Nb(yc.a),i.Nb(yc.g))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-camshot-slider"]],hostBindings:function(e,t){1&e&&i.ac("keydown",function(e){return t.onKeyDown(e)},!1,i.rc)},inputs:{key:"key"},decls:14,vars:9,consts:[["mat-dialog-title",""],[1,"pt-2"],[1,"d-flex","flex-column","flex-nowrap"],[1,"d-flex","flex-row","flex-nowrap"],[3,"click"],["svgIcon","chevron-left"],["class","flex-fill",4,"ngIf"],["svgIcon","chevron-right"],[1,"flex-fill"],[1,"mx-auto","d-block"]],template:function(e,t){1&e&&(i.Tb(0,"h1",0),i.Cc(1),i.fc(2,"date"),i.Sb(),i.Tb(3,"mat-dialog-content",1),i.Tb(4,"div",2),i.Tb(5,"div",3),i.Tb(6,"div",4),i.ac("click",function(){return t.onPrev()}),i.Ob(7,"mat-icon",5),i.Sb(),i.Ac(8,is,2,1,"div",6),i.Tb(9,"div",4),i.ac("click",function(){return t.onNext()}),i.Ob(10,"mat-icon",7),i.Sb(),i.Sb(),i.Tb(11,"div"),i.Cc(12),i.fc(13,"date"),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.Dc(i.hc(2,3,t.key,"yyyy.MM.dd HH:mm:ss")),i.Bb(7),i.kc("ngIf",t.camshot),i.Bb(4),i.Ec(" ",i.hc(13,6,t.key,"HH:mm:ss")," "))},directives:[yc.h,yc.e,ln.a,an.m],pipes:[an.e],styles:["mat-dialog-content[_ngcontent-%COMP%]{max-height:100vh}"]}),e}(),cs=function(){function e(e){this.dialog=e}return e.prototype.show=function(e){return this.dialog.open(os,{data:{key:e},width:"100vw",height:"100vh"}).afterClosed()},e.\u0275fac=function(t){return new(t||e)(i.Xb(yc.b))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),e}();function rs(e,t){if(1&e){var n=i.Ub();i.Rb(0),i.Tb(1,"img",2),i.ac("click",function(){return i.sc(n),i.ec().onClick()}),i.Sb(),i.Qb()}if(2&e){var o=i.ec();i.Bb(1),i.Cb("src",o.camshot.image,i.tc)}}var as=function(){function e(e,t,n){var i=this;this.camshotSlider=n,this.keySubject=new Pr.a(null),this.keySubject.pipe(Object($i.a)(function(t){return Object(Fi.a)(e.getAccessControlCamshot(t)).pipe(Object(ts.a)(null))})).subscribe(function(e){i.camshot=e,t.markForCheck()})}return Object.defineProperty(e.prototype,"key",{get:function(){return this.keySubject.value},set:function(e){this.keySubject.next(e)},enumerable:!1,configurable:!0}),e.prototype.onClick=function(){this.camshotSlider.show(this.key)},e.\u0275fac=function(t){return new(t||e)(i.Nb(Ar),i.Nb(i.h),i.Nb(cs))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-camshot"]],inputs:{key:"key"},decls:5,vars:5,consts:[[1,"d-flex","flex-column","flex-nowrap"],[4,"ngIf"],["width","64","height","48",1,"flex-fill",3,"click"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Ac(1,rs,2,1,"ng-container",1),i.Tb(2,"div"),i.Cc(3),i.fc(4,"date"),i.Sb(),i.Sb()),2&e&&(i.Bb(1),i.kc("ngIf",t.camshot),i.Bb(2),i.Ec(" ",i.hc(4,2,t.key,"HH:mm:ss")," "))},directives:[an.m],pipes:[an.e],styles:[""],changeDetection:0}),e}();function ss(e,t){1&e&&i.Ob(0,"app-camshot",2),2&e&&i.kc("key",t.$implicit)}var us=function(){function e(){}return e.prototype.trackByKey=function(e,t){return t},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-camshots"]],inputs:{keys:"keys"},decls:2,vars:2,consts:[["itemSize","64","orientation","horizontal",1,"h-100","w-100","overflow-auto"],["class","d-block",3,"key",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"d-block",3,"key"]],template:function(e,t){1&e&&(i.Tb(0,"cdk-virtual-scroll-viewport",0),i.Ac(1,ss,1,1,"app-camshot",1),i.Sb()),2&e&&(i.Bb(1),i.kc("cdkVirtualForOf",t.keys)("cdkVirtualForTrackBy",t.trackByKey))},directives:[mr.e,mr.a,mr.d,as],styles:["[_nghost-%COMP%]     .cdk-virtual-scroll-content-wrapper{display:flex;flex-direction:row;flex-wrap:nowrap}app-camshot[_ngcontent-%COMP%]{width:64px}"],changeDetection:0}),e}(),ps=function(){function e(e,t){var n=this;this.episodeSubject=new Pr.a(null),this.episodeSubject.pipe(Object($i.a)(function(t){return Object(Fi.a)(e.getAccessControlEpisodeKeys(t))})).subscribe(function(e){n.episodeKeys=e,t.markForCheck()})}return Object.defineProperty(e.prototype,"episode",{get:function(){return this.episodeSubject.value},set:function(e){this.episodeSubject.next(e)},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(i.Nb(Ar),i.Nb(i.h))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-episode"]],inputs:{episode:"episode"},decls:6,vars:9,consts:[[1,"h-100","d-flex","flex-column","flex-nowrap"],[1,"flex-fill",3,"keys"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"div"),i.Cc(2),i.fc(3,"date"),i.fc(4,"date"),i.Sb(),i.Ob(5,"app-camshots",1),i.Sb()),2&e&&(i.Bb(2),i.Fc("",i.hc(3,3,t.episode.key,"yyyy.MM.dd HH:mm:ss")," - ",i.hc(4,6,t.episode.value.lastKey,"HH:mm:ss"),""),i.Bb(3),i.kc("keys",t.episodeKeys))},directives:[us],pipes:[an.e],styles:["app-camshots[_ngcontent-%COMP%]{width:100%;display:block;overflow:hidden}"],changeDetection:0}),e}();function ls(e,t){1&e&&i.Ob(0,"app-episode",2),2&e&&i.kc("episode",t.$implicit)}var bs=[{path:"access-control",component:function(){function e(e){this.store=e,this.log$=this.store.pipe(Object(p.h)(nn))}return e.prototype.trackByKey=function(e,t){return t.key},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-access-control"]],decls:3,vars:4,consts:[["itemSize","120",1,"h-100","w-100"],[3,"episode",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"episode"]],template:function(e,t){1&e&&(i.Tb(0,"cdk-virtual-scroll-viewport",0),i.Ac(1,ls,1,1,"app-episode",1),i.fc(2,"async"),i.Sb()),2&e&&(i.Bb(1),i.kc("cdkVirtualForOf",i.gc(2,2,t.log$))("cdkVirtualForTrackBy",t.trackByKey))},directives:[mr.e,mr.a,mr.d,ps],pipes:[an.b],styles:["app-episode[_ngcontent-%COMP%]{width:100%;height:120px;display:block}"]}),e}(),data:{title:"Access control",actions:["menu","bt","sync"]}}],ds=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(bs)],r.e]}),e}(),fs=n("NXyV"),ms=n("PZkE"),hs=n("/d8p"),gs=function(){function e(e,t,n,i){this.actions$=e,this.store=t,this.accessControl=n,this.db=i}return e.prototype.init=function(){var e=this;return this.actions$.pipe(Object(_n.d)(Jt.INIT)).pipe(Object($i.a)(function(){return Object(Mi.a)(Object(Fi.a)(e.db.getAccessControlEpisode()).pipe(Object(nt.a)(function(e){return new en(e)})),e.store.pipe(Object(p.h)(Ze),Object(ms.a)("enable")).pipe(Object($i.a)(function(t){return t.enable?Object(Mi.a)(e.stop(),e.start(t),e.process(t)):e.stop()})))}))},e.prototype.add=function(){var e=this;return this.actions$.pipe(Object(_n.d)(Jt.ADD)).pipe(Object(Ki.a)(this.store.pipe(Object(p.h)(on)))).pipe(Object(Vi.a)(function(t){var n=t[0],i=t[1];return Object(Fi.a)(e.db.logAccessControl(i.key,n.payload))}))},e.prototype.start=function(e){var t=this;return Object(Mi.a)(this.accessControl.state$.pipe(Object(tt.a)(function(e){return"idle"===e}),Object(hr.a)()),Object(fs.a)(function(){return t.accessControl.start(e)})).pipe(Object(Qr.a)())},e.prototype.stop=function(){var e=this;return Object(Mi.a)(this.accessControl.state$.pipe(Object(tt.a)(function(e){return"idle"===e}),Object(hr.a)()),Object(fs.a)(function(){return e.accessControl.stop()})).pipe(Object(Qr.a)())},e.prototype.process=function(e){var t=this;return Object(fs.a)(function(){return Object(Bi.a)(Date.now())}).pipe(Object($i.a)(function(n){return Object(fs.a)(function(){return t.accessControl.process()}).pipe(Object($i.a)(function(i){var o=Math.max(1e3/e.fps-(Date.now()-n),30);return Object(Mi.a)(i?Object(Bi.a)(new Zt({key:n,value:{processTime:Date.now()-n,image:t.accessControl.getImage()}})):Li.a,Object(Bi.a)(1).pipe(Object(Nr.a)(o),Object(Qr.a)()))}))}),Object(hs.a)())},e.prototype.process2=function(e){var t=this;return Object(na.a)(0,1e3/e.fps).pipe(Object(Er.a)(function(){return Object(fs.a)(function(){return Object(Bi.a)(Date.now())}).pipe(Object($i.a)(function(e){return Object(fs.a)(function(){return t.accessControl.process()}).pipe(Object($i.a)(function(n){return n?Object(Bi.a)(new Zt({key:e,value:{processTime:Date.now()-e,image:t.accessControl.getImage()}})):Li.a}))}))}))},e.\u0275fac=function(t){return new(t||e)(i.Xb(_n.a),i.Xb(p.b),i.Xb($r),i.Xb(Ar))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac}),Object(u.c)([Object(_n.b)({dispatch:!0}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"init",null),Object(u.c)([Object(_n.b)({dispatch:!1}),Object(u.e)("design:type",Function),Object(u.e)("design:paramtypes",[]),Object(u.e)("design:returntype",Ui.a)],e.prototype,"add",null),e}(),ys=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[p.d,Yr,p.d.forFeature("accessControl",cn),_n.c.forFeature([gs])]]}),e}(),Os=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[cs],imports:[[an.c,yc.f,pn.b,ln.b]]}),e}(),vs=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Os]]}),e}(),Ss=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,mr.g,vs]]}),e}(),Ts=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Ss]]}),e}(),Cs=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,mr.g,ds,ys,Ts]]}),e}();function Es(e,t){if(1&e){var n=i.Ub();i.Tb(0,"div",1),i.Tb(1,"mat-slide-toggle",2),i.ac("change",function(e){i.sc(n);var o=t.$implicit;return i.ec().onChange(o,+e.checked)}),i.Cc(2),i.Sb(),i.Sb()}if(2&e){var o=t.$implicit;i.Bb(2),i.Ec(" #",o+1," ")}}var js=function(){function e(e){this.store=e,this.pumpCount=2}return e.prototype.onChange=function(e,t){this.store.dispatch(new ut({type:It.setStatePump,payload:{index:e,value:t}}))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-test-pump-list"]],decls:2,vars:4,consts:[["class","row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"row"],[1,"d-block","col-6",3,"change"]],template:function(e,t){1&e&&(i.Ac(0,Es,3,1,"div",0),i.fc(1,"times")),2&e&&i.kc("ngForOf",i.gc(1,2,t.pumpCount))("ngForTrackBy",t.trackByIndex)},directives:[an.l,Zi.a],pipes:[Dr],styles:[""],changeDetection:0}),e}();function As(e,t){if(1&e){var n=i.Ub();i.Tb(0,"div",1),i.Tb(1,"mat-slide-toggle",2),i.ac("change",function(e){i.sc(n);var o=t.$implicit;return i.ec().onChange(o,+e.checked)}),i.Cc(2),i.Sb(),i.Sb()}if(2&e){var o=t.$implicit;i.Bb(2),i.Ec(" #",o+1," ")}}var ws=function(){function e(e){this.store=e,this.valveCount=l}return e.prototype.onChange=function(e,t){this.store.dispatch(new ut({type:It.setStateValve,payload:{index:e,value:t}}))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-test-valve-list"]],decls:2,vars:4,consts:[["class","row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"row"],[1,"d-block","col-6",3,"change"]],template:function(e,t){1&e&&(i.Ac(0,As,3,1,"div",0),i.fc(1,"times")),2&e&&i.kc("ngForOf",i.gc(1,2,t.valveCount))("ngForTrackBy",t.trackByIndex)},directives:[an.l,Zi.a],pipes:[Dr],styles:[""],changeDetection:0}),e}();function Is(e,t){if(1&e){var n=i.Ub();i.Tb(0,"div",1),i.Tb(1,"mat-slide-toggle",2),i.ac("change",function(e){i.sc(n);var o=t.$implicit;return i.ec().onChange(o,+e.checked)}),i.Cc(2),i.Sb(),i.Sb()}if(2&e){var o=t.$implicit;i.Bb(2),i.Ec(" #",o+1," ")}}var Ds=function(){function e(e){this.store=e,this.doseCount=4}return e.prototype.onChange=function(e,t){this.store.dispatch(new ut({type:It.setStateDose,payload:{index:e,value:t}}))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-test-dose-list"]],decls:2,vars:4,consts:[["class","row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"row"],[1,"d-block","col-6",3,"change"]],template:function(e,t){1&e&&(i.Ac(0,Is,3,1,"div",0),i.fc(1,"times")),2&e&&i.kc("ngForOf",i.gc(1,2,t.doseCount))("ngForTrackBy",t.trackByIndex)},directives:[an.l,Zi.a],pipes:[Dr],styles:[""],changeDetection:0}),e}();function _s(e,t){if(1&e){var n=i.Ub();i.Tb(0,"div",1),i.Tb(1,"mat-slide-toggle",2),i.ac("change",function(e){i.sc(n);var o=t.$implicit;return i.ec().onChange(o,+e.checked)}),i.Cc(2),i.Sb(),i.Sb()}if(2&e){var o=t.$implicit;i.Bb(2),i.Ec(" #",o+1," ")}}var xs=function(){function e(e){this.store=e,this.mixerCount=1}return e.prototype.onChange=function(e,t){this.store.dispatch(new ut({type:It.setStateMixer,payload:{index:e,value:t}}))},e.prototype.trackByIndex=function(e,t){return e},e.\u0275fac=function(t){return new(t||e)(i.Nb(p.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-test-mixer-list"]],decls:2,vars:4,consts:[["class","row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"row"],[1,"d-block","col-6",3,"change"]],template:function(e,t){1&e&&(i.Ac(0,_s,3,1,"div",0),i.fc(1,"times")),2&e&&i.kc("ngForOf",i.gc(1,2,t.mixerCount))("ngForTrackBy",t.trackByIndex)},directives:[an.l,Zi.a],pipes:[Dr],styles:[""],changeDetection:0}),e}();function ks(e,t){1&e&&i.Ob(0,"app-test-pump-list")}function Rs(e,t){1&e&&i.Ob(0,"app-test-valve-list")}function Ns(e,t){1&e&&i.Ob(0,"app-test-dose-list")}function Ps(e,t){1&e&&i.Ob(0,"app-test-mixer-list")}var Ms=[{path:"test",component:function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-test"]],decls:29,vars:0,consts:[["matExpansionPanelContent",""]],template:function(e,t){1&e&&(i.Tb(0,"mat-accordion"),i.Tb(1,"mat-expansion-panel"),i.Tb(2,"mat-expansion-panel-header"),i.Tb(3,"mat-panel-title"),i.Cc(4," Pumps "),i.Sb(),i.Tb(5,"mat-panel-description"),i.Cc(6," Pumps state "),i.Sb(),i.Sb(),i.Ac(7,ks,1,0,"ng-template",0),i.Sb(),i.Tb(8,"mat-expansion-panel"),i.Tb(9,"mat-expansion-panel-header"),i.Tb(10,"mat-panel-title"),i.Cc(11," Valves "),i.Sb(),i.Tb(12,"mat-panel-description"),i.Cc(13," Valves state "),i.Sb(),i.Sb(),i.Ac(14,Rs,1,0,"ng-template",0),i.Sb(),i.Tb(15,"mat-expansion-panel"),i.Tb(16,"mat-expansion-panel-header"),i.Tb(17,"mat-panel-title"),i.Cc(18," Doses "),i.Sb(),i.Tb(19,"mat-panel-description"),i.Cc(20," Doses state "),i.Sb(),i.Sb(),i.Ac(21,Ns,1,0,"ng-template",0),i.Sb(),i.Tb(22,"mat-expansion-panel"),i.Tb(23,"mat-expansion-panel-header"),i.Tb(24,"mat-panel-title"),i.Cc(25," Mixers "),i.Sb(),i.Tb(26,"mat-panel-description"),i.Cc(27," Mixers state "),i.Sb(),i.Sb(),i.Ac(28,Ps,1,0,"ng-template",0),i.Sb(),i.Sb())},directives:[Di.a,Di.c,Di.f,Di.g,Di.e,Di.d,js,ws,Ds,xs],styles:[""],changeDetection:0}),e}(),data:{title:"Test Control",actions:["menu","bt","sync"]}}],Bs=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(Ms)],r.e]}),e}(),Ls=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Zi.b,En]]}),e}(),Fs=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Zi.b,En]]}),e}(),Us=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Zi.b,En]]}),e}(),$s=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Zi.b,En]]}),e}(),Gs=function(){function e(){}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[an.c,Di.b,Cn,Bs,Ls,Fs,Us,$s]]}),e}();function Hs(e){return function(t,n){var i=e(t,n);return console.log("action "+n.type,{payload:n.payload,oldState:t,newState:i}),i}}var Vs=function(){function e(e,t){e.addSvgIconSet(t.bypassSecurityTrustResourceUrl("assets/sprite.svg"))}return e.\u0275mod=i.Lb({type:e,bootstrap:[Tn]}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)(i.Xb(ln.c),i.Xb(c.b))},providers:[],imports:[[c.a,Jc.b,Qc.b,s,qc,Cn,ji,_c,pr,Cr,zr,wa,Ji,Ir,ea,oa,aa,ca,Da,Ja,es,Gs,Cs,lr.a.register("ngsw-worker.js",{enabled:o}),p.d.forRoot({},{metaReducers:o?[]:[Hs]}),_n.c.forRoot([])]]}),e}();o&&Object(i.U)(),document.addEventListener("deviceready",function(){c.c().bootstrapModule(Vs).catch(function(e){return console.error(e.message,e)})},!1)}},[[0,0,5]]]);